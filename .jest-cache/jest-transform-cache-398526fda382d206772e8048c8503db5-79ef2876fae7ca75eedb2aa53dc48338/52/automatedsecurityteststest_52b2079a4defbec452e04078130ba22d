78dc80bd505acbd874d9b7be266b16a9
"use strict";
/**
 * Automated Security Testing Suite
 *
 * Comprehensive automated security testing including OWASP Top 10,
 * API security testing, and continuous security validation.
 *
 * Requirements: 25.7 - Automated security testing suite
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock external dependencies
jest.mock('@/core/logging/logger', () => ({
    logger: {
        info: jest.fn(),
        debug: jest.fn(),
        warn: jest.fn(),
        error: jest.fn()
    }
}));
const security_manager_1 = require("@/security/security-manager");
const threat_detection_engine_1 = require("@/security/threat-detection-engine");
const encryption_service_1 = require("@/security/encryption-service");
const credential_manager_1 = require("@/security/credential-manager");
const security_monitoring_service_1 = require("@/security/security-monitoring-service");
const crypto_1 = __importDefault(require("crypto"));
describe('Automated Security Testing Suite', () => {
    let securityManager;
    let threatDetection;
    let encryptionService;
    let credentialManager;
    let securityMonitoring;
    beforeEach(() => {
        // Set up test environment with master key
        process.env.MASTER_ENCRYPTION_KEY = crypto_1.default.randomBytes(32).toString('hex');
        securityManager = new security_manager_1.SecurityManager();
        threatDetection = new threat_detection_engine_1.ThreatDetectionEngine();
        encryptionService = new encryption_service_1.EncryptionService();
        credentialManager = new credential_manager_1.CredentialManager();
        securityMonitoring = new security_monitoring_service_1.SecurityMonitoringService();
    });
    afterEach(() => {
        delete process.env.MASTER_ENCRYPTION_KEY;
    });
    describe('OWASP Top 10 Security Testing', () => {
        it('should test for injection vulnerabilities (A03:2021)', async () => {
            const injectionPayloads = [
                // SQL Injection
                "'; DROP TABLE users; --",
                "' OR '1'='1",
                "1' UNION SELECT * FROM credentials--",
                // NoSQL Injection
                '{"$ne": null}',
                '{"$gt": ""}',
                '{"$where": "this.password.match(/.*/)"}',
                // Command Injection
                '; cat /etc/passwd',
                '| whoami',
                '&& rm -rf /',
                // LDAP Injection
                '*)(&(objectClass=*))',
                '*)(uid=*))(|(uid=*',
                // XPath Injection
                "' or '1'='1",
                "'] | //user/*[contains(*,'Admin')] | ['",
                // Template Injection
                '{{7*7}}',
                '${7*7}',
                '<%= 7*7 %>',
                '#{7*7}'
            ];
            let vulnerabilitiesFound = 0;
            const testResults = [];
            for (const payload of injectionPayloads) {
                try {
                    // Test credential storage with malicious input
                    const result = await credentialManager.encryptCredential(payload);
                    // Verify the payload was properly sanitized/escaped
                    const decrypted = await credentialManager.decryptCredential(result);
                    // Check if the payload was executed (vulnerability)
                    if (decrypted !== payload) {
                        vulnerabilitiesFound++;
                        testResults.push({
                            payload,
                            vulnerability: 'INJECTION_DETECTED',
                            severity: 'HIGH'
                        });
                    }
                    // Additional checks for code execution
                    if (payload.includes('DROP TABLE') && decrypted.includes('error')) {
                        vulnerabilitiesFound++;
                        testResults.push({
                            payload,
                            vulnerability: 'SQL_INJECTION_POSSIBLE',
                            severity: 'CRITICAL'
                        });
                    }
                }
                catch (error) {
                    // Errors are expected for malicious input - this is good
                    testResults.push({
                        payload,
                        result: 'BLOCKED',
                        severity: 'NONE'
                    });
                }
            }
            // Should not find any injection vulnerabilities
            expect(vulnerabilitiesFound).toBe(0);
            // All malicious payloads should be blocked or safely handled
            const blockedPayloads = testResults.filter(r => r.result === 'BLOCKED').length;
            expect(blockedPayloads).toBeGreaterThan(injectionPayloads.length * 0.8); // At least 80% blocked
        });
        it('should test for broken authentication (A07:2021)', async () => {
            const authenticationTests = [
                // Weak password tests
                { username: 'admin', password: 'admin', expected: 'REJECT' },
                { username: 'admin', password: '123456', expected: 'REJECT' },
                { username: 'admin', password: 'password', expected: 'REJECT' },
                { username: 'root', password: 'root', expected: 'REJECT' },
                // Brute force simulation
                { username: 'admin', password: 'wrong1', expected: 'REJECT' },
                { username: 'admin', password: 'wrong2', expected: 'REJECT' },
                { username: 'admin', password: 'wrong3', expected: 'REJECT' },
                { username: 'admin', password: 'wrong4', expected: 'REJECT' },
                { username: 'admin', password: 'wrong5', expected: 'REJECT' },
                // Session fixation tests
                { sessionId: 'fixed_session_123', expected: 'REJECT' },
                { sessionId: 'predictable_session_456', expected: 'REJECT' },
                // Strong authentication
                { username: 'admin', password: 'StrongP@ssw0rd!2024', expected: 'ACCEPT' }
            ];
            let authenticationVulnerabilities = 0;
            const authResults = [];
            for (const test of authenticationTests) {
                try {
                    if (test.password) {
                        // Test password strength
                        const passwordStrength = await this.testPasswordStrength(test.password);
                        if (passwordStrength.isWeak && test.expected === 'ACCEPT') {
                            authenticationVulnerabilities++;
                            authResults.push({
                                test: test.username,
                                vulnerability: 'WEAK_PASSWORD_ACCEPTED',
                                severity: 'HIGH'
                            });
                        }
                        // Test for brute force protection
                        if (test.username === 'admin' && test.password.startsWith('wrong')) {
                            const bruteForceDetected = await threatDetection.detectBruteForce({
                                username: test.username,
                                password: test.password,
                                ip: '192.168.1.100',
                                timestamp: new Date()
                            });
                            if (!bruteForceDetected) {
                                authenticationVulnerabilities++;
                                authResults.push({
                                    test: test.username,
                                    vulnerability: 'BRUTE_FORCE_NOT_DETECTED',
                                    severity: 'MEDIUM'
                                });
                            }
                        }
                    }
                    if (test.sessionId) {
                        // Test session security
                        const sessionSecurity = await this.testSessionSecurity(test.sessionId);
                        if (!sessionSecurity.isSecure) {
                            authenticationVulnerabilities++;
                            authResults.push({
                                test: test.sessionId,
                                vulnerability: 'INSECURE_SESSION',
                                severity: 'HIGH'
                            });
                        }
                    }
                }
                catch (error) {
                    // Authentication errors are expected for invalid credentials
                }
            }
            // Should not find authentication vulnerabilities
            expect(authenticationVulnerabilities).toBe(0);
        });
        it('should test for sensitive data exposure (A02:2021)', async () => {
            const sensitiveDataTests = [
                {
                    data: 'GATE_IO_API_KEY=gateio_api_key_12345',
                    context: 'environment_variable',
                    shouldBeEncrypted: true
                },
                {
                    data: 'SECRET_KEY=super_secret_trading_key',
                    context: 'configuration_file',
                    shouldBeEncrypted: true
                },
                {
                    data: 'password=user_password_123',
                    context: 'log_entry',
                    shouldBeRedacted: true
                },
                {
                    data: '4111-1111-1111-1111',
                    context: 'credit_card',
                    shouldBeRedacted: true
                },
                {
                    data: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAB...',
                    context: 'private_key',
                    shouldBeEncrypted: true
                }
            ];
            let exposureVulnerabilities = 0;
            const exposureResults = [];
            for (const test of sensitiveDataTests) {
                try {
                    if (test.shouldBeEncrypted) {
                        // Test if sensitive data is properly encrypted
                        const encrypted = await encryptionService.encryptData(test.data);
                        // Verify data is actually encrypted
                        if (encrypted.encryptedData === test.data) {
                            exposureVulnerabilities++;
                            exposureResults.push({
                                data: test.context,
                                vulnerability: 'UNENCRYPTED_SENSITIVE_DATA',
                                severity: 'CRITICAL'
                            });
                        }
                        // Test if encrypted data can be decrypted
                        const decrypted = await encryptionService.decryptData(encrypted);
                        if (decrypted !== test.data) {
                            exposureVulnerabilities++;
                            exposureResults.push({
                                data: test.context,
                                vulnerability: 'ENCRYPTION_INTEGRITY_FAILURE',
                                severity: 'HIGH'
                            });
                        }
                    }
                    if (test.shouldBeRedacted) {
                        // Test if sensitive data is properly redacted in logs
                        const redacted = await this.redactSensitiveData(test.data);
                        if (redacted === test.data) {
                            exposureVulnerabilities++;
                            exposureResults.push({
                                data: test.context,
                                vulnerability: 'SENSITIVE_DATA_NOT_REDACTED',
                                severity: 'MEDIUM'
                            });
                        }
                        // Verify redaction contains masking
                        if (!redacted.includes('***') && !redacted.includes('REDACTED')) {
                            exposureVulnerabilities++;
                            exposureResults.push({
                                data: test.context,
                                vulnerability: 'IMPROPER_REDACTION',
                                severity: 'MEDIUM'
                            });
                        }
                    }
                }
                catch (error) {
                    // Encryption/redaction errors might indicate vulnerabilities
                    exposureVulnerabilities++;
                    exposureResults.push({
                        data: test.context,
                        vulnerability: 'DATA_PROTECTION_ERROR',
                        severity: 'HIGH',
                        error: error.message
                    });
                }
            }
            // Should not find data exposure vulnerabilities
            expect(exposureVulnerabilities).toBe(0);
        });
        it('should test for security misconfiguration (A05:2021)', async () => {
            const configurationTests = [
                // Default credentials
                { type: 'default_credentials', key: 'admin', value: 'admin' },
                { type: 'default_credentials', key: 'root', value: 'root' },
                // Insecure protocols
                { type: 'protocol', value: 'http://', expected: 'INSECURE' },
                { type: 'protocol', value: 'ftp://', expected: 'INSECURE' },
                { type: 'protocol', value: 'https://', expected: 'SECURE' },
                // Weak encryption
                { type: 'encryption', algorithm: 'DES', expected: 'WEAK' },
                { type: 'encryption', algorithm: 'MD5', expected: 'WEAK' },
                { type: 'encryption', algorithm: 'AES-256-GCM', expected: 'STRONG' },
                // Insecure ports
                { type: 'port', value: 23, protocol: 'telnet', expected: 'INSECURE' },
                { type: 'port', value: 21, protocol: 'ftp', expected: 'INSECURE' },
                { type: 'port', value: 22, protocol: 'ssh', expected: 'SECURE' },
                // Debug modes
                { type: 'debug', enabled: true, environment: 'production', expected: 'INSECURE' },
                { type: 'debug', enabled: false, environment: 'production', expected: 'SECURE' }
            ];
            let misconfigurationVulnerabilities = 0;
            const configResults = [];
            for (const test of configurationTests) {
                try {
                    let isVulnerable = false;
                    switch (test.type) {
                        case 'default_credentials':
                            // Test for default credentials
                            if (test.key === 'admin' && test.value === 'admin') {
                                isVulnerable = true;
                            }
                            break;
                        case 'protocol':
                            // Test for insecure protocols
                            if (test.value.startsWith('http://') || test.value.startsWith('ftp://')) {
                                isVulnerable = true;
                            }
                            break;
                        case 'encryption':
                            // Test for weak encryption
                            if (test.algorithm === 'DES' || test.algorithm === 'MD5') {
                                isVulnerable = true;
                            }
                            break;
                        case 'port':
                            // Test for insecure ports
                            if (test.value === 23 || test.value === 21) {
                                isVulnerable = true;
                            }
                            break;
                        case 'debug':
                            // Test for debug mode in production
                            if (test.enabled && test.environment === 'production') {
                                isVulnerable = true;
                            }
                            break;
                    }
                    if (isVulnerable) {
                        misconfigurationVulnerabilities++;
                        configResults.push({
                            test: test.type,
                            vulnerability: 'SECURITY_MISCONFIGURATION',
                            severity: 'MEDIUM',
                            details: test
                        });
                    }
                }
                catch (error) {
                    // Configuration errors might indicate misconfigurations
                }
            }
            // Should not find misconfiguration vulnerabilities
            expect(misconfigurationVulnerabilities).toBe(0);
        });
        it('should test for vulnerable components (A06:2021)', async () => {
            const componentTests = [
                // Test for known vulnerable versions
                { component: 'openssl', version: '1.0.1', knownVulnerable: true },
                { component: 'nodejs', version: '10.0.0', knownVulnerable: true },
                { component: 'express', version: '3.0.0', knownVulnerable: true },
                // Test for secure versions
                { component: 'openssl', version: '3.0.0', knownVulnerable: false },
                { component: 'nodejs', version: '18.0.0', knownVulnerable: false },
                { component: 'express', version: '4.18.0', knownVulnerable: false }
            ];
            let vulnerableComponents = 0;
            const componentResults = [];
            for (const test of componentTests) {
                try {
                    // Simulate vulnerability scanning
                    const vulnerabilityCheck = await this.checkComponentVulnerabilities(test.component, test.version);
                    if (vulnerabilityCheck.hasVulnerabilities && !test.knownVulnerable) {
                        vulnerableComponents++;
                        componentResults.push({
                            component: test.component,
                            version: test.version,
                            vulnerability: 'UNEXPECTED_VULNERABILITY',
                            severity: 'HIGH',
                            vulnerabilities: vulnerabilityCheck.vulnerabilities
                        });
                    }
                    if (!vulnerabilityCheck.hasVulnerabilities && test.knownVulnerable) {
                        // This might indicate the vulnerability scanner is not working
                        componentResults.push({
                            component: test.component,
                            version: test.version,
                            issue: 'VULNERABILITY_NOT_DETECTED',
                            severity: 'LOW'
                        });
                    }
                }
                catch (error) {
                    // Component checking errors
                }
            }
            // Should detect known vulnerable components
            expect(vulnerableComponents).toBe(0);
        });
    });
    describe('API Security Testing', () => {
        it('should test API authentication mechanisms', async () => {
            const apiTests = [
                // Missing authentication
                { endpoint: '/api/v4/spot/accounts', auth: null, expected: 'REJECT' },
                { endpoint: '/api/v4/spot/orders', auth: null, expected: 'REJECT' },
                // Invalid authentication
                { endpoint: '/api/v4/spot/accounts', auth: 'invalid_token', expected: 'REJECT' },
                { endpoint: '/api/v4/spot/orders', auth: 'expired_token', expected: 'REJECT' },
                // Valid authentication
                { endpoint: '/api/v4/spot/time', auth: null, expected: 'ACCEPT' }, // Public endpoint
                { endpoint: '/api/v4/spot/accounts', auth: 'valid_token', expected: 'ACCEPT' }
            ];
            let apiVulnerabilities = 0;
            const apiResults = [];
            for (const test of apiTests) {
                try {
                    const authResult = await this.testAPIAuthentication(test.endpoint, test.auth);
                    if (authResult.allowed && test.expected === 'REJECT') {
                        apiVulnerabilities++;
                        apiResults.push({
                            endpoint: test.endpoint,
                            vulnerability: 'AUTHENTICATION_BYPASS',
                            severity: 'CRITICAL'
                        });
                    }
                    if (!authResult.allowed && test.expected === 'ACCEPT') {
                        apiVulnerabilities++;
                        apiResults.push({
                            endpoint: test.endpoint,
                            vulnerability: 'VALID_REQUEST_REJECTED',
                            severity: 'MEDIUM'
                        });
                    }
                }
                catch (error) {
                    // API errors are expected for invalid requests
                }
            }
            // Should not find API authentication vulnerabilities
            expect(apiVulnerabilities).toBe(0);
        });
        it('should test API rate limiting', async () => {
            const rateLimitTests = [
                { endpoint: '/api/v4/spot/orders', limit: 10, timeWindow: 1000 }, // 10 requests per second
                { endpoint: '/api/v4/spot/accounts', limit: 5, timeWindow: 1000 }, // 5 requests per second
                { endpoint: '/api/v4/spot/time', limit: 100, timeWindow: 1000 } // 100 requests per second
            ];
            let rateLimitVulnerabilities = 0;
            const rateLimitResults = [];
            for (const test of rateLimitTests) {
                try {
                    // Send requests exceeding the rate limit
                    const requests = [];
                    for (let i = 0; i < test.limit + 5; i++) {
                        requests.push(this.makeAPIRequest(test.endpoint));
                    }
                    const results = await Promise.allSettled(requests);
                    const successfulRequests = results.filter(r => r.status === 'fulfilled').length;
                    // Should not allow more requests than the limit
                    if (successfulRequests > test.limit) {
                        rateLimitVulnerabilities++;
                        rateLimitResults.push({
                            endpoint: test.endpoint,
                            vulnerability: 'RATE_LIMIT_BYPASS',
                            severity: 'MEDIUM',
                            allowedRequests: successfulRequests,
                            expectedLimit: test.limit
                        });
                    }
                }
                catch (error) {
                    // Rate limiting errors are expected
                }
            }
            // Should not find rate limiting vulnerabilities
            expect(rateLimitVulnerabilities).toBe(0);
        });
        it('should test API input validation', async () => {
            const inputValidationTests = [
                // SQL injection in API parameters
                { endpoint: '/api/v4/spot/orders', param: 'symbol', value: "BTC'; DROP TABLE orders; --" },
                { endpoint: '/api/v4/spot/accounts', param: 'currency', value: "' OR '1'='1" },
                // XSS in API parameters
                { endpoint: '/api/v4/spot/orders', param: 'client_order_id', value: '<script>alert("xss")</script>' },
                { endpoint: '/api/v4/spot/accounts', param: 'type', value: 'javascript:alert(1)' },
                // Command injection
                { endpoint: '/api/v4/spot/orders', param: 'amount', value: '1; cat /etc/passwd' },
                { endpoint: '/api/v4/spot/accounts', param: 'page', value: '1 && rm -rf /' },
                // Buffer overflow attempts
                { endpoint: '/api/v4/spot/orders', param: 'symbol', value: 'A'.repeat(10000) },
                { endpoint: '/api/v4/spot/accounts', param: 'currency', value: 'B'.repeat(50000) },
                // Invalid data types
                { endpoint: '/api/v4/spot/orders', param: 'amount', value: 'not_a_number' },
                { endpoint: '/api/v4/spot/orders', param: 'price', value: 'invalid_price' }
            ];
            let inputValidationVulnerabilities = 0;
            const validationResults = [];
            for (const test of inputValidationTests) {
                try {
                    const validationResult = await this.testAPIInputValidation(test.endpoint, test.param, test.value);
                    if (validationResult.accepted) {
                        inputValidationVulnerabilities++;
                        validationResults.push({
                            endpoint: test.endpoint,
                            parameter: test.param,
                            vulnerability: 'INPUT_VALIDATION_BYPASS',
                            severity: 'HIGH',
                            maliciousInput: test.value.substring(0, 100) // Truncate for logging
                        });
                    }
                }
                catch (error) {
                    // Input validation errors are expected for malicious input
                }
            }
            // Should not find input validation vulnerabilities
            expect(inputValidationVulnerabilities).toBe(0);
        });
    });
    describe('Continuous Security Monitoring', () => {
        it('should perform automated security scans', async () => {
            const scanResults = await securityManager.performSecurityScan();
            expect(scanResults).toBeDefined();
            expect(typeof scanResults.isSecure).toBe('boolean');
            expect(typeof scanResults.securityLevel).toBe('number');
            expect(scanResults.securityLevel).toBeGreaterThanOrEqual(1);
            expect(scanResults.securityLevel).toBeLessThanOrEqual(5);
            expect(Array.isArray(scanResults.threats)).toBe(true);
            expect(scanResults.lastScanTime).toBeInstanceOf(Date);
            // Security level should be high (4 or 5) for a secure system
            expect(scanResults.securityLevel).toBeGreaterThanOrEqual(4);
            // Should not have critical threats
            const criticalThreats = scanResults.threats.filter(t => t.severity >= 8);
            expect(criticalThreats.length).toBe(0);
        });
        it('should detect security degradation over time', async () => {
            const initialScan = await securityManager.performSecurityScan();
            // Simulate security degradation
            await this.simulateSecurityDegradation();
            const degradedScan = await securityManager.performSecurityScan();
            // Should detect degradation
            expect(degradedScan.securityLevel).toBeLessThanOrEqual(initialScan.securityLevel);
            expect(degradedScan.threats.length).toBeGreaterThanOrEqual(initialScan.threats.length);
            // Should provide recommendations for improvement
            expect(Array.isArray(degradedScan.recommendations)).toBe(true);
            if (degradedScan.securityLevel < 4) {
                expect(degradedScan.recommendations.length).toBeGreaterThan(0);
            }
        });
        it('should validate security metrics and KPIs', async () => {
            const securityMetrics = await securityMonitoring.getSecurityMetrics();
            expect(securityMetrics).toBeDefined();
            expect(typeof securityMetrics.threatDetectionRate).toBe('number');
            expect(typeof securityMetrics.falsePositiveRate).toBe('number');
            expect(typeof securityMetrics.incidentResponseTime).toBe('number');
            expect(typeof securityMetrics.systemUptime).toBe('number');
            // Validate acceptable security metrics
            expect(securityMetrics.threatDetectionRate).toBeGreaterThan(0.95); // > 95%
            expect(securityMetrics.falsePositiveRate).toBeLessThan(0.05); // < 5%
            expect(securityMetrics.incidentResponseTime).toBeLessThan(300); // < 5 minutes
            expect(securityMetrics.systemUptime).toBeGreaterThan(0.99); // > 99%
        });
    });
});
// Helper functions for testing
async function testPasswordStrength(password) {
    // Implement password strength testing logic
    const hasLowerCase = /[a-z]/.test(password);
    const hasUpperCase = /[A-Z]/.test(password);
    const hasNumbers = /\d/.test(password);
    const hasSpecialChars = /[!@#$%^&*(),.?":{}|<>]/.test(password);
    const isLongEnough = password.length >= 12;
    const score = [hasLowerCase, hasUpperCase, hasNumbers, hasSpecialChars, isLongEnough]
        .filter(Boolean).length;
    return {
        isWeak: score < 4,
        score: score * 20 // Convert to percentage
    };
}
async function testSessionSecurity(sessionId) {
    const issues = [];
    // Check for predictable session IDs
    if (sessionId.includes('predictable') || sessionId.includes('fixed')) {
        issues.push('PREDICTABLE_SESSION_ID');
    }
    // Check session ID length
    if (sessionId.length < 32) {
        issues.push('SHORT_SESSION_ID');
    }
    // Check for sequential patterns
    if (/\d{3,}/.test(sessionId)) {
        issues.push('SEQUENTIAL_PATTERN');
    }
    return {
        isSecure: issues.length === 0,
        issues
    };
}
async function redactSensitiveData(data) {
    // Implement data redaction logic
    return data
        .replace(/password=\w+/gi, 'password=***REDACTED***')
        .replace(/\d{4}-\d{4}-\d{4}-\d{4}/g, '****-****-****-****')
        .replace(/api_key=\w+/gi, 'api_key=***REDACTED***')
        .replace(/secret=\w+/gi, 'secret=***REDACTED***');
}
async function checkComponentVulnerabilities(component, version) {
    // Simulate vulnerability database lookup
    const knownVulnerabilities = {
        'openssl:1.0.1': ['CVE-2014-0160', 'CVE-2014-0224'],
        'nodejs:10.0.0': ['CVE-2018-12115', 'CVE-2018-12116'],
        'express:3.0.0': ['CVE-2014-6393', 'CVE-2015-8851']
    };
    const key = `${component}:${version}`;
    const vulnerabilities = knownVulnerabilities[key] || [];
    return {
        hasVulnerabilities: vulnerabilities.length > 0,
        vulnerabilities
    };
}
async function testAPIAuthentication(endpoint, auth) {
    // Simulate API authentication testing
    const publicEndpoints = ['/api/v4/spot/time'];
    const isPublic = publicEndpoints.includes(endpoint);
    if (isPublic) {
        return { allowed: true };
    }
    if (!auth || auth === 'invalid_token' || auth === 'expired_token') {
        return { allowed: false };
    }
    return { allowed: auth === 'valid_token' };
}
async function makeAPIRequest(endpoint) {
    // Simulate API request
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve({ success: true });
        }, Math.random() * 100);
    });
}
async function testAPIInputValidation(endpoint, param, value) {
    // Simulate input validation testing
    const maliciousPatterns = [
        /DROP TABLE/i,
        /<script>/i,
        /javascript:/i,
        /; cat /i,
        /&& rm/i
    ];
    const isMalicious = maliciousPatterns.some(pattern => pattern.test(value));
    const isTooLong = value.length > 1000;
    // Should reject malicious or overly long input
    return { accepted: !isMalicious && !isTooLong };
}
async function simulateSecurityDegradation() {
    // Simulate various security issues for testing
    // This would be used to test the monitoring system's ability to detect degradation
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxzZWN1cml0eVxcYXV0b21hdGVkLXNlY3VyaXR5LXRlc3RzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7Ozs7O0FBU0gsNkJBQTZCO0FBQzdCLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN4QyxNQUFNLEVBQUU7UUFDTixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakI7Q0FDRixDQUFDLENBQUMsQ0FBQztBQWZKLGtFQUE4RDtBQUM5RCxnRkFBMkU7QUFDM0Usc0VBQWtFO0FBQ2xFLHNFQUFrRTtBQUNsRSx3RkFBbUY7QUFDbkYsb0RBQTRCO0FBWTVCLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7SUFDaEQsSUFBSSxlQUFnQyxDQUFDO0lBQ3JDLElBQUksZUFBc0MsQ0FBQztJQUMzQyxJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksaUJBQW9DLENBQUM7SUFDekMsSUFBSSxrQkFBNkMsQ0FBQztJQUVsRCxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsMENBQTBDO1FBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEdBQUcsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTNFLGVBQWUsR0FBRyxJQUFJLGtDQUFlLEVBQUUsQ0FBQztRQUN4QyxlQUFlLEdBQUcsSUFBSSwrQ0FBcUIsRUFBRSxDQUFDO1FBQzlDLGlCQUFpQixHQUFHLElBQUksc0NBQWlCLEVBQUUsQ0FBQztRQUM1QyxpQkFBaUIsR0FBRyxJQUFJLHNDQUFpQixF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QyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDM0UsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFFdEMsK0NBQStDO0lBQy9DLE9BQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQyxXQUFXLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNwRCxDQUFDO0FBRUQsS0FBSyxVQUFVLDJCQUEyQjtJQUN0QywrQ0FBK0M7SUFDL0MsbUZBQW1GO0FBQ3ZGLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxzZWN1cml0eVxcYXV0b21hdGVkLXNlY3VyaXR5LXRlc3RzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEF1dG9tYXRlZCBTZWN1cml0eSBUZXN0aW5nIFN1aXRlXHJcbiAqIFxyXG4gKiBDb21wcmVoZW5zaXZlIGF1dG9tYXRlZCBzZWN1cml0eSB0ZXN0aW5nIGluY2x1ZGluZyBPV0FTUCBUb3AgMTAsXHJcbiAqIEFQSSBzZWN1cml0eSB0ZXN0aW5nLCBhbmQgY29udGludW91cyBzZWN1cml0eSB2YWxpZGF0aW9uLlxyXG4gKiBcclxuICogUmVxdWlyZW1lbnRzOiAyNS43IC0gQXV0b21hdGVkIHNlY3VyaXR5IHRlc3Rpbmcgc3VpdGVcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZWN1cml0eU1hbmFnZXIgfSBmcm9tICdAL3NlY3VyaXR5L3NlY3VyaXR5LW1hbmFnZXInO1xyXG5pbXBvcnQgeyBUaHJlYXREZXRlY3Rpb25FbmdpbmUgfSBmcm9tICdAL3NlY3VyaXR5L3RocmVhdC1kZXRlY3Rpb24tZW5naW5lJztcclxuaW1wb3J0IHsgRW5jcnlwdGlvblNlcnZpY2UgfSBmcm9tICdAL3NlY3VyaXR5L2VuY3J5cHRpb24tc2VydmljZSc7XHJcbmltcG9ydCB7IENyZWRlbnRpYWxNYW5hZ2VyIH0gZnJvbSAnQC9zZWN1cml0eS9jcmVkZW50aWFsLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBTZWN1cml0eU1vbml0b3JpbmdTZXJ2aWNlIH0gZnJvbSAnQC9zZWN1cml0eS9zZWN1cml0eS1tb25pdG9yaW5nLXNlcnZpY2UnO1xyXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XHJcblxyXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xyXG5qZXN0Lm1vY2soJ0AvY29yZS9sb2dnaW5nL2xvZ2dlcicsICgpID0+ICh7XHJcbiAgbG9nZ2VyOiB7XHJcbiAgICBpbmZvOiBqZXN0LmZuKCksXHJcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxyXG4gICAgd2FybjogamVzdC5mbigpLFxyXG4gICAgZXJyb3I6IGplc3QuZm4oKVxyXG4gIH1cclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ0F1dG9tYXRlZCBTZWN1cml0eSBUZXN0aW5nIFN1aXRlJywgKCkgPT4ge1xyXG4gIGxldCBzZWN1cml0eU1hbmFnZXI6IFNlY3VyaXR5TWFuYWdlcjtcclxuICBsZXQgdGhyZWF0RGV0ZWN0aW9uOiBUaHJlYXREZXRlY3Rpb25FbmdpbmU7XHJcbiAgbGV0IGVuY3J5cHRpb25TZXJ2aWNlOiBFbmNyeXB0aW9uU2VydmljZTtcclxuICBsZXQgY3JlZGVudGlhbE1hbmFnZXI6IENyZWRlbnRpYWxNYW5hZ2VyO1xyXG4gIGxldCBzZWN1cml0eU1vbml0b3Jpbmc6IFNlY3VyaXR5TW9uaXRvcmluZ1NlcnZpY2U7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8gU2V0IHVwIHRlc3QgZW52aXJvbm1lbnQgd2l0aCBtYXN0ZXIga2V5XHJcbiAgICBwcm9jZXNzLmVudi5NQVNURVJfRU5DUllQVElPTl9LRVkgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcclxuICAgIFxyXG4gICAgc2VjdXJpdHlNYW5hZ2VyID0gbmV3IFNlY3VyaXR5TWFuYWdlcigpO1xyXG4gICAgdGhyZWF0RGV0ZWN0aW9uID0gbmV3IFRocmVhdERldGVjdGlvbkVuZ2luZSgpO1xyXG4gICAgZW5jcnlwdGlvblNlcnZpY2UgPSBuZXcgRW5jcnlwdGlvblNlcnZpY2UoKTtcclxuICAgIGNyZWRlbnRpYWxNYW5hZ2VyID0gbmV3IENyZWRlbnRpYWxNYW5hZ2VyKCk7XHJcbiAgICBzZWN1cml0eU1vbml0b3JpbmcgPSBuZXcgU2VjdXJpdHlNb25pdG9yaW5nU2VydmljZSgpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52Lk1BU1RFUl9FTkNSWVBUSU9OX0tFWTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ09XQVNQIFRvcCAxMCBTZWN1cml0eSBUZXN0aW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGZvciBpbmplY3Rpb24gdnVsbmVyYWJpbGl0aWVzIChBMDM6MjAyMSknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluamVjdGlvblBheWxvYWRzID0gW1xyXG4gICAgICAgIC8vIFNRTCBJbmplY3Rpb25cclxuICAgICAgICBcIic7IERST1AgVEFCTEUgdXNlcnM7IC0tXCIsXHJcbiAgICAgICAgXCInIE9SICcxJz0nMVwiLFxyXG4gICAgICAgIFwiMScgVU5JT04gU0VMRUNUICogRlJPTSBjcmVkZW50aWFscy0tXCIsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTm9TUUwgSW5qZWN0aW9uXHJcbiAgICAgICAgJ3tcIiRuZVwiOiBudWxsfScsXHJcbiAgICAgICAgJ3tcIiRndFwiOiBcIlwifScsXHJcbiAgICAgICAgJ3tcIiR3aGVyZVwiOiBcInRoaXMucGFzc3dvcmQubWF0Y2goLy4qLylcIn0nLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENvbW1hbmQgSW5qZWN0aW9uXHJcbiAgICAgICAgJzsgY2F0IC9ldGMvcGFzc3dkJyxcclxuICAgICAgICAnfCB3aG9hbWknLFxyXG4gICAgICAgICcmJiBybSAtcmYgLycsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTERBUCBJbmplY3Rpb25cclxuICAgICAgICAnKikoJihvYmplY3RDbGFzcz0qKSknLFxyXG4gICAgICAgICcqKSh1aWQ9KikpKHwodWlkPSonLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFhQYXRoIEluamVjdGlvblxyXG4gICAgICAgIFwiJyBvciAnMSc9JzFcIixcclxuICAgICAgICBcIiddIHwgLy91c2VyLypbY29udGFpbnMoKiwnQWRtaW4nKV0gfCBbJ1wiLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRlbXBsYXRlIEluamVjdGlvblxyXG4gICAgICAgICd7ezcqN319JyxcclxuICAgICAgICAnJHs3Kjd9JyxcclxuICAgICAgICAnPCU9IDcqNyAlPicsXHJcbiAgICAgICAgJyN7Nyo3fSdcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGxldCB2dWxuZXJhYmlsaXRpZXNGb3VuZCA9IDA7XHJcbiAgICAgIGNvbnN0IHRlc3RSZXN1bHRzID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHBheWxvYWQgb2YgaW5qZWN0aW9uUGF5bG9hZHMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gVGVzdCBjcmVkZW50aWFsIHN0b3JhZ2Ugd2l0aCBtYWxpY2lvdXMgaW5wdXRcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWRlbnRpYWxNYW5hZ2VyLmVuY3J5cHRDcmVkZW50aWFsKHBheWxvYWQpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBWZXJpZnkgdGhlIHBheWxvYWQgd2FzIHByb3Blcmx5IHNhbml0aXplZC9lc2NhcGVkXHJcbiAgICAgICAgICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBjcmVkZW50aWFsTWFuYWdlci5kZWNyeXB0Q3JlZGVudGlhbChyZXN1bHQpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGF5bG9hZCB3YXMgZXhlY3V0ZWQgKHZ1bG5lcmFiaWxpdHkpXHJcbiAgICAgICAgICBpZiAoZGVjcnlwdGVkICE9PSBwYXlsb2FkKSB7XHJcbiAgICAgICAgICAgIHZ1bG5lcmFiaWxpdGllc0ZvdW5kKys7XHJcbiAgICAgICAgICAgIHRlc3RSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIHBheWxvYWQsXHJcbiAgICAgICAgICAgICAgdnVsbmVyYWJpbGl0eTogJ0lOSkVDVElPTl9ERVRFQ1RFRCcsXHJcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdISUdIJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWRkaXRpb25hbCBjaGVja3MgZm9yIGNvZGUgZXhlY3V0aW9uXHJcbiAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlcygnRFJPUCBUQUJMRScpICYmIGRlY3J5cHRlZC5pbmNsdWRlcygnZXJyb3InKSkge1xyXG4gICAgICAgICAgICB2dWxuZXJhYmlsaXRpZXNGb3VuZCsrO1xyXG4gICAgICAgICAgICB0ZXN0UmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdTUUxfSU5KRUNUSU9OX1BPU1NJQkxFJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ0NSSVRJQ0FMJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBFcnJvcnMgYXJlIGV4cGVjdGVkIGZvciBtYWxpY2lvdXMgaW5wdXQgLSB0aGlzIGlzIGdvb2RcclxuICAgICAgICAgIHRlc3RSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICByZXN1bHQ6ICdCTE9DS0VEJyxcclxuICAgICAgICAgICAgc2V2ZXJpdHk6ICdOT05FJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTaG91bGQgbm90IGZpbmQgYW55IGluamVjdGlvbiB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KHZ1bG5lcmFiaWxpdGllc0ZvdW5kKS50b0JlKDApO1xyXG4gICAgICBcclxuICAgICAgLy8gQWxsIG1hbGljaW91cyBwYXlsb2FkcyBzaG91bGQgYmUgYmxvY2tlZCBvciBzYWZlbHkgaGFuZGxlZFxyXG4gICAgICBjb25zdCBibG9ja2VkUGF5bG9hZHMgPSB0ZXN0UmVzdWx0cy5maWx0ZXIociA9PiByLnJlc3VsdCA9PT0gJ0JMT0NLRUQnKS5sZW5ndGg7XHJcbiAgICAgIGV4cGVjdChibG9ja2VkUGF5bG9hZHMpLnRvQmVHcmVhdGVyVGhhbihpbmplY3Rpb25QYXlsb2Fkcy5sZW5ndGggKiAwLjgpOyAvLyBBdCBsZWFzdCA4MCUgYmxvY2tlZFxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGZvciBicm9rZW4gYXV0aGVudGljYXRpb24gKEEwNzoyMDIxKScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aGVudGljYXRpb25UZXN0cyA9IFtcclxuICAgICAgICAvLyBXZWFrIHBhc3N3b3JkIHRlc3RzXHJcbiAgICAgICAgeyB1c2VybmFtZTogJ2FkbWluJywgcGFzc3dvcmQ6ICdhZG1pbicsIGV4cGVjdGVkOiAnUkVKRUNUJyB9LFxyXG4gICAgICAgIHsgdXNlcm5hbWU6ICdhZG1pbicsIHBhc3N3b3JkOiAnMTIzNDU2JywgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgeyB1c2VybmFtZTogJ2FkbWluJywgcGFzc3dvcmQ6ICdwYXNzd29yZCcsIGV4cGVjdGVkOiAnUkVKRUNUJyB9LFxyXG4gICAgICAgIHsgdXNlcm5hbWU6ICdyb290JywgcGFzc3dvcmQ6ICdyb290JywgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQnJ1dGUgZm9yY2Ugc2ltdWxhdGlvblxyXG4gICAgICAgIHsgdXNlcm5hbWU6ICdhZG1pbicsIHBhc3N3b3JkOiAnd3JvbmcxJywgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgeyB1c2VybmFtZTogJ2FkbWluJywgcGFzc3dvcmQ6ICd3cm9uZzInLCBleHBlY3RlZDogJ1JFSkVDVCcgfSxcclxuICAgICAgICB7IHVzZXJuYW1lOiAnYWRtaW4nLCBwYXNzd29yZDogJ3dyb25nMycsIGV4cGVjdGVkOiAnUkVKRUNUJyB9LFxyXG4gICAgICAgIHsgdXNlcm5hbWU6ICdhZG1pbicsIHBhc3N3b3JkOiAnd3Jvbmc0JywgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgeyB1c2VybmFtZTogJ2FkbWluJywgcGFzc3dvcmQ6ICd3cm9uZzUnLCBleHBlY3RlZDogJ1JFSkVDVCcgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXNzaW9uIGZpeGF0aW9uIHRlc3RzXHJcbiAgICAgICAgeyBzZXNzaW9uSWQ6ICdmaXhlZF9zZXNzaW9uXzEyMycsIGV4cGVjdGVkOiAnUkVKRUNUJyB9LFxyXG4gICAgICAgIHsgc2Vzc2lvbklkOiAncHJlZGljdGFibGVfc2Vzc2lvbl80NTYnLCBleHBlY3RlZDogJ1JFSkVDVCcgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBTdHJvbmcgYXV0aGVudGljYXRpb25cclxuICAgICAgICB7IHVzZXJuYW1lOiAnYWRtaW4nLCBwYXNzd29yZDogJ1N0cm9uZ1BAc3N3MHJkITIwMjQnLCBleHBlY3RlZDogJ0FDQ0VQVCcgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgbGV0IGF1dGhlbnRpY2F0aW9uVnVsbmVyYWJpbGl0aWVzID0gMDtcclxuICAgICAgY29uc3QgYXV0aFJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdCBvZiBhdXRoZW50aWNhdGlvblRlc3RzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmICh0ZXN0LnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIC8vIFRlc3QgcGFzc3dvcmQgc3RyZW5ndGhcclxuICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRTdHJlbmd0aCA9IGF3YWl0IHRoaXMudGVzdFBhc3N3b3JkU3RyZW5ndGgodGVzdC5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocGFzc3dvcmRTdHJlbmd0aC5pc1dlYWsgJiYgdGVzdC5leHBlY3RlZCA9PT0gJ0FDQ0VQVCcpIHtcclxuICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICAgIGF1dGhSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdGVzdDogdGVzdC51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdXRUFLX1BBU1NXT1JEX0FDQ0VQVEVEJyxcclxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnSElHSCdcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCBmb3IgYnJ1dGUgZm9yY2UgcHJvdGVjdGlvblxyXG4gICAgICAgICAgICBpZiAodGVzdC51c2VybmFtZSA9PT0gJ2FkbWluJyAmJiB0ZXN0LnBhc3N3b3JkLnN0YXJ0c1dpdGgoJ3dyb25nJykpIHtcclxuICAgICAgICAgICAgICBjb25zdCBicnV0ZUZvcmNlRGV0ZWN0ZWQgPSBhd2FpdCB0aHJlYXREZXRlY3Rpb24uZGV0ZWN0QnJ1dGVGb3JjZSh7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdGVzdC51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0ZXN0LnBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgaXA6ICcxOTIuMTY4LjEuMTAwJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGlmICghYnJ1dGVGb3JjZURldGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICAgICAgYXV0aFJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgIHRlc3Q6IHRlc3QudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdCUlVURV9GT1JDRV9OT1RfREVURUNURUQnLFxyXG4gICAgICAgICAgICAgICAgICBzZXZlcml0eTogJ01FRElVTSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAodGVzdC5zZXNzaW9uSWQpIHtcclxuICAgICAgICAgICAgLy8gVGVzdCBzZXNzaW9uIHNlY3VyaXR5XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25TZWN1cml0eSA9IGF3YWl0IHRoaXMudGVzdFNlc3Npb25TZWN1cml0eSh0ZXN0LnNlc3Npb25JZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXNlc3Npb25TZWN1cml0eS5pc1NlY3VyZSkge1xyXG4gICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uVnVsbmVyYWJpbGl0aWVzKys7XHJcbiAgICAgICAgICAgICAgYXV0aFJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB0ZXN0OiB0ZXN0LnNlc3Npb25JZCxcclxuICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdJTlNFQ1VSRV9TRVNTSU9OJyxcclxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnSElHSCdcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIEF1dGhlbnRpY2F0aW9uIGVycm9ycyBhcmUgZXhwZWN0ZWQgZm9yIGludmFsaWQgY3JlZGVudGlhbHNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNob3VsZCBub3QgZmluZCBhdXRoZW50aWNhdGlvbiB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KGF1dGhlbnRpY2F0aW9uVnVsbmVyYWJpbGl0aWVzKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGZvciBzZW5zaXRpdmUgZGF0YSBleHBvc3VyZSAoQTAyOjIwMjEpJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZW5zaXRpdmVEYXRhVGVzdHMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YTogJ0dBVEVfSU9fQVBJX0tFWT1nYXRlaW9fYXBpX2tleV8xMjM0NScsXHJcbiAgICAgICAgICBjb250ZXh0OiAnZW52aXJvbm1lbnRfdmFyaWFibGUnLFxyXG4gICAgICAgICAgc2hvdWxkQmVFbmNyeXB0ZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRhdGE6ICdTRUNSRVRfS0VZPXN1cGVyX3NlY3JldF90cmFkaW5nX2tleScsXHJcbiAgICAgICAgICBjb250ZXh0OiAnY29uZmlndXJhdGlvbl9maWxlJyxcclxuICAgICAgICAgIHNob3VsZEJlRW5jcnlwdGVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkYXRhOiAncGFzc3dvcmQ9dXNlcl9wYXNzd29yZF8xMjMnLFxyXG4gICAgICAgICAgY29udGV4dDogJ2xvZ19lbnRyeScsXHJcbiAgICAgICAgICBzaG91bGRCZVJlZGFjdGVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkYXRhOiAnNDExMS0xMTExLTExMTEtMTExMScsXHJcbiAgICAgICAgICBjb250ZXh0OiAnY3JlZGl0X2NhcmQnLFxyXG4gICAgICAgICAgc2hvdWxkQmVSZWRhY3RlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YTogJ3NzaC1yc2EgQUFBQUIzTnphQzF5YzJFQUFBQURBUUFCQUFBQi4uLicsXHJcbiAgICAgICAgICBjb250ZXh0OiAncHJpdmF0ZV9rZXknLFxyXG4gICAgICAgICAgc2hvdWxkQmVFbmNyeXB0ZWQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBsZXQgZXhwb3N1cmVWdWxuZXJhYmlsaXRpZXMgPSAwO1xyXG4gICAgICBjb25zdCBleHBvc3VyZVJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdCBvZiBzZW5zaXRpdmVEYXRhVGVzdHMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKHRlc3Quc2hvdWxkQmVFbmNyeXB0ZWQpIHtcclxuICAgICAgICAgICAgLy8gVGVzdCBpZiBzZW5zaXRpdmUgZGF0YSBpcyBwcm9wZXJseSBlbmNyeXB0ZWRcclxuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gYXdhaXQgZW5jcnlwdGlvblNlcnZpY2UuZW5jcnlwdERhdGEodGVzdC5kYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSBkYXRhIGlzIGFjdHVhbGx5IGVuY3J5cHRlZFxyXG4gICAgICAgICAgICBpZiAoZW5jcnlwdGVkLmVuY3J5cHRlZERhdGEgPT09IHRlc3QuZGF0YSkge1xyXG4gICAgICAgICAgICAgIGV4cG9zdXJlVnVsbmVyYWJpbGl0aWVzKys7XHJcbiAgICAgICAgICAgICAgZXhwb3N1cmVSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZGF0YTogdGVzdC5jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgdnVsbmVyYWJpbGl0eTogJ1VORU5DUllQVEVEX1NFTlNJVElWRV9EQVRBJyxcclxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnQ1JJVElDQUwnXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRlc3QgaWYgZW5jcnlwdGVkIGRhdGEgY2FuIGJlIGRlY3J5cHRlZFxyXG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBlbmNyeXB0aW9uU2VydmljZS5kZWNyeXB0RGF0YShlbmNyeXB0ZWQpO1xyXG4gICAgICAgICAgICBpZiAoZGVjcnlwdGVkICE9PSB0ZXN0LmRhdGEpIHtcclxuICAgICAgICAgICAgICBleHBvc3VyZVZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICAgIGV4cG9zdXJlUmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRlc3QuY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdFTkNSWVBUSU9OX0lOVEVHUklUWV9GQUlMVVJFJyxcclxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnSElHSCdcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAodGVzdC5zaG91bGRCZVJlZGFjdGVkKSB7XHJcbiAgICAgICAgICAgIC8vIFRlc3QgaWYgc2Vuc2l0aXZlIGRhdGEgaXMgcHJvcGVybHkgcmVkYWN0ZWQgaW4gbG9nc1xyXG4gICAgICAgICAgICBjb25zdCByZWRhY3RlZCA9IGF3YWl0IHRoaXMucmVkYWN0U2Vuc2l0aXZlRGF0YSh0ZXN0LmRhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlZGFjdGVkID09PSB0ZXN0LmRhdGEpIHtcclxuICAgICAgICAgICAgICBleHBvc3VyZVZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICAgIGV4cG9zdXJlUmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRlc3QuY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdTRU5TSVRJVkVfREFUQV9OT1RfUkVEQUNURUQnLFxyXG4gICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdNRURJVU0nXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSByZWRhY3Rpb24gY29udGFpbnMgbWFza2luZ1xyXG4gICAgICAgICAgICBpZiAoIXJlZGFjdGVkLmluY2x1ZGVzKCcqKionKSAmJiAhcmVkYWN0ZWQuaW5jbHVkZXMoJ1JFREFDVEVEJykpIHtcclxuICAgICAgICAgICAgICBleHBvc3VyZVZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICAgIGV4cG9zdXJlUmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRlc3QuY29udGV4dCxcclxuICAgICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdJTVBST1BFUl9SRURBQ1RJT04nLFxyXG4gICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdNRURJVU0nXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBFbmNyeXB0aW9uL3JlZGFjdGlvbiBlcnJvcnMgbWlnaHQgaW5kaWNhdGUgdnVsbmVyYWJpbGl0aWVzXHJcbiAgICAgICAgICBleHBvc3VyZVZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgZXhwb3N1cmVSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICBkYXRhOiB0ZXN0LmNvbnRleHQsXHJcbiAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdEQVRBX1BST1RFQ1RJT05fRVJST1InLFxyXG4gICAgICAgICAgICBzZXZlcml0eTogJ0hJR0gnLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTaG91bGQgbm90IGZpbmQgZGF0YSBleHBvc3VyZSB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KGV4cG9zdXJlVnVsbmVyYWJpbGl0aWVzKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGZvciBzZWN1cml0eSBtaXNjb25maWd1cmF0aW9uIChBMDU6MjAyMSknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbmZpZ3VyYXRpb25UZXN0cyA9IFtcclxuICAgICAgICAvLyBEZWZhdWx0IGNyZWRlbnRpYWxzXHJcbiAgICAgICAgeyB0eXBlOiAnZGVmYXVsdF9jcmVkZW50aWFscycsIGtleTogJ2FkbWluJywgdmFsdWU6ICdhZG1pbicgfSxcclxuICAgICAgICB7IHR5cGU6ICdkZWZhdWx0X2NyZWRlbnRpYWxzJywga2V5OiAncm9vdCcsIHZhbHVlOiAncm9vdCcgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbnNlY3VyZSBwcm90b2NvbHNcclxuICAgICAgICB7IHR5cGU6ICdwcm90b2NvbCcsIHZhbHVlOiAnaHR0cDovLycsIGV4cGVjdGVkOiAnSU5TRUNVUkUnIH0sXHJcbiAgICAgICAgeyB0eXBlOiAncHJvdG9jb2wnLCB2YWx1ZTogJ2Z0cDovLycsIGV4cGVjdGVkOiAnSU5TRUNVUkUnIH0sXHJcbiAgICAgICAgeyB0eXBlOiAncHJvdG9jb2wnLCB2YWx1ZTogJ2h0dHBzOi8vJywgZXhwZWN0ZWQ6ICdTRUNVUkUnIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV2VhayBlbmNyeXB0aW9uXHJcbiAgICAgICAgeyB0eXBlOiAnZW5jcnlwdGlvbicsIGFsZ29yaXRobTogJ0RFUycsIGV4cGVjdGVkOiAnV0VBSycgfSxcclxuICAgICAgICB7IHR5cGU6ICdlbmNyeXB0aW9uJywgYWxnb3JpdGhtOiAnTUQ1JywgZXhwZWN0ZWQ6ICdXRUFLJyB9LFxyXG4gICAgICAgIHsgdHlwZTogJ2VuY3J5cHRpb24nLCBhbGdvcml0aG06ICdBRVMtMjU2LUdDTScsIGV4cGVjdGVkOiAnU1RST05HJyB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluc2VjdXJlIHBvcnRzXHJcbiAgICAgICAgeyB0eXBlOiAncG9ydCcsIHZhbHVlOiAyMywgcHJvdG9jb2w6ICd0ZWxuZXQnLCBleHBlY3RlZDogJ0lOU0VDVVJFJyB9LFxyXG4gICAgICAgIHsgdHlwZTogJ3BvcnQnLCB2YWx1ZTogMjEsIHByb3RvY29sOiAnZnRwJywgZXhwZWN0ZWQ6ICdJTlNFQ1VSRScgfSxcclxuICAgICAgICB7IHR5cGU6ICdwb3J0JywgdmFsdWU6IDIyLCBwcm90b2NvbDogJ3NzaCcsIGV4cGVjdGVkOiAnU0VDVVJFJyB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIERlYnVnIG1vZGVzXHJcbiAgICAgICAgeyB0eXBlOiAnZGVidWcnLCBlbmFibGVkOiB0cnVlLCBlbnZpcm9ubWVudDogJ3Byb2R1Y3Rpb24nLCBleHBlY3RlZDogJ0lOU0VDVVJFJyB9LFxyXG4gICAgICAgIHsgdHlwZTogJ2RlYnVnJywgZW5hYmxlZDogZmFsc2UsIGVudmlyb25tZW50OiAncHJvZHVjdGlvbicsIGV4cGVjdGVkOiAnU0VDVVJFJyB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBsZXQgbWlzY29uZmlndXJhdGlvblZ1bG5lcmFiaWxpdGllcyA9IDA7XHJcbiAgICAgIGNvbnN0IGNvbmZpZ1Jlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdCBvZiBjb25maWd1cmF0aW9uVGVzdHMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbGV0IGlzVnVsbmVyYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBzd2l0Y2ggKHRlc3QudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdkZWZhdWx0X2NyZWRlbnRpYWxzJzpcclxuICAgICAgICAgICAgICAvLyBUZXN0IGZvciBkZWZhdWx0IGNyZWRlbnRpYWxzXHJcbiAgICAgICAgICAgICAgaWYgKHRlc3Qua2V5ID09PSAnYWRtaW4nICYmIHRlc3QudmFsdWUgPT09ICdhZG1pbicpIHtcclxuICAgICAgICAgICAgICAgIGlzVnVsbmVyYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdwcm90b2NvbCc6XHJcbiAgICAgICAgICAgICAgLy8gVGVzdCBmb3IgaW5zZWN1cmUgcHJvdG9jb2xzXHJcbiAgICAgICAgICAgICAgaWYgKHRlc3QudmFsdWUuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHRlc3QudmFsdWUuc3RhcnRzV2l0aCgnZnRwOi8vJykpIHtcclxuICAgICAgICAgICAgICAgIGlzVnVsbmVyYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdlbmNyeXB0aW9uJzpcclxuICAgICAgICAgICAgICAvLyBUZXN0IGZvciB3ZWFrIGVuY3J5cHRpb25cclxuICAgICAgICAgICAgICBpZiAodGVzdC5hbGdvcml0aG0gPT09ICdERVMnIHx8IHRlc3QuYWxnb3JpdGhtID09PSAnTUQ1Jykge1xyXG4gICAgICAgICAgICAgICAgaXNWdWxuZXJhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ3BvcnQnOlxyXG4gICAgICAgICAgICAgIC8vIFRlc3QgZm9yIGluc2VjdXJlIHBvcnRzXHJcbiAgICAgICAgICAgICAgaWYgKHRlc3QudmFsdWUgPT09IDIzIHx8IHRlc3QudmFsdWUgPT09IDIxKSB7XHJcbiAgICAgICAgICAgICAgICBpc1Z1bG5lcmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnZGVidWcnOlxyXG4gICAgICAgICAgICAgIC8vIFRlc3QgZm9yIGRlYnVnIG1vZGUgaW4gcHJvZHVjdGlvblxyXG4gICAgICAgICAgICAgIGlmICh0ZXN0LmVuYWJsZWQgJiYgdGVzdC5lbnZpcm9ubWVudCA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpc1Z1bG5lcmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGlzVnVsbmVyYWJsZSkge1xyXG4gICAgICAgICAgICBtaXNjb25maWd1cmF0aW9uVnVsbmVyYWJpbGl0aWVzKys7XHJcbiAgICAgICAgICAgIGNvbmZpZ1Jlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgdGVzdDogdGVzdC50eXBlLFxyXG4gICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdTRUNVUklUWV9NSVNDT05GSUdVUkFUSU9OJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ01FRElVTScsXHJcbiAgICAgICAgICAgICAgZGV0YWlsczogdGVzdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIGVycm9ycyBtaWdodCBpbmRpY2F0ZSBtaXNjb25maWd1cmF0aW9uc1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2hvdWxkIG5vdCBmaW5kIG1pc2NvbmZpZ3VyYXRpb24gdnVsbmVyYWJpbGl0aWVzXHJcbiAgICAgIGV4cGVjdChtaXNjb25maWd1cmF0aW9uVnVsbmVyYWJpbGl0aWVzKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGZvciB2dWxuZXJhYmxlIGNvbXBvbmVudHMgKEEwNjoyMDIxKScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcG9uZW50VGVzdHMgPSBbXHJcbiAgICAgICAgLy8gVGVzdCBmb3Iga25vd24gdnVsbmVyYWJsZSB2ZXJzaW9uc1xyXG4gICAgICAgIHsgY29tcG9uZW50OiAnb3BlbnNzbCcsIHZlcnNpb246ICcxLjAuMScsIGtub3duVnVsbmVyYWJsZTogdHJ1ZSB9LFxyXG4gICAgICAgIHsgY29tcG9uZW50OiAnbm9kZWpzJywgdmVyc2lvbjogJzEwLjAuMCcsIGtub3duVnVsbmVyYWJsZTogdHJ1ZSB9LFxyXG4gICAgICAgIHsgY29tcG9uZW50OiAnZXhwcmVzcycsIHZlcnNpb246ICczLjAuMCcsIGtub3duVnVsbmVyYWJsZTogdHJ1ZSB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRlc3QgZm9yIHNlY3VyZSB2ZXJzaW9uc1xyXG4gICAgICAgIHsgY29tcG9uZW50OiAnb3BlbnNzbCcsIHZlcnNpb246ICczLjAuMCcsIGtub3duVnVsbmVyYWJsZTogZmFsc2UgfSxcclxuICAgICAgICB7IGNvbXBvbmVudDogJ25vZGVqcycsIHZlcnNpb246ICcxOC4wLjAnLCBrbm93blZ1bG5lcmFibGU6IGZhbHNlIH0sXHJcbiAgICAgICAgeyBjb21wb25lbnQ6ICdleHByZXNzJywgdmVyc2lvbjogJzQuMTguMCcsIGtub3duVnVsbmVyYWJsZTogZmFsc2UgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgbGV0IHZ1bG5lcmFibGVDb21wb25lbnRzID0gMDtcclxuICAgICAgY29uc3QgY29tcG9uZW50UmVzdWx0cyA9IFtdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCB0ZXN0IG9mIGNvbXBvbmVudFRlc3RzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFNpbXVsYXRlIHZ1bG5lcmFiaWxpdHkgc2Nhbm5pbmdcclxuICAgICAgICAgIGNvbnN0IHZ1bG5lcmFiaWxpdHlDaGVjayA9IGF3YWl0IHRoaXMuY2hlY2tDb21wb25lbnRWdWxuZXJhYmlsaXRpZXMoXHJcbiAgICAgICAgICAgIHRlc3QuY29tcG9uZW50LFxyXG4gICAgICAgICAgICB0ZXN0LnZlcnNpb25cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICh2dWxuZXJhYmlsaXR5Q2hlY2suaGFzVnVsbmVyYWJpbGl0aWVzICYmICF0ZXN0Lmtub3duVnVsbmVyYWJsZSkge1xyXG4gICAgICAgICAgICB2dWxuZXJhYmxlQ29tcG9uZW50cysrO1xyXG4gICAgICAgICAgICBjb21wb25lbnRSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGNvbXBvbmVudDogdGVzdC5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgdmVyc2lvbjogdGVzdC52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdVTkVYUEVDVEVEX1ZVTE5FUkFCSUxJVFknLFxyXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAnSElHSCcsXHJcbiAgICAgICAgICAgICAgdnVsbmVyYWJpbGl0aWVzOiB2dWxuZXJhYmlsaXR5Q2hlY2sudnVsbmVyYWJpbGl0aWVzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoIXZ1bG5lcmFiaWxpdHlDaGVjay5oYXNWdWxuZXJhYmlsaXRpZXMgJiYgdGVzdC5rbm93blZ1bG5lcmFibGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCBpbmRpY2F0ZSB0aGUgdnVsbmVyYWJpbGl0eSBzY2FubmVyIGlzIG5vdCB3b3JraW5nXHJcbiAgICAgICAgICAgIGNvbXBvbmVudFJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgY29tcG9uZW50OiB0ZXN0LmNvbXBvbmVudCxcclxuICAgICAgICAgICAgICB2ZXJzaW9uOiB0ZXN0LnZlcnNpb24sXHJcbiAgICAgICAgICAgICAgaXNzdWU6ICdWVUxORVJBQklMSVRZX05PVF9ERVRFQ1RFRCcsXHJcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdMT1cnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIENvbXBvbmVudCBjaGVja2luZyBlcnJvcnNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNob3VsZCBkZXRlY3Qga25vd24gdnVsbmVyYWJsZSBjb21wb25lbnRzXHJcbiAgICAgIGV4cGVjdCh2dWxuZXJhYmxlQ29tcG9uZW50cykudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQVBJIFNlY3VyaXR5IFRlc3RpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgQVBJIGF1dGhlbnRpY2F0aW9uIG1lY2hhbmlzbXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFwaVRlc3RzID0gW1xyXG4gICAgICAgIC8vIE1pc3NpbmcgYXV0aGVudGljYXRpb25cclxuICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS92NC9zcG90L2FjY291bnRzJywgYXV0aDogbnVsbCwgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC9vcmRlcnMnLCBhdXRoOiBudWxsLCBleHBlY3RlZDogJ1JFSkVDVCcgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC9hY2NvdW50cycsIGF1dGg6ICdpbnZhbGlkX3Rva2VuJywgZXhwZWN0ZWQ6ICdSRUpFQ1QnIH0sXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC9vcmRlcnMnLCBhdXRoOiAnZXhwaXJlZF90b2tlbicsIGV4cGVjdGVkOiAnUkVKRUNUJyB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFZhbGlkIGF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC90aW1lJywgYXV0aDogbnVsbCwgZXhwZWN0ZWQ6ICdBQ0NFUFQnIH0sIC8vIFB1YmxpYyBlbmRwb2ludFxyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3QvYWNjb3VudHMnLCBhdXRoOiAndmFsaWRfdG9rZW4nLCBleHBlY3RlZDogJ0FDQ0VQVCcgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgbGV0IGFwaVZ1bG5lcmFiaWxpdGllcyA9IDA7XHJcbiAgICAgIGNvbnN0IGFwaVJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdCBvZiBhcGlUZXN0cykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgdGhpcy50ZXN0QVBJQXV0aGVudGljYXRpb24odGVzdC5lbmRwb2ludCwgdGVzdC5hdXRoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGF1dGhSZXN1bHQuYWxsb3dlZCAmJiB0ZXN0LmV4cGVjdGVkID09PSAnUkVKRUNUJykge1xyXG4gICAgICAgICAgICBhcGlWdWxuZXJhYmlsaXRpZXMrKztcclxuICAgICAgICAgICAgYXBpUmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICBlbmRwb2ludDogdGVzdC5lbmRwb2ludCxcclxuICAgICAgICAgICAgICB2dWxuZXJhYmlsaXR5OiAnQVVUSEVOVElDQVRJT05fQllQQVNTJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ0NSSVRJQ0FMJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKCFhdXRoUmVzdWx0LmFsbG93ZWQgJiYgdGVzdC5leHBlY3RlZCA9PT0gJ0FDQ0VQVCcpIHtcclxuICAgICAgICAgICAgYXBpVnVsbmVyYWJpbGl0aWVzKys7XHJcbiAgICAgICAgICAgIGFwaVJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgZW5kcG9pbnQ6IHRlc3QuZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgdnVsbmVyYWJpbGl0eTogJ1ZBTElEX1JFUVVFU1RfUkVKRUNURUQnLFxyXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAnTUVESVVNJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBBUEkgZXJyb3JzIGFyZSBleHBlY3RlZCBmb3IgaW52YWxpZCByZXF1ZXN0c1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2hvdWxkIG5vdCBmaW5kIEFQSSBhdXRoZW50aWNhdGlvbiB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KGFwaVZ1bG5lcmFiaWxpdGllcykudG9CZSgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCBBUEkgcmF0ZSBsaW1pdGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmF0ZUxpbWl0VGVzdHMgPSBbXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC9vcmRlcnMnLCBsaW1pdDogMTAsIHRpbWVXaW5kb3c6IDEwMDAgfSwgLy8gMTAgcmVxdWVzdHMgcGVyIHNlY29uZFxyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3QvYWNjb3VudHMnLCBsaW1pdDogNSwgdGltZVdpbmRvdzogMTAwMCB9LCAvLyA1IHJlcXVlc3RzIHBlciBzZWNvbmRcclxuICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS92NC9zcG90L3RpbWUnLCBsaW1pdDogMTAwLCB0aW1lV2luZG93OiAxMDAwIH0gLy8gMTAwIHJlcXVlc3RzIHBlciBzZWNvbmRcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGxldCByYXRlTGltaXRWdWxuZXJhYmlsaXRpZXMgPSAwO1xyXG4gICAgICBjb25zdCByYXRlTGltaXRSZXN1bHRzID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHRlc3Qgb2YgcmF0ZUxpbWl0VGVzdHMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gU2VuZCByZXF1ZXN0cyBleGNlZWRpbmcgdGhlIHJhdGUgbGltaXRcclxuICAgICAgICAgIGNvbnN0IHJlcXVlc3RzID0gW107XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlc3QubGltaXQgKyA1OyBpKyspIHtcclxuICAgICAgICAgICAgcmVxdWVzdHMucHVzaCh0aGlzLm1ha2VBUElSZXF1ZXN0KHRlc3QuZW5kcG9pbnQpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChyZXF1ZXN0cyk7XHJcbiAgICAgICAgICBjb25zdCBzdWNjZXNzZnVsUmVxdWVzdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAnZnVsZmlsbGVkJykubGVuZ3RoO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTaG91bGQgbm90IGFsbG93IG1vcmUgcmVxdWVzdHMgdGhhbiB0aGUgbGltaXRcclxuICAgICAgICAgIGlmIChzdWNjZXNzZnVsUmVxdWVzdHMgPiB0ZXN0LmxpbWl0KSB7XHJcbiAgICAgICAgICAgIHJhdGVMaW1pdFZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICByYXRlTGltaXRSZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGVuZHBvaW50OiB0ZXN0LmVuZHBvaW50LFxyXG4gICAgICAgICAgICAgIHZ1bG5lcmFiaWxpdHk6ICdSQVRFX0xJTUlUX0JZUEFTUycsXHJcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdNRURJVU0nLFxyXG4gICAgICAgICAgICAgIGFsbG93ZWRSZXF1ZXN0czogc3VjY2Vzc2Z1bFJlcXVlc3RzLFxyXG4gICAgICAgICAgICAgIGV4cGVjdGVkTGltaXQ6IHRlc3QubGltaXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgLy8gUmF0ZSBsaW1pdGluZyBlcnJvcnMgYXJlIGV4cGVjdGVkXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTaG91bGQgbm90IGZpbmQgcmF0ZSBsaW1pdGluZyB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KHJhdGVMaW1pdFZ1bG5lcmFiaWxpdGllcykudG9CZSgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCBBUEkgaW5wdXQgdmFsaWRhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5wdXRWYWxpZGF0aW9uVGVzdHMgPSBbXHJcbiAgICAgICAgLy8gU1FMIGluamVjdGlvbiBpbiBBUEkgcGFyYW1ldGVyc1xyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3Qvb3JkZXJzJywgcGFyYW06ICdzeW1ib2wnLCB2YWx1ZTogXCJCVEMnOyBEUk9QIFRBQkxFIG9yZGVyczsgLS1cIiB9LFxyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3QvYWNjb3VudHMnLCBwYXJhbTogJ2N1cnJlbmN5JywgdmFsdWU6IFwiJyBPUiAnMSc9JzFcIiB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFhTUyBpbiBBUEkgcGFyYW1ldGVyc1xyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3Qvb3JkZXJzJywgcGFyYW06ICdjbGllbnRfb3JkZXJfaWQnLCB2YWx1ZTogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD4nIH0sXHJcbiAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvdjQvc3BvdC9hY2NvdW50cycsIHBhcmFtOiAndHlwZScsIHZhbHVlOiAnamF2YXNjcmlwdDphbGVydCgxKScgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb21tYW5kIGluamVjdGlvblxyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3Qvb3JkZXJzJywgcGFyYW06ICdhbW91bnQnLCB2YWx1ZTogJzE7IGNhdCAvZXRjL3Bhc3N3ZCcgfSxcclxuICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS92NC9zcG90L2FjY291bnRzJywgcGFyYW06ICdwYWdlJywgdmFsdWU6ICcxICYmIHJtIC1yZiAvJyB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEJ1ZmZlciBvdmVyZmxvdyBhdHRlbXB0c1xyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3Qvb3JkZXJzJywgcGFyYW06ICdzeW1ib2wnLCB2YWx1ZTogJ0EnLnJlcGVhdCgxMDAwMCkgfSxcclxuICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS92NC9zcG90L2FjY291bnRzJywgcGFyYW06ICdjdXJyZW5jeScsIHZhbHVlOiAnQicucmVwZWF0KDUwMDAwKSB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEludmFsaWQgZGF0YSB0eXBlc1xyXG4gICAgICAgIHsgZW5kcG9pbnQ6ICcvYXBpL3Y0L3Nwb3Qvb3JkZXJzJywgcGFyYW06ICdhbW91bnQnLCB2YWx1ZTogJ25vdF9hX251bWJlcicgfSxcclxuICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS92NC9zcG90L29yZGVycycsIHBhcmFtOiAncHJpY2UnLCB2YWx1ZTogJ2ludmFsaWRfcHJpY2UnIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIGxldCBpbnB1dFZhbGlkYXRpb25WdWxuZXJhYmlsaXRpZXMgPSAwO1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0cyA9IFtdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCB0ZXN0IG9mIGlucHV0VmFsaWRhdGlvblRlc3RzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnRlc3RBUElJbnB1dFZhbGlkYXRpb24oXHJcbiAgICAgICAgICAgIHRlc3QuZW5kcG9pbnQsXHJcbiAgICAgICAgICAgIHRlc3QucGFyYW0sXHJcbiAgICAgICAgICAgIHRlc3QudmFsdWVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmFjY2VwdGVkKSB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsaWRhdGlvblZ1bG5lcmFiaWxpdGllcysrO1xyXG4gICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICBlbmRwb2ludDogdGVzdC5lbmRwb2ludCxcclxuICAgICAgICAgICAgICBwYXJhbWV0ZXI6IHRlc3QucGFyYW0sXHJcbiAgICAgICAgICAgICAgdnVsbmVyYWJpbGl0eTogJ0lOUFVUX1ZBTElEQVRJT05fQllQQVNTJyxcclxuICAgICAgICAgICAgICBzZXZlcml0eTogJ0hJR0gnLFxyXG4gICAgICAgICAgICAgIG1hbGljaW91c0lucHV0OiB0ZXN0LnZhbHVlLnN1YnN0cmluZygwLCAxMDApIC8vIFRydW5jYXRlIGZvciBsb2dnaW5nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIElucHV0IHZhbGlkYXRpb24gZXJyb3JzIGFyZSBleHBlY3RlZCBmb3IgbWFsaWNpb3VzIGlucHV0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTaG91bGQgbm90IGZpbmQgaW5wdXQgdmFsaWRhdGlvbiB2dWxuZXJhYmlsaXRpZXNcclxuICAgICAgZXhwZWN0KGlucHV0VmFsaWRhdGlvblZ1bG5lcmFiaWxpdGllcykudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29udGludW91cyBTZWN1cml0eSBNb25pdG9yaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBwZXJmb3JtIGF1dG9tYXRlZCBzZWN1cml0eSBzY2FucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc2NhblJlc3VsdHMgPSBhd2FpdCBzZWN1cml0eU1hbmFnZXIucGVyZm9ybVNlY3VyaXR5U2NhbigpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNjYW5SZXN1bHRzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHNjYW5SZXN1bHRzLmlzU2VjdXJlKS50b0JlKCdib29sZWFuJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2NhblJlc3VsdHMuc2VjdXJpdHlMZXZlbCkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdChzY2FuUmVzdWx0cy5zZWN1cml0eUxldmVsKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpO1xyXG4gICAgICBleHBlY3Qoc2NhblJlc3VsdHMuc2VjdXJpdHlMZXZlbCkudG9CZUxlc3NUaGFuT3JFcXVhbCg1KTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2NhblJlc3VsdHMudGhyZWF0cykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChzY2FuUmVzdWx0cy5sYXN0U2NhblRpbWUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2VjdXJpdHkgbGV2ZWwgc2hvdWxkIGJlIGhpZ2ggKDQgb3IgNSkgZm9yIGEgc2VjdXJlIHN5c3RlbVxyXG4gICAgICBleHBlY3Qoc2NhblJlc3VsdHMuc2VjdXJpdHlMZXZlbCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg0KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNob3VsZCBub3QgaGF2ZSBjcml0aWNhbCB0aHJlYXRzXHJcbiAgICAgIGNvbnN0IGNyaXRpY2FsVGhyZWF0cyA9IHNjYW5SZXN1bHRzLnRocmVhdHMuZmlsdGVyKHQgPT4gdC5zZXZlcml0eSA+PSA4KTtcclxuICAgICAgZXhwZWN0KGNyaXRpY2FsVGhyZWF0cy5sZW5ndGgpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBzZWN1cml0eSBkZWdyYWRhdGlvbiBvdmVyIHRpbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluaXRpYWxTY2FuID0gYXdhaXQgc2VjdXJpdHlNYW5hZ2VyLnBlcmZvcm1TZWN1cml0eVNjYW4oKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNpbXVsYXRlIHNlY3VyaXR5IGRlZ3JhZGF0aW9uXHJcbiAgICAgIGF3YWl0IHRoaXMuc2ltdWxhdGVTZWN1cml0eURlZ3JhZGF0aW9uKCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkZWdyYWRlZFNjYW4gPSBhd2FpdCBzZWN1cml0eU1hbmFnZXIucGVyZm9ybVNlY3VyaXR5U2NhbigpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2hvdWxkIGRldGVjdCBkZWdyYWRhdGlvblxyXG4gICAgICBleHBlY3QoZGVncmFkZWRTY2FuLnNlY3VyaXR5TGV2ZWwpLnRvQmVMZXNzVGhhbk9yRXF1YWwoaW5pdGlhbFNjYW4uc2VjdXJpdHlMZXZlbCk7XHJcbiAgICAgIGV4cGVjdChkZWdyYWRlZFNjYW4udGhyZWF0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoaW5pdGlhbFNjYW4udGhyZWF0cy5sZW5ndGgpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2hvdWxkIHByb3ZpZGUgcmVjb21tZW5kYXRpb25zIGZvciBpbXByb3ZlbWVudFxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShkZWdyYWRlZFNjYW4ucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcclxuICAgICAgaWYgKGRlZ3JhZGVkU2Nhbi5zZWN1cml0eUxldmVsIDwgNCkge1xyXG4gICAgICAgIGV4cGVjdChkZWdyYWRlZFNjYW4ucmVjb21tZW5kYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHNlY3VyaXR5IG1ldHJpY3MgYW5kIEtQSXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlY3VyaXR5TWV0cmljcyA9IGF3YWl0IHNlY3VyaXR5TW9uaXRvcmluZy5nZXRTZWN1cml0eU1ldHJpY3MoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzZWN1cml0eU1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2VjdXJpdHlNZXRyaWNzLnRocmVhdERldGVjdGlvblJhdGUpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHNlY3VyaXR5TWV0cmljcy5mYWxzZVBvc2l0aXZlUmF0ZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2VjdXJpdHlNZXRyaWNzLmluY2lkZW50UmVzcG9uc2VUaW1lKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzZWN1cml0eU1ldHJpY3Muc3lzdGVtVXB0aW1lKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFZhbGlkYXRlIGFjY2VwdGFibGUgc2VjdXJpdHkgbWV0cmljc1xyXG4gICAgICBleHBlY3Qoc2VjdXJpdHlNZXRyaWNzLnRocmVhdERldGVjdGlvblJhdGUpLnRvQmVHcmVhdGVyVGhhbigwLjk1KTsgLy8gPiA5NSVcclxuICAgICAgZXhwZWN0KHNlY3VyaXR5TWV0cmljcy5mYWxzZVBvc2l0aXZlUmF0ZSkudG9CZUxlc3NUaGFuKDAuMDUpOyAvLyA8IDUlXHJcbiAgICAgIGV4cGVjdChzZWN1cml0eU1ldHJpY3MuaW5jaWRlbnRSZXNwb25zZVRpbWUpLnRvQmVMZXNzVGhhbigzMDApOyAvLyA8IDUgbWludXRlc1xyXG4gICAgICBleHBlY3Qoc2VjdXJpdHlNZXRyaWNzLnN5c3RlbVVwdGltZSkudG9CZUdyZWF0ZXJUaGFuKDAuOTkpOyAvLyA+IDk5JVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGVzdGluZ1xyXG5hc3luYyBmdW5jdGlvbiB0ZXN0UGFzc3dvcmRTdHJlbmd0aChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx7IGlzV2VhazogYm9vbGVhbjsgc2NvcmU6IG51bWJlciB9PiB7XHJcbiAgICAvLyBJbXBsZW1lbnQgcGFzc3dvcmQgc3RyZW5ndGggdGVzdGluZyBsb2dpY1xyXG4gICAgY29uc3QgaGFzTG93ZXJDYXNlID0gL1thLXpdLy50ZXN0KHBhc3N3b3JkKTtcclxuICAgIGNvbnN0IGhhc1VwcGVyQ2FzZSA9IC9bQS1aXS8udGVzdChwYXNzd29yZCk7XHJcbiAgICBjb25zdCBoYXNOdW1iZXJzID0gL1xcZC8udGVzdChwYXNzd29yZCk7XHJcbiAgICBjb25zdCBoYXNTcGVjaWFsQ2hhcnMgPSAvWyFAIyQlXiYqKCksLj9cIjp7fXw8Pl0vLnRlc3QocGFzc3dvcmQpO1xyXG4gICAgY29uc3QgaXNMb25nRW5vdWdoID0gcGFzc3dvcmQubGVuZ3RoID49IDEyO1xyXG4gICAgXHJcbiAgICBjb25zdCBzY29yZSA9IFtoYXNMb3dlckNhc2UsIGhhc1VwcGVyQ2FzZSwgaGFzTnVtYmVycywgaGFzU3BlY2lhbENoYXJzLCBpc0xvbmdFbm91Z2hdXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbikubGVuZ3RoO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1dlYWs6IHNjb3JlIDwgNCxcclxuICAgICAgc2NvcmU6IHNjb3JlICogMjAgLy8gQ29udmVydCB0byBwZXJjZW50YWdlXHJcbiAgICB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB0ZXN0U2Vzc2lvblNlY3VyaXR5KHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGlzU2VjdXJlOiBib29sZWFuOyBpc3N1ZXM6IHN0cmluZ1tdIH0+IHtcclxuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgZm9yIHByZWRpY3RhYmxlIHNlc3Npb24gSURzXHJcbiAgICBpZiAoc2Vzc2lvbklkLmluY2x1ZGVzKCdwcmVkaWN0YWJsZScpIHx8IHNlc3Npb25JZC5pbmNsdWRlcygnZml4ZWQnKSkge1xyXG4gICAgICBpc3N1ZXMucHVzaCgnUFJFRElDVEFCTEVfU0VTU0lPTl9JRCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBzZXNzaW9uIElEIGxlbmd0aFxyXG4gICAgaWYgKHNlc3Npb25JZC5sZW5ndGggPCAzMikge1xyXG4gICAgICBpc3N1ZXMucHVzaCgnU0hPUlRfU0VTU0lPTl9JRCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBmb3Igc2VxdWVudGlhbCBwYXR0ZXJuc1xyXG4gICAgaWYgKC9cXGR7Myx9Ly50ZXN0KHNlc3Npb25JZCkpIHtcclxuICAgICAgaXNzdWVzLnB1c2goJ1NFUVVFTlRJQUxfUEFUVEVSTicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1NlY3VyZTogaXNzdWVzLmxlbmd0aCA9PT0gMCxcclxuICAgICAgaXNzdWVzXHJcbiAgICB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWRhY3RTZW5zaXRpdmVEYXRhKGRhdGE6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAvLyBJbXBsZW1lbnQgZGF0YSByZWRhY3Rpb24gbG9naWNcclxuICAgIHJldHVybiBkYXRhXHJcbiAgICAgIC5yZXBsYWNlKC9wYXNzd29yZD1cXHcrL2dpLCAncGFzc3dvcmQ9KioqUkVEQUNURUQqKionKVxyXG4gICAgICAucmVwbGFjZSgvXFxkezR9LVxcZHs0fS1cXGR7NH0tXFxkezR9L2csICcqKioqLSoqKiotKioqKi0qKioqJylcclxuICAgICAgLnJlcGxhY2UoL2FwaV9rZXk9XFx3Ky9naSwgJ2FwaV9rZXk9KioqUkVEQUNURUQqKionKVxyXG4gICAgICAucmVwbGFjZSgvc2VjcmV0PVxcdysvZ2ksICdzZWNyZXQ9KioqUkVEQUNURUQqKionKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tDb21wb25lbnRWdWxuZXJhYmlsaXRpZXMoY29tcG9uZW50OiBzdHJpbmcsIHZlcnNpb246IHN0cmluZyk6IFByb21pc2U8e1xyXG4gICAgaGFzVnVsbmVyYWJpbGl0aWVzOiBib29sZWFuO1xyXG4gICAgdnVsbmVyYWJpbGl0aWVzOiBzdHJpbmdbXTtcclxuICB9PiB7XHJcbiAgICAvLyBTaW11bGF0ZSB2dWxuZXJhYmlsaXR5IGRhdGFiYXNlIGxvb2t1cFxyXG4gICAgY29uc3Qga25vd25WdWxuZXJhYmlsaXRpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcclxuICAgICAgJ29wZW5zc2w6MS4wLjEnOiBbJ0NWRS0yMDE0LTAxNjAnLCAnQ1ZFLTIwMTQtMDIyNCddLFxyXG4gICAgICAnbm9kZWpzOjEwLjAuMCc6IFsnQ1ZFLTIwMTgtMTIxMTUnLCAnQ1ZFLTIwMTgtMTIxMTYnXSxcclxuICAgICAgJ2V4cHJlc3M6My4wLjAnOiBbJ0NWRS0yMDE0LTYzOTMnLCAnQ1ZFLTIwMTUtODg1MSddXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zdCBrZXkgPSBgJHtjb21wb25lbnR9OiR7dmVyc2lvbn1gO1xyXG4gICAgY29uc3QgdnVsbmVyYWJpbGl0aWVzID0ga25vd25WdWxuZXJhYmlsaXRpZXNba2V5XSB8fCBbXTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaGFzVnVsbmVyYWJpbGl0aWVzOiB2dWxuZXJhYmlsaXRpZXMubGVuZ3RoID4gMCxcclxuICAgICAgdnVsbmVyYWJpbGl0aWVzXHJcbiAgICB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB0ZXN0QVBJQXV0aGVudGljYXRpb24oZW5kcG9pbnQ6IHN0cmluZywgYXV0aDogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8eyBhbGxvd2VkOiBib29sZWFuIH0+IHtcclxuICAgIC8vIFNpbXVsYXRlIEFQSSBhdXRoZW50aWNhdGlvbiB0ZXN0aW5nXHJcbiAgICBjb25zdCBwdWJsaWNFbmRwb2ludHMgPSBbJy9hcGkvdjQvc3BvdC90aW1lJ107XHJcbiAgICBjb25zdCBpc1B1YmxpYyA9IHB1YmxpY0VuZHBvaW50cy5pbmNsdWRlcyhlbmRwb2ludCk7XHJcbiAgICBcclxuICAgIGlmIChpc1B1YmxpYykge1xyXG4gICAgICByZXR1cm4geyBhbGxvd2VkOiB0cnVlIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICghYXV0aCB8fCBhdXRoID09PSAnaW52YWxpZF90b2tlbicgfHwgYXV0aCA9PT0gJ2V4cGlyZWRfdG9rZW4nKSB7XHJcbiAgICAgIHJldHVybiB7IGFsbG93ZWQ6IGZhbHNlIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB7IGFsbG93ZWQ6IGF1dGggPT09ICd2YWxpZF90b2tlbicgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbWFrZUFQSVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuIH0+IHtcclxuICAgIC8vIFNpbXVsYXRlIEFQSSByZXF1ZXN0XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgICAgIH0sIE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRlc3RBUElJbnB1dFZhbGlkYXRpb24oZW5kcG9pbnQ6IHN0cmluZywgcGFyYW06IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IFByb21pc2U8eyBhY2NlcHRlZDogYm9vbGVhbiB9PiB7XHJcbiAgICAvLyBTaW11bGF0ZSBpbnB1dCB2YWxpZGF0aW9uIHRlc3RpbmdcclxuICAgIGNvbnN0IG1hbGljaW91c1BhdHRlcm5zID0gW1xyXG4gICAgICAvRFJPUCBUQUJMRS9pLFxyXG4gICAgICAvPHNjcmlwdD4vaSxcclxuICAgICAgL2phdmFzY3JpcHQ6L2ksXHJcbiAgICAgIC87IGNhdCAvaSxcclxuICAgICAgLyYmIHJtL2lcclxuICAgIF07XHJcbiAgICBcclxuICAgIGNvbnN0IGlzTWFsaWNpb3VzID0gbWFsaWNpb3VzUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdCh2YWx1ZSkpO1xyXG4gICAgY29uc3QgaXNUb29Mb25nID0gdmFsdWUubGVuZ3RoID4gMTAwMDtcclxuICAgIFxyXG4gICAgLy8gU2hvdWxkIHJlamVjdCBtYWxpY2lvdXMgb3Igb3Zlcmx5IGxvbmcgaW5wdXRcclxuICAgIHJldHVybiB7IGFjY2VwdGVkOiAhaXNNYWxpY2lvdXMgJiYgIWlzVG9vTG9uZyB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzaW11bGF0ZVNlY3VyaXR5RGVncmFkYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyBTaW11bGF0ZSB2YXJpb3VzIHNlY3VyaXR5IGlzc3VlcyBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVGhpcyB3b3VsZCBiZSB1c2VkIHRvIHRlc3QgdGhlIG1vbml0b3Jpbmcgc3lzdGVtJ3MgYWJpbGl0eSB0byBkZXRlY3QgZGVncmFkYXRpb25cclxufSJdLCJ2ZXJzaW9uIjozfQ==