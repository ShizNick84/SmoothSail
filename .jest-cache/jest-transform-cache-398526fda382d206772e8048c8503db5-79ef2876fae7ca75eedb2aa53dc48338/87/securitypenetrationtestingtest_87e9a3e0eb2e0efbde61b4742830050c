58a570da11f7615b6c701d5e2c5d09fe
"use strict";
/**
 * =============================================================================
 * COMPREHENSIVE SECURITY PENETRATION TESTING SUITE
 * =============================================================================
 *
 * Advanced automated security testing suite for the AI crypto trading agent.
 * Implements comprehensive penetration testing, vulnerability scanning, and
 * security compliance validation as required by task 12.3.
 *
 * Features:
 * - Automated penetration testing for API endpoints
 * - Vulnerability scanning and assessment
 * - Security compliance testing and validation
 * - Real-time threat detection testing
 * - Comprehensive security reporting
 *
 * Requirements: 25.7 - Security compliance testing and validation
 *
 * @author AI Crypto Trading System
 * @version 1.0.0
 * @license PROPRIETARY
 * =============================================================================
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock external dependencies for testing
jest.mock('../../core/logging/logger');
jest.mock('../../core/notifications/notification-service');
jest.mock('axios');
const logger_1 = require("../../core/logging/logger");
const penetration_testing_service_1 = require("../../security/penetration-testing-service");
const automated_security_testing_1 = require("../../security/automated-security-testing");
const compliance_testing_1 = require("../../security/compliance-testing");
const encryption_service_1 = require("../../security/encryption-service");
const threat_detection_engine_1 = require("../../security/threat-detection-engine");
const security_monitoring_service_1 = require("../../security/security-monitoring-service");
const incident_response_service_1 = require("../../security/incident-response-service");
const notification_service_1 = require("../../core/notifications/notification-service");
const crypto = __importStar(require("crypto"));
const fs = __importStar(require("fs/promises"));
const path = __importStar(require("path"));
const os = __importStar(require("os"));
describe('Comprehensive Security Penetration Testing Suite', () => {
    let logger;
    let encryptionService;
    let threatDetection;
    let penetrationTesting;
    let automatedSecurityTesting;
    let complianceTestingService;
    let securityMonitoring;
    let incidentResponse;
    let notifications;
    let testOutputDir;
    beforeAll(async () => {
        // Set up test environment
        process.env.NODE_ENV = 'test';
        process.env.MASTER_ENCRYPTION_KEY = crypto.randomBytes(32).toString('hex');
        // Create temporary test output directory
        testOutputDir = path.join(os.tmpdir(), 'security-test-output');
        await fs.mkdir(testOutputDir, { recursive: true });
    });
    beforeEach(async () => {
        // Initialize services
        logger = new logger_1.Logger();
        encryptionService = new encryption_service_1.EncryptionService(logger);
        threatDetection = new threat_detection_engine_1.ThreatDetectionEngine(logger);
        securityMonitoring = new security_monitoring_service_1.SecurityMonitoringService(logger);
        incidentResponse = new incident_response_service_1.IncidentResponseService(logger, notifications);
        notifications = new notification_service_1.NotificationService(logger);
        // Configure penetration testing
        const penetrationConfig = {
            targetEndpoints: [
                'http://localhost:3000/api/v4/spot/time',
                'http://localhost:3000/api/v4/spot/accounts',
                'http://localhost:3000/api/v4/spot/orders',
                'http://localhost:3000/api/dashboard/status',
                'http://localhost:3000/api/trading/positions'
            ],
            testTypes: [
                'sql_injection',
                'xss',
                'authentication_bypass',
                'authorization_escalation',
                'input_validation',
                'rate_limiting',
                'tls_security'
            ],
            maxConcurrentTests: 5,
            timeoutMs: 30000,
            enableDestructiveTesting: false,
            complianceStandards: ['OWASP_TOP_10', 'ISO_27001', 'SOC_2', 'CRYPTO_TRADING_SECURITY']
        };
        penetrationTesting = new penetration_testing_service_1.PenetrationTestingService(logger, encryptionService, threatDetection, penetrationConfig);
        // Configure automated security testing suite
        const securityTestConfig = {
            schedules: [
                {
                    id: 'daily-security-scan',
                    name: 'Daily Security Scan',
                    cronExpression: '0 2 * * *', // 2 AM daily
                    testTypes: ['penetration', 'vulnerability', 'compliance'],
                    enabled: true
                },
                {
                    id: 'weekly-comprehensive-scan',
                    name: 'Weekly Comprehensive Scan',
                    cronExpression: '0 1 * * 0', // 1 AM every Sunday
                    testTypes: ['full_penetration', 'deep_vulnerability', 'full_compliance'],
                    enabled: true
                }
            ],
            reportingConfig: {
                outputDirectory: testOutputDir,
                retentionDays: 30,
                emailReports: true,
                slackIntegration: false
            },
            alertingConfig: {
                criticalThreshold: 1,
                highThreshold: 3,
                emailAlerts: true,
                immediateNotification: true
            },
            integrationConfig: {
                cicdIntegration: true,
                webhookUrl: 'http://localhost:3000/api/security/webhook',
                apiKey: 'test-api-key'
            }
        };
        automatedSecurityTesting = new automated_security_testing_1.AutomatedSecurityTestingSuite(logger, penetrationTesting, securityMonitoring, incidentResponse, notifications, securityTestConfig);
        complianceTestingService = new compliance_testing_1.ComplianceTestingService(logger);
        // Clear all mocks
        jest.clearAllMocks();
    });
    afterEach(async () => {
        // Clean up test files
        try {
            const files = await fs.readdir(testOutputDir);
            for (const file of files) {
                await fs.unlink(path.join(testOutputDir, file));
            }
        }
        catch (error) {
            // Ignore cleanup errors
        }
    });
    afterAll(async () => {
        // Clean up test environment
        delete process.env.MASTER_ENCRYPTION_KEY;
        delete process.env.NODE_ENV;
        try {
            await fs.rmdir(testOutputDir);
        }
        catch (error) {
            // Ignore cleanup errors
        }
    });
    describe('Automated Security Testing Suite', () => {
        it('should initialize automated security testing suite successfully', async () => {
            await expect(automatedSecurityTesting.initialize()).resolves.not.toThrow();
            expect(logger.info).toHaveBeenCalledWith('Automated security testing suite initialized successfully', expect.any(Object));
        });
        it('should execute on-demand security tests', async () => {
            const mockReport = {
                scanId: 'test-scan-123',
                timestamp: new Date(),
                totalVulnerabilities: 5,
                criticalCount: 1,
                highCount: 2,
                mediumCount: 1,
                lowCount: 1,
                vulnerabilities: [
                    {
                        id: 'vuln-1',
                        type: 'SQL_INJECTION',
                        severity: 'CRITICAL',
                        description: 'SQL injection vulnerability in login endpoint',
                        location: '/api/auth/login',
                        evidence: 'Payload: \' OR 1=1 --',
                        remediation: 'Use parameterized queries'
                    }
                ],
                complianceScore: 75,
                recommendations: [
                    'Implement input validation',
                    'Use parameterized queries',
                    'Add rate limiting'
                ]
            };
            // Mock the penetration testing service
            jest.spyOn(penetrationTesting, 'executeSecurityTestSuite').mockResolvedValue(mockReport);
            const result = await automatedSecurityTesting.executeSecurityTestsOnDemand();
            expect(result).toEqual(mockReport);
            expect(penetrationTesting.executeSecurityTestSuite).toHaveBeenCalled();
            expect(logger.info).toHaveBeenCalledWith('On-demand security test execution completed', expect.objectContaining({
                totalVulnerabilities: 5,
                criticalCount: 1
            }));
        });
        it('should handle critical vulnerabilities appropriately', async () => {
            const criticalReport = {
                scanId: 'critical-scan-456',
                timestamp: new Date(),
                totalVulnerabilities: 3,
                criticalCount: 3,
                highCount: 0,
                mediumCount: 0,
                lowCount: 0,
                vulnerabilities: [
                    {
                        id: 'critical-1',
                        type: 'AUTHENTICATION_BYPASS',
                        severity: 'CRITICAL',
                        description: 'Authentication bypass in trading API',
                        location: '/api/trading/orders',
                        evidence: 'Endpoint accessible without authentication',
                        remediation: 'Implement proper authentication checks'
                    }
                ],
                complianceScore: 30,
                recommendations: ['Immediate security review required']
            };
            jest.spyOn(penetrationTesting, 'executeSecurityTestSuite').mockResolvedValue(criticalReport);
            jest.spyOn(incidentResponse, 'createIncident').mockResolvedValue({
                id: 'incident-123',
                type: 'CRITICAL_VULNERABILITIES',
                severity: 'CRITICAL',
                description: 'Critical vulnerabilities detected',
                source: 'Automated Security Testing',
                timestamp: new Date(),
                status: 'DETECTED',
                evidence: [],
                responseActions: []
            });
            const result = await automatedSecurityTesting.executeSecurityTestsOnDemand();
            expect(result.criticalCount).toBe(3);
            expect(incidentResponse.createIncident).toHaveBeenCalledWith(expect.objectContaining({
                type: 'CRITICAL_VULNERABILITIES',
                severity: 'CRITICAL'
            }));
        });
        it('should generate and save security reports', async () => {
            const mockReport = {
                scanId: 'report-test-789',
                timestamp: new Date(),
                totalVulnerabilities: 2,
                criticalCount: 0,
                highCount: 1,
                mediumCount: 1,
                lowCount: 0,
                vulnerabilities: [],
                complianceScore: 85,
                recommendations: ['Regular security updates']
            };
            jest.spyOn(penetrationTesting, 'executeSecurityTestSuite').mockResolvedValue(mockReport);
            await automatedSecurityTesting.executeSecurityTestsOnDemand();
            // Check if report file was created
            const files = await fs.readdir(testOutputDir);
            const reportFiles = files.filter(f => f.startsWith('security-report-'));
            expect(reportFiles.length).toBeGreaterThan(0);
        });
    });
    describe('Penetration Testing Service', () => {
        it('should execute comprehensive security test suite', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toHaveProperty('scanId');
            expect(result).toHaveProperty('timestamp');
            expect(result).toHaveProperty('totalVulnerabilities');
            expect(result).toHaveProperty('vulnerabilities');
            expect(result).toHaveProperty('complianceScore');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.totalVulnerabilities).toBe('number');
            expect(Array.isArray(result.vulnerabilities)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
        it('should test API endpoints for SQL injection vulnerabilities', async () => {
            // This test would normally make actual HTTP requests
            // For testing purposes, we'll mock the behavior
            const mockSQLInjectionTest = jest.spyOn(penetrationTesting, 'testSQLInjection');
            mockSQLInjectionTest.mockResolvedValue({
                testId: 'sql-test-1',
                testName: 'SQL Injection Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'No SQL injection vulnerabilities found',
                findings: [],
                recommendations: [],
                timestamp: new Date(),
                executionTime: 1000
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result.vulnerabilities.length).toBeGreaterThanOrEqual(0);
        });
        it('should test authentication bypass vulnerabilities', async () => {
            const mockAuthTest = jest.spyOn(penetrationTesting, 'testAuthenticationBypass');
            mockAuthTest.mockResolvedValue({
                testId: 'auth-test-1',
                testName: 'Authentication Bypass Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'Authentication properly enforced',
                findings: [],
                recommendations: [],
                timestamp: new Date(),
                executionTime: 1500
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toBeDefined();
            expect(result.complianceScore).toBeGreaterThanOrEqual(0);
            expect(result.complianceScore).toBeLessThanOrEqual(100);
        });
        it('should test rate limiting implementation', async () => {
            const mockRateLimitTest = jest.spyOn(penetrationTesting, 'testRateLimiting');
            mockRateLimitTest.mockResolvedValue({
                testId: 'rate-test-1',
                testName: 'Rate Limiting Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'Rate limiting properly implemented',
                findings: [],
                recommendations: [],
                timestamp: new Date(),
                executionTime: 2000
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result.recommendations).toBeDefined();
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
    });
    describe('Compliance Testing Service', () => {
        it('should execute OWASP Top 10 compliance testing', async () => {
            const result = await complianceTestingService.executeComplianceTest('OWASP_TOP_10');
            expect(result).toHaveProperty('reportId');
            expect(result).toHaveProperty('standardId', 'OWASP_TOP_10');
            expect(result).toHaveProperty('standardName', 'OWASP Top 10');
            expect(result).toHaveProperty('overallScore');
            expect(result).toHaveProperty('status');
            expect(result).toHaveProperty('controlResults');
            expect(result).toHaveProperty('gapAnalysis');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.overallScore).toBe('number');
            expect(result.overallScore).toBeGreaterThanOrEqual(0);
            expect(result.overallScore).toBeLessThanOrEqual(100);
            expect(['COMPLIANT', 'NON_COMPLIANT', 'PARTIAL']).toContain(result.status);
        });
        it('should execute ISO 27001 compliance testing', async () => {
            const result = await complianceTestingService.executeComplianceTest('ISO_27001');
            expect(result.standardId).toBe('ISO_27001');
            expect(result.standardName).toBe('ISO/IEC 27001');
            expect(result.controlResults.length).toBeGreaterThan(0);
            // Check that each control result has required properties
            result.controlResults.forEach(control => {
                expect(control).toHaveProperty('controlId');
                expect(control).toHaveProperty('controlName');
                expect(control).toHaveProperty('status');
                expect(control).toHaveProperty('score');
                expect(control).toHaveProperty('maxScore');
                expect(['PASS', 'FAIL', 'PARTIAL']).toContain(control.status);
            });
        });
        it('should execute SOC 2 compliance testing', async () => {
            const result = await complianceTestingService.executeComplianceTest('SOC_2');
            expect(result.standardId).toBe('SOC_2');
            expect(result.standardName).toBe('SOC 2 Type II');
            expect(result.requiredScore).toBe(90);
            // SOC 2 should have high compliance requirements
            expect(result.requiredScore).toBeGreaterThanOrEqual(90);
        });
        it('should execute custom crypto trading security compliance testing', async () => {
            const result = await complianceTestingService.executeComplianceTest('CRYPTO_TRADING_SECURITY');
            expect(result.standardId).toBe('CRYPTO_TRADING_SECURITY');
            expect(result.standardName).toBe('Crypto Trading Security Framework');
            expect(result.requiredScore).toBe(95);
            // Check for crypto-specific controls
            const controlIds = result.controlResults.map(c => c.controlId);
            expect(controlIds).toContain('CTS.1.1'); // API Key Security
            expect(controlIds).toContain('CTS.2.1'); // Trading Algorithm Security
            expect(controlIds).toContain('CTS.3.1'); // Risk Management Controls
        });
        it('should generate gap analysis for non-compliant standards', async () => {
            const result = await complianceTestingService.executeComplianceTest('OWASP_TOP_10');
            expect(result.gapAnalysis).toBeDefined();
            expect(Array.isArray(result.gapAnalysis)).toBe(true);
            if (result.status !== 'COMPLIANT') {
                expect(result.gapAnalysis.length).toBeGreaterThan(0);
                result.gapAnalysis.forEach(gap => {
                    expect(gap).toHaveProperty('controlId');
                    expect(gap).toHaveProperty('controlName');
                    expect(gap).toHaveProperty('currentScore');
                    expect(gap).toHaveProperty('requiredScore');
                    expect(gap).toHaveProperty('gap');
                    expect(gap).toHaveProperty('priority');
                    expect(gap).toHaveProperty('remediation');
                    expect(['LOW', 'MEDIUM', 'HIGH', 'CRITICAL']).toContain(gap.priority);
                });
            }
        });
        it('should provide actionable recommendations', async () => {
            const result = await complianceTestingService.executeComplianceTest('OWASP_TOP_10');
            expect(result.recommendations).toBeDefined();
            expect(Array.isArray(result.recommendations)).toBe(true);
            expect(result.recommendations.length).toBeGreaterThan(0);
            // Recommendations should be strings
            result.recommendations.forEach(recommendation => {
                expect(typeof recommendation).toBe('string');
                expect(recommendation.length).toBeGreaterThan(0);
            });
        });
    });
    describe('Vulnerability Scanning', () => {
        it('should scan for dependency vulnerabilities', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Check if dependency scanning was performed
            const dependencyVulns = result.vulnerabilities.filter(v => v.type === 'DEPENDENCY_VULNERABILITY');
            // Should have scanned dependencies (may or may not find vulnerabilities)
            expect(result.vulnerabilities).toBeDefined();
        });
        it('should scan for configuration security issues', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Check if configuration scanning was performed
            const configVulns = result.vulnerabilities.filter(v => v.type === 'CONFIGURATION' || v.type === 'SECURITY_HEADERS');
            // Configuration scanning should be included in the report
            expect(result.vulnerabilities).toBeDefined();
        });
        it('should scan for hardcoded secrets', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Check if secret scanning was performed
            const secretVulns = result.vulnerabilities.filter(v => v.type === 'HARDCODED_SECRET' || v.type === 'CREDENTIAL_EXPOSURE');
            // Secret scanning should be part of the comprehensive scan
            expect(result.vulnerabilities).toBeDefined();
        });
        it('should provide severity-based vulnerability classification', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Check vulnerability severity distribution
            expect(result.criticalCount).toBeGreaterThanOrEqual(0);
            expect(result.highCount).toBeGreaterThanOrEqual(0);
            expect(result.mediumCount).toBeGreaterThanOrEqual(0);
            expect(result.lowCount).toBeGreaterThanOrEqual(0);
            // Total should match sum of severity counts
            const severitySum = result.criticalCount + result.highCount +
                result.mediumCount + result.lowCount;
            expect(severitySum).toBe(result.totalVulnerabilities);
        });
    });
    describe('Security Test Integration', () => {
        it('should integrate with threat detection engine', async () => {
            // Test that security testing integrates with threat detection
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toBeDefined();
            expect(threatDetection).toBeDefined();
        });
        it('should integrate with incident response system', async () => {
            const criticalReport = {
                scanId: 'integration-test',
                timestamp: new Date(),
                totalVulnerabilities: 1,
                criticalCount: 1,
                highCount: 0,
                mediumCount: 0,
                lowCount: 0,
                vulnerabilities: [
                    {
                        id: 'critical-integration',
                        type: 'CRITICAL_VULNERABILITY',
                        severity: 'CRITICAL',
                        description: 'Critical security issue detected',
                        location: 'Test location',
                        evidence: 'Test evidence',
                        remediation: 'Test remediation'
                    }
                ],
                complianceScore: 20,
                recommendations: ['Immediate action required']
            };
            jest.spyOn(penetrationTesting, 'executeSecurityTestSuite').mockResolvedValue(criticalReport);
            jest.spyOn(incidentResponse, 'createIncident').mockResolvedValue({
                id: 'integration-incident',
                type: 'CRITICAL_VULNERABILITIES',
                severity: 'CRITICAL',
                description: 'Integration test incident',
                source: 'Test',
                timestamp: new Date(),
                status: 'DETECTED',
                evidence: [],
                responseActions: []
            });
            await automatedSecurityTesting.executeSecurityTestsOnDemand();
            expect(incidentResponse.createIncident).toHaveBeenCalled();
        });
        it('should integrate with notification system', async () => {
            const highSeverityReport = {
                scanId: 'notification-test',
                timestamp: new Date(),
                totalVulnerabilities: 3,
                criticalCount: 0,
                highCount: 3,
                mediumCount: 0,
                lowCount: 0,
                vulnerabilities: [],
                complianceScore: 60,
                recommendations: ['Address high severity issues']
            };
            jest.spyOn(penetrationTesting, 'executeSecurityTestSuite').mockResolvedValue(highSeverityReport);
            jest.spyOn(notifications, 'sendAlert').mockResolvedValue();
            await automatedSecurityTesting.executeSecurityTestsOnDemand();
            expect(notifications.sendAlert).toHaveBeenCalledWith(expect.objectContaining({
                title: expect.stringContaining('High Severity'),
                priority: 'HIGH'
            }));
        });
    });
    describe('Security Test Reporting', () => {
        it('should generate comprehensive security reports', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toHaveProperty('scanId');
            expect(result).toHaveProperty('timestamp');
            expect(result).toHaveProperty('totalVulnerabilities');
            expect(result).toHaveProperty('criticalCount');
            expect(result).toHaveProperty('highCount');
            expect(result).toHaveProperty('mediumCount');
            expect(result).toHaveProperty('lowCount');
            expect(result).toHaveProperty('vulnerabilities');
            expect(result).toHaveProperty('complianceScore');
            expect(result).toHaveProperty('recommendations');
            // Validate report structure
            expect(typeof result.scanId).toBe('string');
            expect(result.timestamp instanceof Date).toBe(true);
            expect(typeof result.totalVulnerabilities).toBe('number');
            expect(typeof result.complianceScore).toBe('number');
            expect(Array.isArray(result.vulnerabilities)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
        it('should save reports to configured output directory', async () => {
            await automatedSecurityTesting.executeSecurityTestsOnDemand();
            // Check if report files were created
            const files = await fs.readdir(testOutputDir);
            const reportFiles = files.filter(f => f.startsWith('security-report-'));
            expect(reportFiles.length).toBeGreaterThan(0);
            // Validate report file content
            if (reportFiles.length > 0) {
                const reportContent = await fs.readFile(path.join(testOutputDir, reportFiles[0]), 'utf-8');
                const reportData = JSON.parse(reportContent);
                expect(reportData).toHaveProperty('execution');
                expect(reportData).toHaveProperty('report');
                expect(reportData).toHaveProperty('metadata');
            }
        });
        it('should clean up old reports based on retention policy', async () => {
            // Create old test files
            const oldFileName = `security-report-old-${Date.now() - 86400000 * 31}.json`; // 31 days old
            await fs.writeFile(path.join(testOutputDir, oldFileName), JSON.stringify({ test: 'old report' }));
            // Execute security test (which should trigger cleanup)
            await automatedSecurityTesting.executeSecurityTestsOnDemand();
            // Wait a bit for cleanup to complete
            await new Promise(resolve => setTimeout(resolve, 1000));
            // Check if old file was cleaned up
            const files = await fs.readdir(testOutputDir);
            expect(files).not.toContain(oldFileName);
        });
    });
    describe('Error Handling and Resilience', () => {
        it('should handle network errors gracefully', async () => {
            // Mock network error
            jest.spyOn(penetrationTesting, 'sendTestRequest').mockRejectedValue(new Error('Network error'));
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Should still return a report even with network errors
            expect(result).toBeDefined();
            expect(result).toHaveProperty('scanId');
        });
        it('should handle timeout errors appropriately', async () => {
            // Mock timeout error
            jest.spyOn(penetrationTesting, 'sendTestRequest').mockImplementation(() => new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 100)));
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toBeDefined();
            expect(logger.error).toHaveBeenCalled();
        });
        it('should continue testing after individual test failures', async () => {
            // Mock some tests to fail
            let callCount = 0;
            jest.spyOn(penetrationTesting, 'testSQLInjection').mockImplementation(() => {
                callCount++;
                if (callCount === 1) {
                    throw new Error('Test failure');
                }
                return Promise.resolve({
                    testId: 'test-1',
                    testName: 'Test',
                    category: 'API_SECURITY',
                    status: 'PASS',
                    severity: 'LOW',
                    description: 'Test passed',
                    findings: [],
                    recommendations: [],
                    timestamp: new Date(),
                    executionTime: 1000
                });
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            // Should complete despite individual test failures
            expect(result).toBeDefined();
            expect(result.totalVulnerabilities).toBeGreaterThanOrEqual(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxzZWN1cml0eVxcc2VjdXJpdHktcGVuZXRyYXRpb24tdGVzdGluZy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXNCRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkgseUNBQXlDO0FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLCtDQUErQyxDQUFDLENBQUM7QUFDM0QsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQWpCbkIsc0RBQW1EO0FBQ25ELDRGQUFtSTtBQUNuSSwwRkFBbUg7QUFDbkgsMEVBQTZFO0FBQzdFLDBFQUFzRTtBQUN0RSxvRkFBK0U7QUFDL0UsNEZBQXVGO0FBQ3ZGLHdGQUFtRjtBQUNuRix3RkFBb0Y7QUFDcEYsK0NBQWlDO0FBQ2pDLGdEQUFrQztBQUNsQywyQ0FBNkI7QUFDN0IsdUNBQXlCO0FBT3pCLFFBQVEsQ0FBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7SUFDaEUsSUFBSSxNQUFjLENBQUM7SUFDbkIsSUFBSSxpQkFBb0MsQ0FBQztJQUN6QyxJQUFJLGVBQXNDLENBQUM7SUFDM0MsSUFBSSxrQkFBNkMsQ0FBQztJQUNsRCxJQUFJLHdCQUF1RCxDQUFDO0lBQzVELElBQUksd0JBQWtELENBQUM7SUFDdkQsSUFBSSxrQkFBNkMsQ0FBQztJQUNsRCxJQUFJLGdCQUF5QyxDQUFDO0lBQzlDLElBQUksYUFBa0MsQ0FBQztJQUN2QyxJQUFJLGFBQXFCLENBQUM7SUFFMUIsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLDBCQUEwQjtRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7UUFDOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxNQUFNLENBQUMsV0FB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QUMsQ0FBQztZQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUF5QixFQUFFLGtCQUFrQixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFO2dCQUNoRixTQUFTLEVBQUUsQ0FBQztnQkFDWixJQUFJLFNBQVMsS0FBSyxDQUFDLEVBQUUsQ0FBQztvQkFDcEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDbEMsQ0FBQztnQkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUM7b0JBQ3JCLE1BQU0sRUFBRSxRQUFRO29CQUNoQixRQUFRLEVBQUUsTUFBTTtvQkFDaEIsUUFBUSxFQUFFLGNBQWM7b0JBQ3hCLE1BQU0sRUFBRSxNQUFNO29CQUNkLFFBQVEsRUFBRSxLQUFLO29CQUNmLFdBQVcsRUFBRSxhQUFhO29CQUMxQixRQUFRLEVBQUUsRUFBRTtvQkFDWixlQUFlLEVBQUUsRUFBRTtvQkFDbkIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO29CQUNyQixhQUFhLEVBQUUsSUFBSTtpQkFDcEIsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLE1BQU0sR0FBRyxNQUFNLGtCQUFrQixDQUFDLHdCQUF3QixFQUFFLENBQUM7WUFFbkUsbURBQW1EO1lBQ25ELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM3QixNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTmlja1xcRGVza3RvcFxcU21vb3RoU2FpbFxcc3JjXFx0ZXN0c1xcc2VjdXJpdHlcXHNlY3VyaXR5LXBlbmV0cmF0aW9uLXRlc3RpbmcudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ09NUFJFSEVOU0lWRSBTRUNVUklUWSBQRU5FVFJBVElPTiBURVNUSU5HIFNVSVRFXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIFxyXG4gKiBBZHZhbmNlZCBhdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZyBzdWl0ZSBmb3IgdGhlIEFJIGNyeXB0byB0cmFkaW5nIGFnZW50LlxyXG4gKiBJbXBsZW1lbnRzIGNvbXByZWhlbnNpdmUgcGVuZXRyYXRpb24gdGVzdGluZywgdnVsbmVyYWJpbGl0eSBzY2FubmluZywgYW5kXHJcbiAqIHNlY3VyaXR5IGNvbXBsaWFuY2UgdmFsaWRhdGlvbiBhcyByZXF1aXJlZCBieSB0YXNrIDEyLjMuXHJcbiAqIFxyXG4gKiBGZWF0dXJlczpcclxuICogLSBBdXRvbWF0ZWQgcGVuZXRyYXRpb24gdGVzdGluZyBmb3IgQVBJIGVuZHBvaW50c1xyXG4gKiAtIFZ1bG5lcmFiaWxpdHkgc2Nhbm5pbmcgYW5kIGFzc2Vzc21lbnRcclxuICogLSBTZWN1cml0eSBjb21wbGlhbmNlIHRlc3RpbmcgYW5kIHZhbGlkYXRpb25cclxuICogLSBSZWFsLXRpbWUgdGhyZWF0IGRldGVjdGlvbiB0ZXN0aW5nXHJcbiAqIC0gQ29tcHJlaGVuc2l2ZSBzZWN1cml0eSByZXBvcnRpbmdcclxuICogXHJcbiAqIFJlcXVpcmVtZW50czogMjUuNyAtIFNlY3VyaXR5IGNvbXBsaWFuY2UgdGVzdGluZyBhbmQgdmFsaWRhdGlvblxyXG4gKiBcclxuICogQGF1dGhvciBBSSBDcnlwdG8gVHJhZGluZyBTeXN0ZW1cclxuICogQHZlcnNpb24gMS4wLjBcclxuICogQGxpY2Vuc2UgUFJPUFJJRVRBUllcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICovXHJcblxyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi8uLi9jb3JlL2xvZ2dpbmcvbG9nZ2VyJztcclxuaW1wb3J0IHsgUGVuZXRyYXRpb25UZXN0aW5nU2VydmljZSwgUGVuZXRyYXRpb25UZXN0Q29uZmlnLCBWdWxuZXJhYmlsaXR5UmVwb3J0IH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvcGVuZXRyYXRpb24tdGVzdGluZy1zZXJ2aWNlJztcclxuaW1wb3J0IHsgQXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nU3VpdGUsIFNlY3VyaXR5VGVzdFN1aXRlQ29uZmlnIH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvYXV0b21hdGVkLXNlY3VyaXR5LXRlc3RpbmcnO1xyXG5pbXBvcnQgeyBDb21wbGlhbmNlVGVzdGluZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWN1cml0eS9jb21wbGlhbmNlLXRlc3RpbmcnO1xyXG5pbXBvcnQgeyBFbmNyeXB0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L2VuY3J5cHRpb24tc2VydmljZSc7XHJcbmltcG9ydCB7IFRocmVhdERldGVjdGlvbkVuZ2luZSB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L3RocmVhdC1kZXRlY3Rpb24tZW5naW5lJztcclxuaW1wb3J0IHsgU2VjdXJpdHlNb25pdG9yaW5nU2VydmljZSB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L3NlY3VyaXR5LW1vbml0b3Jpbmctc2VydmljZSc7XHJcbmltcG9ydCB7IEluY2lkZW50UmVzcG9uc2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvaW5jaWRlbnQtcmVzcG9uc2Utc2VydmljZSc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb3JlL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9uLXNlcnZpY2UnO1xyXG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcclxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7XHJcblxyXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llcyBmb3IgdGVzdGluZ1xyXG5qZXN0Lm1vY2soJy4uLy4uL2NvcmUvbG9nZ2luZy9sb2dnZXInKTtcclxuamVzdC5tb2NrKCcuLi8uLi9jb3JlL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9uLXNlcnZpY2UnKTtcclxuamVzdC5tb2NrKCdheGlvcycpO1xyXG5cclxuZGVzY3JpYmUoJ0NvbXByZWhlbnNpdmUgU2VjdXJpdHkgUGVuZXRyYXRpb24gVGVzdGluZyBTdWl0ZScsICgpID0+IHtcclxuICBsZXQgbG9nZ2VyOiBMb2dnZXI7XHJcbiAgbGV0IGVuY3J5cHRpb25TZXJ2aWNlOiBFbmNyeXB0aW9uU2VydmljZTtcclxuICBsZXQgdGhyZWF0RGV0ZWN0aW9uOiBUaHJlYXREZXRlY3Rpb25FbmdpbmU7XHJcbiAgbGV0IHBlbmV0cmF0aW9uVGVzdGluZzogUGVuZXRyYXRpb25UZXN0aW5nU2VydmljZTtcclxuICBsZXQgYXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nOiBBdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmdTdWl0ZTtcclxuICBsZXQgY29tcGxpYW5jZVRlc3RpbmdTZXJ2aWNlOiBDb21wbGlhbmNlVGVzdGluZ1NlcnZpY2U7XHJcbiAgbGV0IHNlY3VyaXR5TW9uaXRvcmluZzogU2VjdXJpdHlNb25pdG9yaW5nU2VydmljZTtcclxuICBsZXQgaW5jaWRlbnRSZXNwb25zZTogSW5jaWRlbnRSZXNwb25zZVNlcnZpY2U7XHJcbiAgbGV0IG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvblNlcnZpY2U7XHJcbiAgbGV0IHRlc3RPdXRwdXREaXI6IHN0cmluZztcclxuXHJcbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcclxuICAgIC8vIFNldCB1cCB0ZXN0IGVudmlyb25tZW50XHJcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcclxuICAgIHByb2Nlc3MuZW52Lk1BU1RFUl9FTkNSWVBUSU9OX0tFWSA9IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoJ2hleCcpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgdGVtcG9yYXJ5IHRlc3Qgb3V0cHV0IGRpcmVjdG9yeVxyXG4gICAgdGVzdE91dHB1dERpciA9IHBhdGguam9pbihvcy50bXBkaXIoKSwgJ3NlY3VyaXR5LXRlc3Qtb3V0cHV0Jyk7XHJcbiAgICBhd2FpdCBmcy5ta2Rpcih0ZXN0T3V0cHV0RGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICB9KTtcclxuXHJcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBJbml0aWFsaXplIHNlcnZpY2VzXHJcbiAgICBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XHJcbiAgICBlbmNyeXB0aW9uU2VydmljZSA9IG5ldyBFbmNyeXB0aW9uU2VydmljZShsb2dnZXIpO1xyXG4gICAgdGhyZWF0RGV0ZWN0aW9uID0gbmV3IFRocmVhdERldGVjdGlvbkVuZ2luZShsb2dnZXIpO1xyXG4gICAgc2VjdXJpdHlNb25pdG9yaW5nID0gbmV3IFNlY3VyaXR5TW9uaXRvcmluZ1NlcnZpY2UobG9nZ2VyKTtcclxuICAgIGluY2lkZW50UmVzcG9uc2UgPSBuZXcgSW5jaWRlbnRSZXNwb25zZVNlcnZpY2UobG9nZ2VyLCBub3RpZmljYXRpb25zKTtcclxuICAgIG5vdGlmaWNhdGlvbnMgPSBuZXcgTm90aWZpY2F0aW9uU2VydmljZShsb2dnZXIpO1xyXG5cclxuICAgIC8vIENvbmZpZ3VyZSBwZW5ldHJhdGlvbiB0ZXN0aW5nXHJcbiAgICBjb25zdCBwZW5ldHJhdGlvbkNvbmZpZzogUGVuZXRyYXRpb25UZXN0Q29uZmlnID0ge1xyXG4gICAgICB0YXJnZXRFbmRwb2ludHM6IFtcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92NC9zcG90L3RpbWUnLFxyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Y0L3Nwb3QvYWNjb3VudHMnLFxyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Y0L3Nwb3Qvb3JkZXJzJyxcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9kYXNoYm9hcmQvc3RhdHVzJyxcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS90cmFkaW5nL3Bvc2l0aW9ucydcclxuICAgICAgXSxcclxuICAgICAgdGVzdFR5cGVzOiBbXHJcbiAgICAgICAgJ3NxbF9pbmplY3Rpb24nLFxyXG4gICAgICAgICd4c3MnLFxyXG4gICAgICAgICdhdXRoZW50aWNhdGlvbl9ieXBhc3MnLFxyXG4gICAgICAgICdhdXRob3JpemF0aW9uX2VzY2FsYXRpb24nLFxyXG4gICAgICAgICdpbnB1dF92YWxpZGF0aW9uJyxcclxuICAgICAgICAncmF0ZV9saW1pdGluZycsXHJcbiAgICAgICAgJ3Rsc19zZWN1cml0eSdcclxuICAgICAgXSxcclxuICAgICAgbWF4Q29uY3VycmVudFRlc3RzOiA1LFxyXG4gICAgICB0aW1lb3V0TXM6IDMwMDAwLFxyXG4gICAgICBlbmFibGVEZXN0cnVjdGl2ZVRlc3Rpbmc6IGZhbHNlLFxyXG4gICAgICBjb21wbGlhbmNlU3RhbmRhcmRzOiBbJ09XQVNQX1RPUF8xMCcsICdJU09fMjcwMDEnLCAnU09DXzInLCAnQ1JZUFRPX1RSQURJTkdfU0VDVVJJVFknXVxyXG4gICAgfTtcclxuXHJcbiAgICBwZW5ldHJhdGlvblRlc3RpbmcgPSBuZXcgUGVuZXRyYXRpb25UZXN0aW5nU2VydmljZShcclxuICAgICAgbG9nZ2VyLFxyXG4gICAgICBlbmNyeXB0aW9uU2VydmljZSxcclxuICAgICAgdGhyZWF0RGV0ZWN0aW9uLFxyXG4gICAgICBwZW5ldHJhdGlvbkNvbmZpZ1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDb25maWd1cmUgYXV0b21hdGVkIHNlY3VyaXR5IHRlc3Rpbmcgc3VpdGVcclxuICAgIGNvbnN0IHNlY3VyaXR5VGVzdENvbmZpZzogU2VjdXJpdHlUZXN0U3VpdGVDb25maWcgPSB7XHJcbiAgICAgIHNjaGVkdWxlczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnZGFpbHktc2VjdXJpdHktc2NhbicsXHJcbiAgICAgICAgICBuYW1lOiAnRGFpbHkgU2VjdXJpdHkgU2NhbicsXHJcbiAgICAgICAgICBjcm9uRXhwcmVzc2lvbjogJzAgMiAqICogKicsIC8vIDIgQU0gZGFpbHlcclxuICAgICAgICAgIHRlc3RUeXBlczogWydwZW5ldHJhdGlvbicsICd2dWxuZXJhYmlsaXR5JywgJ2NvbXBsaWFuY2UnXSxcclxuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnd2Vla2x5LWNvbXByZWhlbnNpdmUtc2NhbicsXHJcbiAgICAgICAgICBuYW1lOiAnV2Vla2x5IENvbXByZWhlbnNpdmUgU2NhbicsXHJcbiAgICAgICAgICBjcm9uRXhwcmVzc2lvbjogJzAgMSAqICogMCcsIC8vIDEgQU0gZXZlcnkgU3VuZGF5XHJcbiAgICAgICAgICB0ZXN0VHlwZXM6IFsnZnVsbF9wZW5ldHJhdGlvbicsICdkZWVwX3Z1bG5lcmFiaWxpdHknLCAnZnVsbF9jb21wbGlhbmNlJ10sXHJcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICByZXBvcnRpbmdDb25maWc6IHtcclxuICAgICAgICBvdXRwdXREaXJlY3Rvcnk6IHRlc3RPdXRwdXREaXIsXHJcbiAgICAgICAgcmV0ZW50aW9uRGF5czogMzAsXHJcbiAgICAgICAgZW1haWxSZXBvcnRzOiB0cnVlLFxyXG4gICAgICAgIHNsYWNrSW50ZWdyYXRpb246IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGFsZXJ0aW5nQ29uZmlnOiB7XHJcbiAgICAgICAgY3JpdGljYWxUaHJlc2hvbGQ6IDEsXHJcbiAgICAgICAgaGlnaFRocmVzaG9sZDogMyxcclxuICAgICAgICBlbWFpbEFsZXJ0czogdHJ1ZSxcclxuICAgICAgICBpbW1lZGlhdGVOb3RpZmljYXRpb246IHRydWVcclxuICAgICAgfSxcclxuICAgICAgaW50ZWdyYXRpb25Db25maWc6IHtcclxuICAgICAgICBjaWNkSW50ZWdyYXRpb246IHRydWUsXHJcbiAgICAgICAgd2ViaG9va1VybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvc2VjdXJpdHkvd2ViaG9vaycsXHJcbiAgICAgICAgYXBpS2V5OiAndGVzdC1hcGkta2V5J1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGF1dG9tYXRlZFNlY3VyaXR5VGVzdGluZyA9IG5ldyBBdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmdTdWl0ZShcclxuICAgICAgbG9nZ2VyLFxyXG4gICAgICBwZW5ldHJhdGlvblRlc3RpbmcsXHJcbiAgICAgIHNlY3VyaXR5TW9uaXRvcmluZyxcclxuICAgICAgaW5jaWRlbnRSZXNwb25zZSxcclxuICAgICAgbm90aWZpY2F0aW9ucyxcclxuICAgICAgc2VjdXJpdHlUZXN0Q29uZmlnXHJcbiAgICApO1xyXG5cclxuICAgIGNvbXBsaWFuY2VUZXN0aW5nU2VydmljZSA9IG5ldyBDb21wbGlhbmNlVGVzdGluZ1NlcnZpY2UobG9nZ2VyKTtcclxuXHJcbiAgICAvLyBDbGVhciBhbGwgbW9ja3NcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBmaWxlc1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKHRlc3RPdXRwdXREaXIpO1xyXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcclxuICAgICAgICBhd2FpdCBmcy51bmxpbmsocGF0aC5qb2luKHRlc3RPdXRwdXREaXIsIGZpbGUpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGNsZWFudXAgZXJyb3JzXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcclxuICAgIC8vIENsZWFuIHVwIHRlc3QgZW52aXJvbm1lbnRcclxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5NQVNURVJfRU5DUllQVElPTl9LRVk7XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGZzLnJtZGlyKHRlc3RPdXRwdXREaXIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGNsZWFudXAgZXJyb3JzXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBdXRvbWF0ZWQgU2VjdXJpdHkgVGVzdGluZyBTdWl0ZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSBhdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZyBzdWl0ZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChhdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmcuaW5pdGlhbGl6ZSgpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGxvZ2dlci5pbmZvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnQXV0b21hdGVkIHNlY3VyaXR5IHRlc3Rpbmcgc3VpdGUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBleHBlY3QuYW55KE9iamVjdClcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBvbi1kZW1hbmQgc2VjdXJpdHkgdGVzdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXBvcnQ6IFZ1bG5lcmFiaWxpdHlSZXBvcnQgPSB7XHJcbiAgICAgICAgc2NhbklkOiAndGVzdC1zY2FuLTEyMycsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHRvdGFsVnVsbmVyYWJpbGl0aWVzOiA1LFxyXG4gICAgICAgIGNyaXRpY2FsQ291bnQ6IDEsXHJcbiAgICAgICAgaGlnaENvdW50OiAyLFxyXG4gICAgICAgIG1lZGl1bUNvdW50OiAxLFxyXG4gICAgICAgIGxvd0NvdW50OiAxLFxyXG4gICAgICAgIHZ1bG5lcmFiaWxpdGllczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogJ3Z1bG4tMScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdTUUxfSU5KRUNUSU9OJyxcclxuICAgICAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCcsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU1FMIGluamVjdGlvbiB2dWxuZXJhYmlsaXR5IGluIGxvZ2luIGVuZHBvaW50JyxcclxuICAgICAgICAgICAgbG9jYXRpb246ICcvYXBpL2F1dGgvbG9naW4nLFxyXG4gICAgICAgICAgICBldmlkZW5jZTogJ1BheWxvYWQ6IFxcJyBPUiAxPTEgLS0nLFxyXG4gICAgICAgICAgICByZW1lZGlhdGlvbjogJ1VzZSBwYXJhbWV0ZXJpemVkIHF1ZXJpZXMnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBjb21wbGlhbmNlU2NvcmU6IDc1LFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xyXG4gICAgICAgICAgJ0ltcGxlbWVudCBpbnB1dCB2YWxpZGF0aW9uJyxcclxuICAgICAgICAgICdVc2UgcGFyYW1ldGVyaXplZCBxdWVyaWVzJyxcclxuICAgICAgICAgICdBZGQgcmF0ZSBsaW1pdGluZydcclxuICAgICAgICBdXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBNb2NrIHRoZSBwZW5ldHJhdGlvbiB0ZXN0aW5nIHNlcnZpY2VcclxuICAgICAgamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcsICdleGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVwb3J0KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1dG9tYXRlZFNlY3VyaXR5VGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0c09uRGVtYW5kKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXBvcnQpO1xyXG4gICAgICBleHBlY3QocGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QobG9nZ2VyLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICdPbi1kZW1hbmQgc2VjdXJpdHkgdGVzdCBleGVjdXRpb24gY29tcGxldGVkJyxcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICB0b3RhbFZ1bG5lcmFiaWxpdGllczogNSxcclxuICAgICAgICAgIGNyaXRpY2FsQ291bnQ6IDFcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY3JpdGljYWwgdnVsbmVyYWJpbGl0aWVzIGFwcHJvcHJpYXRlbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNyaXRpY2FsUmVwb3J0OiBWdWxuZXJhYmlsaXR5UmVwb3J0ID0ge1xyXG4gICAgICAgIHNjYW5JZDogJ2NyaXRpY2FsLXNjYW4tNDU2JyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdG90YWxWdWxuZXJhYmlsaXRpZXM6IDMsXHJcbiAgICAgICAgY3JpdGljYWxDb3VudDogMyxcclxuICAgICAgICBoaWdoQ291bnQ6IDAsXHJcbiAgICAgICAgbWVkaXVtQ291bnQ6IDAsXHJcbiAgICAgICAgbG93Q291bnQ6IDAsXHJcbiAgICAgICAgdnVsbmVyYWJpbGl0aWVzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnY3JpdGljYWwtMScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdBVVRIRU5USUNBVElPTl9CWVBBU1MnLFxyXG4gICAgICAgICAgICBzZXZlcml0eTogJ0NSSVRJQ0FMJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBdXRoZW50aWNhdGlvbiBieXBhc3MgaW4gdHJhZGluZyBBUEknLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogJy9hcGkvdHJhZGluZy9vcmRlcnMnLFxyXG4gICAgICAgICAgICBldmlkZW5jZTogJ0VuZHBvaW50IGFjY2Vzc2libGUgd2l0aG91dCBhdXRoZW50aWNhdGlvbicsXHJcbiAgICAgICAgICAgIHJlbWVkaWF0aW9uOiAnSW1wbGVtZW50IHByb3BlciBhdXRoZW50aWNhdGlvbiBjaGVja3MnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBjb21wbGlhbmNlU2NvcmU6IDMwLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydJbW1lZGlhdGUgc2VjdXJpdHkgcmV2aWV3IHJlcXVpcmVkJ11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nLCAnZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlJykubW9ja1Jlc29sdmVkVmFsdWUoY3JpdGljYWxSZXBvcnQpO1xyXG4gICAgICBqZXN0LnNweU9uKGluY2lkZW50UmVzcG9uc2UsICdjcmVhdGVJbmNpZGVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ2luY2lkZW50LTEyMycsXHJcbiAgICAgICAgdHlwZTogJ0NSSVRJQ0FMX1ZVTE5FUkFCSUxJVElFUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdDcml0aWNhbCB2dWxuZXJhYmlsaXRpZXMgZGV0ZWN0ZWQnLFxyXG4gICAgICAgIHNvdXJjZTogJ0F1dG9tYXRlZCBTZWN1cml0eSBUZXN0aW5nJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc3RhdHVzOiAnREVURUNURUQnLFxyXG4gICAgICAgIGV2aWRlbmNlOiBbXSxcclxuICAgICAgICByZXNwb25zZUFjdGlvbnM6IFtdXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RzT25EZW1hbmQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3JpdGljYWxDb3VudCkudG9CZSgzKTtcclxuICAgICAgZXhwZWN0KGluY2lkZW50UmVzcG9uc2UuY3JlYXRlSW5jaWRlbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIHR5cGU6ICdDUklUSUNBTF9WVUxORVJBQklMSVRJRVMnLFxyXG4gICAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCdcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBhbmQgc2F2ZSBzZWN1cml0eSByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUmVwb3J0OiBWdWxuZXJhYmlsaXR5UmVwb3J0ID0ge1xyXG4gICAgICAgIHNjYW5JZDogJ3JlcG9ydC10ZXN0LTc4OScsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHRvdGFsVnVsbmVyYWJpbGl0aWVzOiAyLFxyXG4gICAgICAgIGNyaXRpY2FsQ291bnQ6IDAsXHJcbiAgICAgICAgaGlnaENvdW50OiAxLFxyXG4gICAgICAgIG1lZGl1bUNvdW50OiAxLFxyXG4gICAgICAgIGxvd0NvdW50OiAwLFxyXG4gICAgICAgIHZ1bG5lcmFiaWxpdGllczogW10sXHJcbiAgICAgICAgY29tcGxpYW5jZVNjb3JlOiA4NSxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnUmVndWxhciBzZWN1cml0eSB1cGRhdGVzJ11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nLCAnZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlcG9ydCk7XHJcblxyXG4gICAgICBhd2FpdCBhdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdHNPbkRlbWFuZCgpO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgcmVwb3J0IGZpbGUgd2FzIGNyZWF0ZWRcclxuICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKHRlc3RPdXRwdXREaXIpO1xyXG4gICAgICBjb25zdCByZXBvcnRGaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IGYuc3RhcnRzV2l0aCgnc2VjdXJpdHktcmVwb3J0LScpKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXBvcnRGaWxlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVuZXRyYXRpb24gVGVzdGluZyBTZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIGNvbXByZWhlbnNpdmUgc2VjdXJpdHkgdGVzdCBzdWl0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3NjYW5JZCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFZ1bG5lcmFiaWxpdGllcycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndnVsbmVyYWJpbGl0aWVzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGlhbmNlU2NvcmUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xyXG5cclxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQudG90YWxWdWxuZXJhYmlsaXRpZXMpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQudnVsbmVyYWJpbGl0aWVzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgQVBJIGVuZHBvaW50cyBmb3IgU1FMIGluamVjdGlvbiB2dWxuZXJhYmlsaXRpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFRoaXMgdGVzdCB3b3VsZCBub3JtYWxseSBtYWtlIGFjdHVhbCBIVFRQIHJlcXVlc3RzXHJcbiAgICAgIC8vIEZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSdsbCBtb2NrIHRoZSBiZWhhdmlvclxyXG4gICAgICBjb25zdCBtb2NrU1FMSW5qZWN0aW9uVGVzdCA9IGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nIGFzIGFueSwgJ3Rlc3RTUUxJbmplY3Rpb24nKTtcclxuICAgICAgbW9ja1NRTEluamVjdGlvblRlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHRlc3RJZDogJ3NxbC10ZXN0LTEnLFxyXG4gICAgICAgIHRlc3ROYW1lOiAnU1FMIEluamVjdGlvbiBUZXN0JyxcclxuICAgICAgICBjYXRlZ29yeTogJ0FQSV9TRUNVUklUWScsXHJcbiAgICAgICAgc3RhdHVzOiAnUEFTUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTm8gU1FMIGluamVjdGlvbiB2dWxuZXJhYmlsaXRpZXMgZm91bmQnLFxyXG4gICAgICAgIGZpbmRpbmdzOiBbXSxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBleGVjdXRpb25UaW1lOiAxMDAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC52dWxuZXJhYmlsaXRpZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGF1dGhlbnRpY2F0aW9uIGJ5cGFzcyB2dWxuZXJhYmlsaXRpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tBdXRoVGVzdCA9IGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nIGFzIGFueSwgJ3Rlc3RBdXRoZW50aWNhdGlvbkJ5cGFzcycpO1xyXG4gICAgICBtb2NrQXV0aFRlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHRlc3RJZDogJ2F1dGgtdGVzdC0xJyxcclxuICAgICAgICB0ZXN0TmFtZTogJ0F1dGhlbnRpY2F0aW9uIEJ5cGFzcyBUZXN0JyxcclxuICAgICAgICBjYXRlZ29yeTogJ0FQSV9TRUNVUklUWScsXHJcbiAgICAgICAgc3RhdHVzOiAnUEFTUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRpb24gcHJvcGVybHkgZW5mb3JjZWQnLFxyXG4gICAgICAgIGZpbmRpbmdzOiBbXSxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBleGVjdXRpb25UaW1lOiAxNTAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGlhbmNlU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxpYW5jZVNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgcmF0ZSBsaW1pdGluZyBpbXBsZW1lbnRhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1JhdGVMaW1pdFRlc3QgPSBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZyBhcyBhbnksICd0ZXN0UmF0ZUxpbWl0aW5nJyk7XHJcbiAgICAgIG1vY2tSYXRlTGltaXRUZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICB0ZXN0SWQ6ICdyYXRlLXRlc3QtMScsXHJcbiAgICAgICAgdGVzdE5hbWU6ICdSYXRlIExpbWl0aW5nIFRlc3QnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnQVBJX1NFQ1VSSVRZJyxcclxuICAgICAgICBzdGF0dXM6ICdQQVNTJyxcclxuICAgICAgICBzZXZlcml0eTogJ0xPVycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdSYXRlIGxpbWl0aW5nIHByb3Blcmx5IGltcGxlbWVudGVkJyxcclxuICAgICAgICBmaW5kaW5nczogW10sXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMjAwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVjb21tZW5kYXRpb25zKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29tcGxpYW5jZSBUZXN0aW5nIFNlcnZpY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgT1dBU1AgVG9wIDEwIGNvbXBsaWFuY2UgdGVzdGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGxpYW5jZVRlc3RpbmdTZXJ2aWNlLmV4ZWN1dGVDb21wbGlhbmNlVGVzdCgnT1dBU1BfVE9QXzEwJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncmVwb3J0SWQnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YW5kYXJkSWQnLCAnT1dBU1BfVE9QXzEwJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGFuZGFyZE5hbWUnLCAnT1dBU1AgVG9wIDEwJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdvdmVyYWxsU2NvcmUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29udHJvbFJlc3VsdHMnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2dhcEFuYWx5c2lzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZWNvbW1lbmRhdGlvbnMnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0Lm92ZXJhbGxTY29yZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQub3ZlcmFsbFNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm92ZXJhbGxTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xyXG4gICAgICBleHBlY3QoWydDT01QTElBTlQnLCAnTk9OX0NPTVBMSUFOVCcsICdQQVJUSUFMJ10pLnRvQ29udGFpbihyZXN1bHQuc3RhdHVzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBJU08gMjcwMDEgY29tcGxpYW5jZSB0ZXN0aW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGlhbmNlVGVzdGluZ1NlcnZpY2UuZXhlY3V0ZUNvbXBsaWFuY2VUZXN0KCdJU09fMjcwMDEnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmRJZCkudG9CZSgnSVNPXzI3MDAxJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmROYW1lKS50b0JlKCdJU08vSUVDIDI3MDAxJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udHJvbFJlc3VsdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayB0aGF0IGVhY2ggY29udHJvbCByZXN1bHQgaGFzIHJlcXVpcmVkIHByb3BlcnRpZXNcclxuICAgICAgcmVzdWx0LmNvbnRyb2xSZXN1bHRzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGNvbnRyb2wpLnRvSGF2ZVByb3BlcnR5KCdjb250cm9sSWQnKTtcclxuICAgICAgICBleHBlY3QoY29udHJvbCkudG9IYXZlUHJvcGVydHkoJ2NvbnRyb2xOYW1lJyk7XHJcbiAgICAgICAgZXhwZWN0KGNvbnRyb2wpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnKTtcclxuICAgICAgICBleHBlY3QoY29udHJvbCkudG9IYXZlUHJvcGVydHkoJ3Njb3JlJyk7XHJcbiAgICAgICAgZXhwZWN0KGNvbnRyb2wpLnRvSGF2ZVByb3BlcnR5KCdtYXhTY29yZScpO1xyXG4gICAgICAgIGV4cGVjdChbJ1BBU1MnLCAnRkFJTCcsICdQQVJUSUFMJ10pLnRvQ29udGFpbihjb250cm9sLnN0YXR1cyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIFNPQyAyIGNvbXBsaWFuY2UgdGVzdGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGxpYW5jZVRlc3RpbmdTZXJ2aWNlLmV4ZWN1dGVDb21wbGlhbmNlVGVzdCgnU09DXzInKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmRJZCkudG9CZSgnU09DXzInKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZE5hbWUpLnRvQmUoJ1NPQyAyIFR5cGUgSUknKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXF1aXJlZFNjb3JlKS50b0JlKDkwKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNPQyAyIHNob3VsZCBoYXZlIGhpZ2ggY29tcGxpYW5jZSByZXF1aXJlbWVudHNcclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXF1aXJlZFNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDkwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBjdXN0b20gY3J5cHRvIHRyYWRpbmcgc2VjdXJpdHkgY29tcGxpYW5jZSB0ZXN0aW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGlhbmNlVGVzdGluZ1NlcnZpY2UuZXhlY3V0ZUNvbXBsaWFuY2VUZXN0KCdDUllQVE9fVFJBRElOR19TRUNVUklUWScpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZElkKS50b0JlKCdDUllQVE9fVFJBRElOR19TRUNVUklUWScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YW5kYXJkTmFtZSkudG9CZSgnQ3J5cHRvIFRyYWRpbmcgU2VjdXJpdHkgRnJhbWV3b3JrJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVxdWlyZWRTY29yZSkudG9CZSg5NSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBmb3IgY3J5cHRvLXNwZWNpZmljIGNvbnRyb2xzXHJcbiAgICAgIGNvbnN0IGNvbnRyb2xJZHMgPSByZXN1bHQuY29udHJvbFJlc3VsdHMubWFwKGMgPT4gYy5jb250cm9sSWQpO1xyXG4gICAgICBleHBlY3QoY29udHJvbElkcykudG9Db250YWluKCdDVFMuMS4xJyk7IC8vIEFQSSBLZXkgU2VjdXJpdHlcclxuICAgICAgZXhwZWN0KGNvbnRyb2xJZHMpLnRvQ29udGFpbignQ1RTLjIuMScpOyAvLyBUcmFkaW5nIEFsZ29yaXRobSBTZWN1cml0eVxyXG4gICAgICBleHBlY3QoY29udHJvbElkcykudG9Db250YWluKCdDVFMuMy4xJyk7IC8vIFJpc2sgTWFuYWdlbWVudCBDb250cm9sc1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBnYXAgYW5hbHlzaXMgZm9yIG5vbi1jb21wbGlhbnQgc3RhbmRhcmRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGlhbmNlVGVzdGluZ1NlcnZpY2UuZXhlY3V0ZUNvbXBsaWFuY2VUZXN0KCdPV0FTUF9UT1BfMTAnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2FwQW5hbHlzaXMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5nYXBBbmFseXNpcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocmVzdWx0LnN0YXR1cyAhPT0gJ0NPTVBMSUFOVCcpIHtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmdhcEFuYWx5c2lzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJlc3VsdC5nYXBBbmFseXNpcy5mb3JFYWNoKGdhcCA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgnY29udHJvbElkJyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgnY29udHJvbE5hbWUnKTtcclxuICAgICAgICAgIGV4cGVjdChnYXApLnRvSGF2ZVByb3BlcnR5KCdjdXJyZW50U2NvcmUnKTtcclxuICAgICAgICAgIGV4cGVjdChnYXApLnRvSGF2ZVByb3BlcnR5KCdyZXF1aXJlZFNjb3JlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgnZ2FwJyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgncHJpb3JpdHknKTtcclxuICAgICAgICAgIGV4cGVjdChnYXApLnRvSGF2ZVByb3BlcnR5KCdyZW1lZGlhdGlvbicpO1xyXG4gICAgICAgICAgZXhwZWN0KFsnTE9XJywgJ01FRElVTScsICdISUdIJywgJ0NSSVRJQ0FMJ10pLnRvQ29udGFpbihnYXAucHJpb3JpdHkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgYWN0aW9uYWJsZSByZWNvbW1lbmRhdGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXBsaWFuY2VUZXN0aW5nU2VydmljZS5leGVjdXRlQ29tcGxpYW5jZVRlc3QoJ09XQVNQX1RPUF8xMCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZWNvbW1lbmRhdGlvbnMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnJlY29tbWVuZGF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFJlY29tbWVuZGF0aW9ucyBzaG91bGQgYmUgc3RyaW5nc1xyXG4gICAgICByZXN1bHQucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjb21tZW5kYXRpb24gPT4ge1xyXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmVjb21tZW5kYXRpb24pLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Z1bG5lcmFiaWxpdHkgU2Nhbm5pbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHNjYW4gZm9yIGRlcGVuZGVuY3kgdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZW5ldHJhdGlvblRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiBkZXBlbmRlbmN5IHNjYW5uaW5nIHdhcyBwZXJmb3JtZWRcclxuICAgICAgY29uc3QgZGVwZW5kZW5jeVZ1bG5zID0gcmVzdWx0LnZ1bG5lcmFiaWxpdGllcy5maWx0ZXIodiA9PiBcclxuICAgICAgICB2LnR5cGUgPT09ICdERVBFTkRFTkNZX1ZVTE5FUkFCSUxJVFknXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTaG91bGQgaGF2ZSBzY2FubmVkIGRlcGVuZGVuY2llcyAobWF5IG9yIG1heSBub3QgZmluZCB2dWxuZXJhYmlsaXRpZXMpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudnVsbmVyYWJpbGl0aWVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzY2FuIGZvciBjb25maWd1cmF0aW9uIHNlY3VyaXR5IGlzc3VlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgY29uZmlndXJhdGlvbiBzY2FubmluZyB3YXMgcGVyZm9ybWVkXHJcbiAgICAgIGNvbnN0IGNvbmZpZ1Z1bG5zID0gcmVzdWx0LnZ1bG5lcmFiaWxpdGllcy5maWx0ZXIodiA9PiBcclxuICAgICAgICB2LnR5cGUgPT09ICdDT05GSUdVUkFUSU9OJyB8fCB2LnR5cGUgPT09ICdTRUNVUklUWV9IRUFERVJTJ1xyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gQ29uZmlndXJhdGlvbiBzY2FubmluZyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcG9ydFxyXG4gICAgICBleHBlY3QocmVzdWx0LnZ1bG5lcmFiaWxpdGllcykudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2NhbiBmb3IgaGFyZGNvZGVkIHNlY3JldHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHNlY3JldCBzY2FubmluZyB3YXMgcGVyZm9ybWVkXHJcbiAgICAgIGNvbnN0IHNlY3JldFZ1bG5zID0gcmVzdWx0LnZ1bG5lcmFiaWxpdGllcy5maWx0ZXIodiA9PiBcclxuICAgICAgICB2LnR5cGUgPT09ICdIQVJEQ09ERURfU0VDUkVUJyB8fCB2LnR5cGUgPT09ICdDUkVERU5USUFMX0VYUE9TVVJFJ1xyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gU2VjcmV0IHNjYW5uaW5nIHNob3VsZCBiZSBwYXJ0IG9mIHRoZSBjb21wcmVoZW5zaXZlIHNjYW5cclxuICAgICAgZXhwZWN0KHJlc3VsdC52dWxuZXJhYmlsaXRpZXMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgc2V2ZXJpdHktYmFzZWQgdnVsbmVyYWJpbGl0eSBjbGFzc2lmaWNhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgdnVsbmVyYWJpbGl0eSBzZXZlcml0eSBkaXN0cmlidXRpb25cclxuICAgICAgZXhwZWN0KHJlc3VsdC5jcml0aWNhbENvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmhpZ2hDb3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZWRpdW1Db3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5sb3dDb3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFRvdGFsIHNob3VsZCBtYXRjaCBzdW0gb2Ygc2V2ZXJpdHkgY291bnRzXHJcbiAgICAgIGNvbnN0IHNldmVyaXR5U3VtID0gcmVzdWx0LmNyaXRpY2FsQ291bnQgKyByZXN1bHQuaGlnaENvdW50ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubWVkaXVtQ291bnQgKyByZXN1bHQubG93Q291bnQ7XHJcbiAgICAgIGV4cGVjdChzZXZlcml0eVN1bSkudG9CZShyZXN1bHQudG90YWxWdWxuZXJhYmlsaXRpZXMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBUZXN0IEludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBpbnRlZ3JhdGUgd2l0aCB0aHJlYXQgZGV0ZWN0aW9uIGVuZ2luZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gVGVzdCB0aGF0IHNlY3VyaXR5IHRlc3RpbmcgaW50ZWdyYXRlcyB3aXRoIHRocmVhdCBkZXRlY3Rpb25cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHRocmVhdERldGVjdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaW50ZWdyYXRlIHdpdGggaW5jaWRlbnQgcmVzcG9uc2Ugc3lzdGVtJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjcml0aWNhbFJlcG9ydDogVnVsbmVyYWJpbGl0eVJlcG9ydCA9IHtcclxuICAgICAgICBzY2FuSWQ6ICdpbnRlZ3JhdGlvbi10ZXN0JyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdG90YWxWdWxuZXJhYmlsaXRpZXM6IDEsXHJcbiAgICAgICAgY3JpdGljYWxDb3VudDogMSxcclxuICAgICAgICBoaWdoQ291bnQ6IDAsXHJcbiAgICAgICAgbWVkaXVtQ291bnQ6IDAsXHJcbiAgICAgICAgbG93Q291bnQ6IDAsXHJcbiAgICAgICAgdnVsbmVyYWJpbGl0aWVzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnY3JpdGljYWwtaW50ZWdyYXRpb24nLFxyXG4gICAgICAgICAgICB0eXBlOiAnQ1JJVElDQUxfVlVMTkVSQUJJTElUWScsXHJcbiAgICAgICAgICAgIHNldmVyaXR5OiAnQ1JJVElDQUwnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NyaXRpY2FsIHNlY3VyaXR5IGlzc3VlIGRldGVjdGVkJyxcclxuICAgICAgICAgICAgbG9jYXRpb246ICdUZXN0IGxvY2F0aW9uJyxcclxuICAgICAgICAgICAgZXZpZGVuY2U6ICdUZXN0IGV2aWRlbmNlJyxcclxuICAgICAgICAgICAgcmVtZWRpYXRpb246ICdUZXN0IHJlbWVkaWF0aW9uJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgY29tcGxpYW5jZVNjb3JlOiAyMCxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnSW1tZWRpYXRlIGFjdGlvbiByZXF1aXJlZCddXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZywgJ2V4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZScpLm1vY2tSZXNvbHZlZFZhbHVlKGNyaXRpY2FsUmVwb3J0KTtcclxuICAgICAgamVzdC5zcHlPbihpbmNpZGVudFJlc3BvbnNlLCAnY3JlYXRlSW5jaWRlbnQnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6ICdpbnRlZ3JhdGlvbi1pbmNpZGVudCcsXHJcbiAgICAgICAgdHlwZTogJ0NSSVRJQ0FMX1ZVTE5FUkFCSUxJVElFUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdJbnRlZ3JhdGlvbiB0ZXN0IGluY2lkZW50JyxcclxuICAgICAgICBzb3VyY2U6ICdUZXN0JyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc3RhdHVzOiAnREVURUNURUQnLFxyXG4gICAgICAgIGV2aWRlbmNlOiBbXSxcclxuICAgICAgICByZXNwb25zZUFjdGlvbnM6IFtdXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgYXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RzT25EZW1hbmQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChpbmNpZGVudFJlc3BvbnNlLmNyZWF0ZUluY2lkZW50KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGludGVncmF0ZSB3aXRoIG5vdGlmaWNhdGlvbiBzeXN0ZW0nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpZ2hTZXZlcml0eVJlcG9ydDogVnVsbmVyYWJpbGl0eVJlcG9ydCA9IHtcclxuICAgICAgICBzY2FuSWQ6ICdub3RpZmljYXRpb24tdGVzdCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHRvdGFsVnVsbmVyYWJpbGl0aWVzOiAzLFxyXG4gICAgICAgIGNyaXRpY2FsQ291bnQ6IDAsXHJcbiAgICAgICAgaGlnaENvdW50OiAzLFxyXG4gICAgICAgIG1lZGl1bUNvdW50OiAwLFxyXG4gICAgICAgIGxvd0NvdW50OiAwLFxyXG4gICAgICAgIHZ1bG5lcmFiaWxpdGllczogW10sXHJcbiAgICAgICAgY29tcGxpYW5jZVNjb3JlOiA2MCxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnQWRkcmVzcyBoaWdoIHNldmVyaXR5IGlzc3VlcyddXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZywgJ2V4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZScpLm1vY2tSZXNvbHZlZFZhbHVlKGhpZ2hTZXZlcml0eVJlcG9ydCk7XHJcbiAgICAgIGplc3Quc3B5T24obm90aWZpY2F0aW9ucywgJ3NlbmRBbGVydCcpLm1vY2tSZXNvbHZlZFZhbHVlKCk7XHJcblxyXG4gICAgICBhd2FpdCBhdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdHNPbkRlbWFuZCgpO1xyXG5cclxuICAgICAgZXhwZWN0KG5vdGlmaWNhdGlvbnMuc2VuZEFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICB0aXRsZTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ0hpZ2ggU2V2ZXJpdHknKSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnSElHSCdcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBUZXN0IFJlcG9ydGluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBzZWN1cml0eSByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZW5ldHJhdGlvblRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc2NhbklkJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVnVsbmVyYWJpbGl0aWVzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjcml0aWNhbENvdW50Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdoaWdoQ291bnQnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lZGl1bUNvdW50Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdsb3dDb3VudCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndnVsbmVyYWJpbGl0aWVzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGlhbmNlU2NvcmUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgcmVwb3J0IHN0cnVjdHVyZVxyXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5zY2FuSWQpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnRvdGFsVnVsbmVyYWJpbGl0aWVzKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY29tcGxpYW5jZVNjb3JlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnZ1bG5lcmFiaWxpdGllcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzYXZlIHJlcG9ydHMgdG8gY29uZmlndXJlZCBvdXRwdXQgZGlyZWN0b3J5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBhdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdHNPbkRlbWFuZCgpO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgcmVwb3J0IGZpbGVzIHdlcmUgY3JlYXRlZFxyXG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIodGVzdE91dHB1dERpcik7XHJcbiAgICAgIGNvbnN0IHJlcG9ydEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5zdGFydHNXaXRoKCdzZWN1cml0eS1yZXBvcnQtJykpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlcG9ydEZpbGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgcmVwb3J0IGZpbGUgY29udGVudFxyXG4gICAgICBpZiAocmVwb3J0RmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHJlcG9ydENvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShcclxuICAgICAgICAgIHBhdGguam9pbih0ZXN0T3V0cHV0RGlyLCByZXBvcnRGaWxlc1swXSksIFxyXG4gICAgICAgICAgJ3V0Zi04J1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgcmVwb3J0RGF0YSA9IEpTT04ucGFyc2UocmVwb3J0Q29udGVudCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KHJlcG9ydERhdGEpLnRvSGF2ZVByb3BlcnR5KCdleGVjdXRpb24nKTtcclxuICAgICAgICBleHBlY3QocmVwb3J0RGF0YSkudG9IYXZlUHJvcGVydHkoJ3JlcG9ydCcpO1xyXG4gICAgICAgIGV4cGVjdChyZXBvcnREYXRhKS50b0hhdmVQcm9wZXJ0eSgnbWV0YWRhdGEnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjbGVhbiB1cCBvbGQgcmVwb3J0cyBiYXNlZCBvbiByZXRlbnRpb24gcG9saWN5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgb2xkIHRlc3QgZmlsZXNcclxuICAgICAgY29uc3Qgb2xkRmlsZU5hbWUgPSBgc2VjdXJpdHktcmVwb3J0LW9sZC0ke0RhdGUubm93KCkgLSA4NjQwMDAwMCAqIDMxfS5qc29uYDsgLy8gMzEgZGF5cyBvbGRcclxuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKFxyXG4gICAgICAgIHBhdGguam9pbih0ZXN0T3V0cHV0RGlyLCBvbGRGaWxlTmFtZSksXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyB0ZXN0OiAnb2xkIHJlcG9ydCcgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEV4ZWN1dGUgc2VjdXJpdHkgdGVzdCAod2hpY2ggc2hvdWxkIHRyaWdnZXIgY2xlYW51cClcclxuICAgICAgYXdhaXQgYXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RzT25EZW1hbmQoKTtcclxuXHJcbiAgICAgIC8vIFdhaXQgYSBiaXQgZm9yIGNsZWFudXAgdG8gY29tcGxldGVcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIG9sZCBmaWxlIHdhcyBjbGVhbmVkIHVwXHJcbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgZnMucmVhZGRpcih0ZXN0T3V0cHV0RGlyKTtcclxuICAgICAgZXhwZWN0KGZpbGVzKS5ub3QudG9Db250YWluKG9sZEZpbGVOYW1lKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIFJlc2lsaWVuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIG5ldHdvcmsgZXJyb3JcclxuICAgICAgamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcgYXMgYW55LCAnc2VuZFRlc3RSZXF1ZXN0JykubW9ja1JlamVjdGVkVmFsdWUoXHJcbiAgICAgICAgbmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJylcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBzdGlsbCByZXR1cm4gYSByZXBvcnQgZXZlbiB3aXRoIG5ldHdvcmsgZXJyb3JzXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzY2FuSWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRpbWVvdXQgZXJyb3JzIGFwcHJvcHJpYXRlbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgdGltZW91dCBlcnJvclxyXG4gICAgICBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZyBhcyBhbnksICdzZW5kVGVzdFJlcXVlc3QnKS5tb2NrSW1wbGVtZW50YXRpb24oXHJcbiAgICAgICAgKCkgPT4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4gXHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1RpbWVvdXQnKSksIDEwMClcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZW5ldHJhdGlvblRlc3RpbmcuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QobG9nZ2VyLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNvbnRpbnVlIHRlc3RpbmcgYWZ0ZXIgaW5kaXZpZHVhbCB0ZXN0IGZhaWx1cmVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIHNvbWUgdGVzdHMgdG8gZmFpbFxyXG4gICAgICBsZXQgY2FsbENvdW50ID0gMDtcclxuICAgICAgamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcgYXMgYW55LCAndGVzdFNRTEluamVjdGlvbicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgICAgY2FsbENvdW50Kys7XHJcbiAgICAgICAgaWYgKGNhbGxDb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXN0IGZhaWx1cmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XHJcbiAgICAgICAgICB0ZXN0SWQ6ICd0ZXN0LTEnLFxyXG4gICAgICAgICAgdGVzdE5hbWU6ICdUZXN0JyxcclxuICAgICAgICAgIGNhdGVnb3J5OiAnQVBJX1NFQ1VSSVRZJyxcclxuICAgICAgICAgIHN0YXR1czogJ1BBU1MnLFxyXG4gICAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IHBhc3NlZCcsXHJcbiAgICAgICAgICBmaW5kaW5nczogW10sXHJcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgZXhlY3V0aW9uVGltZTogMTAwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBjb21wbGV0ZSBkZXNwaXRlIGluZGl2aWR1YWwgdGVzdCBmYWlsdXJlc1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsVnVsbmVyYWJpbGl0aWVzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==