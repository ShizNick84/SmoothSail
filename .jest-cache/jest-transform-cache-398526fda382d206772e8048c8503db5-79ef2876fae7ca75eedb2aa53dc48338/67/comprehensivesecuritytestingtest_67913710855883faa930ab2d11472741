b2d18608dfc1f1ebba4ef4937fec8282
"use strict";
/**
 * =============================================================================
 * COMPREHENSIVE SECURITY TESTING SUITE - TASK 12.3 IMPLEMENTATION
 * =============================================================================
 *
 * Complete implementation of automated security testing suite, penetration
 * testing for API endpoints, vulnerability scanning and assessment, and
 * security compliance testing and validation as required by task 12.3.
 *
 * Features:
 * - Automated security testing suite
 * - Penetration testing for API endpoints
 * - Vulnerability scanning and assessment
 * - Security compliance testing and validation
 * - Real-time security monitoring integration
 * - Comprehensive security reporting
 *
 * Requirements: 25.7 - Create security and penetration testing
 *
 * @author AI Crypto Trading System
 * @version 1.0.0
 * @license PROPRIETARY
 * =============================================================================
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock external dependencies for testing
jest.mock('../../core/logging/logger');
jest.mock('../../core/notifications/notification-service');
jest.mock('axios');
jest.mock('child_process');
const logger_1 = require("../../core/logging/logger");
const security_test_orchestrator_1 = require("../../security/security-test-orchestrator");
const penetration_testing_service_1 = require("../../security/penetration-testing-service");
const vulnerability_scanner_service_1 = require("../../security/vulnerability-scanner-service");
const compliance_testing_1 = require("../../security/compliance-testing");
const automated_security_testing_1 = require("../../security/automated-security-testing");
const threat_detection_engine_1 = require("../../security/threat-detection-engine");
const incident_response_service_1 = require("../../security/incident-response-service");
const notification_service_1 = require("../../core/notifications/notification-service");
const encryption_service_1 = require("../../security/encryption-service");
const security_monitoring_service_1 = require("../../security/security-monitoring-service");
const crypto = __importStar(require("crypto"));
const fs = __importStar(require("fs/promises"));
const path = __importStar(require("path"));
const os = __importStar(require("os"));
describe('Comprehensive Security Testing Suite - Task 12.3', () => {
    let logger;
    let securityOrchestrator;
    let penetrationTesting;
    let vulnerabilityScanner;
    let complianceTesting;
    let automatedTesting;
    let threatDetection;
    let incidentResponse;
    let notifications;
    let encryptionService;
    let securityMonitoring;
    let testOutputDir;
    beforeAll(async () => {
        // Set up test environment
        process.env.NODE_ENV = 'test';
        process.env.MASTER_ENCRYPTION_KEY = crypto.randomBytes(32).toString('hex');
        process.env.GATE_IO_API_KEY = 'test_api_key';
        process.env.GATE_IO_SECRET_KEY = 'test_secret_key';
        // Create temporary test output directory
        testOutputDir = path.join(os.tmpdir(), 'comprehensive-security-test-output');
        await fs.mkdir(testOutputDir, { recursive: true });
    });
    beforeEach(async () => {
        // Initialize all security services
        logger = new logger_1.Logger();
        encryptionService = new encryption_service_1.EncryptionService(logger);
        threatDetection = new threat_detection_engine_1.ThreatDetectionEngine(logger);
        securityMonitoring = new security_monitoring_service_1.SecurityMonitoringService(logger);
        notifications = new notification_service_1.NotificationService(logger);
        incidentResponse = new incident_response_service_1.IncidentResponseService(logger, notifications);
        vulnerabilityScanner = new vulnerability_scanner_service_1.VulnerabilityScannerService(logger);
        complianceTesting = new compliance_testing_1.ComplianceTestingService(logger);
        // Configure penetration testing
        const penetrationConfig = {
            targetEndpoints: [
                'http://localhost:3000/api/v4/spot/time',
                'http://localhost:3000/api/v4/spot/accounts',
                'http://localhost:3000/api/v4/spot/orders',
                'http://localhost:3000/api/dashboard/status',
                'http://localhost:3000/api/trading/positions',
                'http://localhost:3000/api/auth/login',
                'http://localhost:3000/api/security/status'
            ],
            testTypes: [
                'sql_injection',
                'xss',
                'authentication_bypass',
                'authorization_escalation',
                'input_validation',
                'rate_limiting',
                'tls_security',
                'csrf',
                'command_injection',
                'path_traversal'
            ],
            maxConcurrentTests: 10,
            timeoutMs: 30000,
            enableDestructiveTesting: false,
            complianceStandards: ['OWASP_TOP_10', 'ISO_27001', 'SOC_2', 'CRYPTO_TRADING_SECURITY']
        };
        penetrationTesting = new penetration_testing_service_1.PenetrationTestingService(logger, encryptionService, threatDetection, penetrationConfig);
        // Configure automated security testing
        const securityTestConfig = {
            schedules: [
                {
                    id: 'comprehensive-daily-scan',
                    name: 'Comprehensive Daily Security Scan',
                    cronExpression: '0 2 * * *',
                    testTypes: ['penetration', 'vulnerability', 'compliance', 'dependency'],
                    enabled: true
                },
                {
                    id: 'weekly-deep-scan',
                    name: 'Weekly Deep Security Assessment',
                    cronExpression: '0 1 * * 0',
                    testTypes: ['full_penetration', 'deep_vulnerability', 'full_compliance', 'threat_modeling'],
                    enabled: true
                },
                {
                    id: 'pre-deployment-validation',
                    name: 'Pre-Deployment Security Validation',
                    cronExpression: '',
                    testTypes: ['penetration', 'vulnerability', 'compliance'],
                    enabled: true
                }
            ],
            reportingConfig: {
                outputDirectory: testOutputDir,
                retentionDays: 90,
                emailReports: true,
                slackIntegration: false
            },
            alertingConfig: {
                criticalThreshold: 1,
                highThreshold: 3,
                emailAlerts: true,
                immediateNotification: true
            },
            integrationConfig: {
                cicdIntegration: true,
                webhookUrl: 'http://localhost:3000/api/security/webhook',
                apiKey: 'test-security-api-key'
            }
        };
        automatedTesting = new automated_security_testing_1.AutomatedSecurityTestingSuite(logger, penetrationTesting, securityMonitoring, incidentResponse, notifications, securityTestConfig);
        // Initialize security test orchestrator
        securityOrchestrator = new security_test_orchestrator_1.SecurityTestOrchestrator(logger, penetrationTesting, vulnerabilityScanner, complianceTesting, automatedTesting, threatDetection, incidentResponse, notifications);
        // Clear all mocks
        jest.clearAllMocks();
    });
    afterEach(async () => {
        // Clean up test files
        try {
            const files = await fs.readdir(testOutputDir);
            for (const file of files) {
                await fs.unlink(path.join(testOutputDir, file));
            }
        }
        catch (error) {
            // Ignore cleanup errors
        }
    });
    afterAll(async () => {
        // Clean up test environment
        delete process.env.MASTER_ENCRYPTION_KEY;
        delete process.env.GATE_IO_API_KEY;
        delete process.env.GATE_IO_SECRET_KEY;
        delete process.env.NODE_ENV;
        try {
            await fs.rmdir(testOutputDir);
        }
        catch (error) {
            // Ignore cleanup errors
        }
    });
    describe('1. Automated Security Testing Suite', () => {
        it('should initialize automated security testing suite successfully', async () => {
            await expect(automatedTesting.initialize()).resolves.not.toThrow();
            expect(logger.info).toHaveBeenCalledWith('Automated security testing suite initialized successfully', expect.any(Object));
        });
        it('should execute comprehensive security test suite', async () => {
            const result = await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            expect(result).toBeDefined();
            expect(result.executionId).toBeDefined();
            expect(result.status).toBe('COMPLETED');
            expect(result.testResults).toBeDefined();
            expect(Array.isArray(result.testResults)).toBe(true);
            expect(result.overallRiskScore).toBeGreaterThanOrEqual(0);
            expect(result.complianceScore).toBeGreaterThanOrEqual(0);
        });
        it('should execute all security test types', async () => {
            const testTypes = [
                security_test_orchestrator_1.SecurityTestType.PENETRATION_TESTING,
                security_test_orchestrator_1.SecurityTestType.VULNERABILITY_SCANNING,
                security_test_orchestrator_1.SecurityTestType.COMPLIANCE_TESTING,
                security_test_orchestrator_1.SecurityTestType.DEPENDENCY_AUDIT,
                security_test_orchestrator_1.SecurityTestType.CODE_ANALYSIS,
                security_test_orchestrator_1.SecurityTestType.CONFIGURATION_REVIEW,
                security_test_orchestrator_1.SecurityTestType.NETWORK_SECURITY,
                security_test_orchestrator_1.SecurityTestType.THREAT_MODELING
            ];
            for (const testType of testTypes) {
                const result = await securityOrchestrator.executeSecurityTest(testType, 'test-execution');
                expect(result).toBeDefined();
                expect(result.testType).toBe(testType);
                expect(['PASS', 'FAIL', 'WARNING', 'ERROR']).toContain(result.status);
                expect(typeof result.executionTime).toBe('number');
                expect(typeof result.riskScore).toBe('number');
            }
        });
        it('should handle parallel test execution', async () => {
            const result = await securityOrchestrator.executeSecurityTestSuite('weekly-comprehensive-scan');
            expect(result).toBeDefined();
            expect(result.testResults.length).toBeGreaterThan(0);
            expect(result.status).toBe('COMPLETED');
            // Verify all test types were executed
            const executedTestTypes = result.testResults.map(r => r.testType);
            expect(executedTestTypes.length).toBeGreaterThan(0);
        });
        it('should generate comprehensive security dashboard', async () => {
            // Execute a few test suites to populate data
            await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            const dashboard = securityOrchestrator.getSecurityDashboard();
            expect(dashboard).toBeDefined();
            expect(dashboard.lastUpdated).toBeInstanceOf(Date);
            expect(dashboard.overallSecurityScore).toBeGreaterThanOrEqual(0);
            expect(dashboard.overallSecurityScore).toBeLessThanOrEqual(100);
            expect(['LOW', 'MEDIUM', 'HIGH', 'CRITICAL']).toContain(dashboard.riskLevel);
            expect(dashboard.vulnerabilities).toBeDefined();
            expect(dashboard.complianceStatus).toBeDefined();
            expect(Array.isArray(dashboard.recentExecutions)).toBe(true);
            expect(Array.isArray(dashboard.trendData)).toBe(true);
        });
    });
    describe('2. Penetration Testing for API Endpoints', () => {
        it('should test all configured API endpoints', async () => {
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(result).toBeDefined();
            expect(result.scanId).toBeDefined();
            expect(result.vulnerabilities).toBeDefined();
            expect(Array.isArray(result.vulnerabilities)).toBe(true);
            expect(result.totalVulnerabilities).toBeGreaterThanOrEqual(0);
        });
        it('should test for SQL injection vulnerabilities', async () => {
            const mockSQLTest = jest.spyOn(penetrationTesting, 'testSQLInjection');
            mockSQLTest.mockResolvedValue({
                testId: 'sql-injection-test',
                testName: 'SQL Injection Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'No SQL injection vulnerabilities detected',
                findings: [],
                recommendations: ['Continue using parameterized queries'],
                timestamp: new Date(),
                executionTime: 2000
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockSQLTest).toHaveBeenCalled();
            expect(result.vulnerabilities).toBeDefined();
        });
        it('should test for XSS vulnerabilities', async () => {
            const mockXSSTest = jest.spyOn(penetrationTesting, 'testXSSVulnerabilities');
            mockXSSTest.mockResolvedValue({
                testId: 'xss-test',
                testName: 'XSS Vulnerability Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'No XSS vulnerabilities detected',
                findings: [],
                recommendations: ['Continue using output encoding'],
                timestamp: new Date(),
                executionTime: 1500
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockXSSTest).toHaveBeenCalled();
            expect(result.complianceScore).toBeGreaterThanOrEqual(0);
        });
        it('should test authentication bypass vulnerabilities', async () => {
            const mockAuthTest = jest.spyOn(penetrationTesting, 'testAuthenticationBypass');
            mockAuthTest.mockResolvedValue({
                testId: 'auth-bypass-test',
                testName: 'Authentication Bypass Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'Authentication properly enforced',
                findings: [],
                recommendations: ['Maintain current authentication controls'],
                timestamp: new Date(),
                executionTime: 3000
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockAuthTest).toHaveBeenCalled();
            expect(result.recommendations).toBeDefined();
        });
        it('should test rate limiting implementation', async () => {
            const mockRateLimitTest = jest.spyOn(penetrationTesting, 'testRateLimiting');
            mockRateLimitTest.mockResolvedValue({
                testId: 'rate-limit-test',
                testName: 'Rate Limiting Test',
                category: 'API_SECURITY',
                status: 'WARNING',
                severity: 'MEDIUM',
                description: 'Rate limiting could be improved',
                findings: [{
                        id: 'rate-limit-finding',
                        type: 'RATE_LIMITING',
                        severity: 'MEDIUM',
                        description: 'Some endpoints lack proper rate limiting',
                        location: '/api/trading/orders',
                        evidence: 'No 429 responses received',
                        remediation: 'Implement rate limiting middleware'
                    }],
                recommendations: ['Implement comprehensive rate limiting'],
                timestamp: new Date(),
                executionTime: 5000
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockRateLimitTest).toHaveBeenCalled();
            expect(result.mediumCount).toBeGreaterThanOrEqual(0);
        });
        it('should test TLS/HTTPS security configuration', async () => {
            const mockTLSTest = jest.spyOn(penetrationTesting, 'testTLSSecurity');
            mockTLSTest.mockResolvedValue({
                testId: 'tls-security-test',
                testName: 'TLS Security Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'TLS properly configured',
                findings: [],
                recommendations: ['Maintain current TLS configuration'],
                timestamp: new Date(),
                executionTime: 2500
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockTLSTest).toHaveBeenCalled();
            expect(result.totalVulnerabilities).toBeGreaterThanOrEqual(0);
        });
        it('should test input validation vulnerabilities', async () => {
            const mockInputTest = jest.spyOn(penetrationTesting, 'testInputValidation');
            mockInputTest.mockResolvedValue({
                testId: 'input-validation-test',
                testName: 'Input Validation Test',
                category: 'API_SECURITY',
                status: 'PASS',
                severity: 'LOW',
                description: 'Input validation properly implemented',
                findings: [],
                recommendations: ['Continue comprehensive input validation'],
                timestamp: new Date(),
                executionTime: 3500
            });
            const result = await penetrationTesting.executeSecurityTestSuite();
            expect(mockInputTest).toHaveBeenCalled();
            expect(result.lowCount).toBeGreaterThanOrEqual(0);
        });
    });
    describe('3. Vulnerability Scanning and Assessment', () => {
        it('should execute comprehensive vulnerability scan', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            expect(result).toBeDefined();
            expect(result.scanId).toBeDefined();
            expect(result.scanType).toBe('comprehensive_scan');
            expect(result.status).toBe('COMPLETED');
            expect(result.findings).toBeDefined();
            expect(Array.isArray(result.findings)).toBe(true);
            expect(result.summary).toBeDefined();
        });
        it('should scan for dependency vulnerabilities', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            // Check if dependency scanning was performed
            const dependencyFindings = result.findings.filter(f => f.type === 'DEPENDENCY_VULNERABILITY');
            expect(result.findings).toBeDefined();
            expect(result.summary.totalFindings).toBeGreaterThanOrEqual(0);
        });
        it('should scan for code vulnerabilities', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            // Check if code scanning was performed
            const codeFindings = result.findings.filter(f => ['SQL_INJECTION', 'XSS', 'COMMAND_INJECTION', 'HARDCODED_SECRET', 'WEAK_CRYPTOGRAPHY'].includes(f.type));
            expect(result.findings).toBeDefined();
            expect(result.summary.riskScore).toBeGreaterThanOrEqual(0);
            expect(result.summary.riskScore).toBeLessThanOrEqual(100);
        });
        it('should scan for configuration vulnerabilities', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            // Check if configuration scanning was performed
            const configFindings = result.findings.filter(f => ['CONFIGURATION_ERROR', 'INSECURE_TRANSPORT', 'WEAK_SESSION_SECRET', 'MISSING_SECURITY_HEADERS'].includes(f.type));
            expect(result.findings).toBeDefined();
            expect(result.summary.complianceScore).toBeGreaterThanOrEqual(0);
            expect(result.summary.complianceScore).toBeLessThanOrEqual(100);
        });
        it('should scan for network vulnerabilities', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            // Check if network scanning was performed
            const networkFindings = result.findings.filter(f => ['OPEN_PORT', 'MISSING_TLS_CONFIG', 'UNNECESSARY_SERVICE'].includes(f.type));
            expect(result.findings).toBeDefined();
            expect(result.summary.remediationPriority).toBeDefined();
            expect(Array.isArray(result.summary.remediationPriority)).toBe(true);
        });
        it('should provide vulnerability severity classification', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            expect(result.summary.criticalCount).toBeGreaterThanOrEqual(0);
            expect(result.summary.highCount).toBeGreaterThanOrEqual(0);
            expect(result.summary.mediumCount).toBeGreaterThanOrEqual(0);
            expect(result.summary.lowCount).toBeGreaterThanOrEqual(0);
            // Total should match sum of severity counts
            const severitySum = result.summary.criticalCount + result.summary.highCount +
                result.summary.mediumCount + result.summary.lowCount;
            expect(severitySum).toBe(result.summary.totalFindings);
        });
        it('should provide remediation priorities', async () => {
            const result = await vulnerabilityScanner.executeComprehensiveVulnerabilityScan();
            expect(result.summary.remediationPriority).toBeDefined();
            expect(Array.isArray(result.summary.remediationPriority)).toBe(true);
            if (result.summary.remediationPriority.length > 0) {
                result.summary.remediationPriority.forEach(item => {
                    expect(item).toHaveProperty('id');
                    expect(item).toHaveProperty('priority');
                    expect(item).toHaveProperty('title');
                    expect(item).toHaveProperty('description');
                    expect(item).toHaveProperty('effort');
                    expect(item).toHaveProperty('impact');
                    expect(item).toHaveProperty('steps');
                    expect(item).toHaveProperty('estimatedTime');
                    expect(['CRITICAL', 'HIGH', 'MEDIUM', 'LOW']).toContain(item.priority);
                    expect(['LOW', 'MEDIUM', 'HIGH']).toContain(item.effort);
                });
            }
        });
    });
    describe('4. Security Compliance Testing and Validation', () => {
        it('should test OWASP Top 10 compliance', async () => {
            const result = await complianceTesting.executeComplianceTest('OWASP_TOP_10');
            expect(result).toBeDefined();
            expect(result.standardId).toBe('OWASP_TOP_10');
            expect(result.standardName).toBe('OWASP Top 10');
            expect(result.overallScore).toBeGreaterThanOrEqual(0);
            expect(result.overallScore).toBeLessThanOrEqual(100);
            expect(['COMPLIANT', 'NON_COMPLIANT', 'PARTIAL']).toContain(result.status);
            expect(result.controlResults.length).toBe(10);
        });
        it('should test ISO 27001 compliance', async () => {
            const result = await complianceTesting.executeComplianceTest('ISO_27001');
            expect(result.standardId).toBe('ISO_27001');
            expect(result.standardName).toBe('ISO/IEC 27001');
            expect(result.requiredScore).toBe(85);
            expect(result.controlResults.length).toBeGreaterThan(0);
        });
        it('should test SOC 2 compliance', async () => {
            const result = await complianceTesting.executeComplianceTest('SOC_2');
            expect(result.standardId).toBe('SOC_2');
            expect(result.standardName).toBe('SOC 2 Type II');
            expect(result.requiredScore).toBe(90);
            expect(result.controlResults.length).toBeGreaterThan(0);
        });
        it('should test crypto trading security framework compliance', async () => {
            const result = await complianceTesting.executeComplianceTest('CRYPTO_TRADING_SECURITY');
            expect(result.standardId).toBe('CRYPTO_TRADING_SECURITY');
            expect(result.standardName).toBe('Crypto Trading Security Framework');
            expect(result.requiredScore).toBe(95);
            // Check for crypto-specific controls
            const controlIds = result.controlResults.map(c => c.controlId);
            expect(controlIds).toContain('CTS.1.1'); // API Key Security
            expect(controlIds).toContain('CTS.2.1'); // Trading Algorithm Security
            expect(controlIds).toContain('CTS.3.1'); // Risk Management Controls
            expect(controlIds).toContain('CTS.4.1'); // Market Data Integrity
            expect(controlIds).toContain('CTS.5.1'); // System Availability
        });
        it('should provide gap analysis for non-compliant standards', async () => {
            const result = await complianceTesting.executeComplianceTest('OWASP_TOP_10');
            expect(result.gapAnalysis).toBeDefined();
            expect(Array.isArray(result.gapAnalysis)).toBe(true);
            if (result.status !== 'COMPLIANT') {
                expect(result.gapAnalysis.length).toBeGreaterThan(0);
                result.gapAnalysis.forEach(gap => {
                    expect(gap).toHaveProperty('controlId');
                    expect(gap).toHaveProperty('controlName');
                    expect(gap).toHaveProperty('currentScore');
                    expect(gap).toHaveProperty('requiredScore');
                    expect(gap).toHaveProperty('gap');
                    expect(gap).toHaveProperty('priority');
                    expect(gap).toHaveProperty('remediation');
                    expect(['LOW', 'MEDIUM', 'HIGH', 'CRITICAL']).toContain(gap.priority);
                });
            }
        });
        it('should validate all compliance standards simultaneously', async () => {
            const standards = ['OWASP_TOP_10', 'ISO_27001', 'SOC_2', 'CRYPTO_TRADING_SECURITY'];
            const results = await Promise.all(standards.map(standard => complianceTesting.executeComplianceTest(standard)));
            expect(results).toHaveLength(4);
            results.forEach((result, index) => {
                expect(result.standardId).toBe(standards[index]);
                expect(result.overallScore).toBeGreaterThanOrEqual(0);
                expect(result.overallScore).toBeLessThanOrEqual(100);
                expect(result.controlResults.length).toBeGreaterThan(0);
            });
            // Verify compliance requirements are in ascending order
            expect(results[0].requiredScore).toBeLessThanOrEqual(results[1].requiredScore);
            expect(results[1].requiredScore).toBeLessThanOrEqual(results[2].requiredScore);
            expect(results[2].requiredScore).toBeLessThanOrEqual(results[3].requiredScore);
        });
    });
    describe('5. Security Test Integration and Orchestration', () => {
        it('should integrate with threat detection engine', async () => {
            const result = await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            expect(result).toBeDefined();
            expect(threatDetection).toBeDefined();
            expect(result.testResults.length).toBeGreaterThan(0);
        });
        it('should integrate with incident response system', async () => {
            // Mock critical findings to trigger incident response
            const mockPenetrationTest = jest.spyOn(penetrationTesting, 'executeSecurityTestSuite');
            mockPenetrationTest.mockResolvedValue({
                scanId: 'critical-test-scan',
                timestamp: new Date(),
                totalVulnerabilities: 2,
                criticalCount: 2,
                highCount: 0,
                mediumCount: 0,
                lowCount: 0,
                vulnerabilities: [
                    {
                        id: 'critical-vuln-1',
                        type: 'AUTHENTICATION_BYPASS',
                        severity: 'CRITICAL',
                        description: 'Critical authentication bypass detected',
                        location: '/api/trading/orders',
                        evidence: 'Endpoint accessible without authentication',
                        remediation: 'Implement proper authentication checks'
                    },
                    {
                        id: 'critical-vuln-2',
                        type: 'SQL_INJECTION',
                        severity: 'CRITICAL',
                        description: 'SQL injection vulnerability detected',
                        location: '/api/user/profile',
                        evidence: 'Malicious SQL payload executed',
                        remediation: 'Use parameterized queries'
                    }
                ],
                complianceScore: 25,
                recommendations: ['Immediate security review required']
            });
            jest.spyOn(incidentResponse, 'createIncident').mockResolvedValue({
                id: 'security-incident-123',
                type: 'CRITICAL_VULNERABILITIES',
                severity: 'CRITICAL',
                description: 'Critical security vulnerabilities detected',
                source: 'Automated Security Testing',
                timestamp: new Date(),
                status: 'DETECTED',
                evidence: [],
                responseActions: []
            });
            const result = await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            expect(result.criticalFindings).toBeGreaterThan(0);
            expect(incidentResponse.createIncident).toHaveBeenCalled();
        });
        it('should integrate with notification system', async () => {
            // Mock high severity findings to trigger notifications
            const mockVulnScan = jest.spyOn(vulnerabilityScanner, 'executeComprehensiveVulnerabilityScan');
            mockVulnScan.mockResolvedValue({
                scanId: 'high-severity-scan',
                scanType: 'comprehensive_scan',
                target: 'system',
                startTime: new Date(),
                endTime: new Date(),
                status: 'COMPLETED',
                findings: [
                    {
                        id: 'high-vuln-1',
                        type: 'DEPENDENCY_VULNERABILITY',
                        severity: 'HIGH',
                        description: 'High severity dependency vulnerability',
                        location: 'package.json',
                        evidence: 'Vulnerable package detected',
                        remediation: 'Update to latest version'
                    }
                ],
                summary: {
                    totalFindings: 3,
                    criticalCount: 0,
                    highCount: 3,
                    mediumCount: 0,
                    lowCount: 0,
                    riskScore: 60,
                    complianceScore: 70,
                    remediationPriority: []
                }
            });
            jest.spyOn(notifications, 'sendAlert').mockResolvedValue();
            const result = await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            expect(result.highFindings).toBeGreaterThan(0);
            expect(notifications.sendAlert).toHaveBeenCalledWith(expect.objectContaining({
                title: expect.stringContaining('High'),
                priority: 'HIGH'
            }));
        });
        it('should generate comprehensive remediation plans', async () => {
            const result = await securityOrchestrator.executeSecurityTestSuite('weekly-comprehensive-scan');
            expect(result.remediationPlan).toBeDefined();
            expect(result.remediationPlan.planId).toBeDefined();
            expect(['IMMEDIATE', 'HIGH', 'MEDIUM', 'LOW']).toContain(result.remediationPlan.priority);
            expect(result.remediationPlan.estimatedEffort).toBeDefined();
            expect(result.remediationPlan.timeline).toBeDefined();
            expect(Array.isArray(result.remediationPlan.tasks)).toBe(true);
            expect(Array.isArray(result.remediationPlan.dependencies)).toBe(true);
            expect(typeof result.remediationPlan.riskReduction).toBe('number');
        });
        it('should track security trends over time', async () => {
            // Execute multiple security tests to generate trend data
            for (let i = 0; i < 3; i++) {
                await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
                await new Promise(resolve => setTimeout(resolve, 100)); // Small delay for different timestamps
            }
            const dashboard = securityOrchestrator.getSecurityDashboard();
            expect(dashboard.trendData).toBeDefined();
            expect(Array.isArray(dashboard.trendData)).toBe(true);
            expect(dashboard.trendData.length).toBeGreaterThan(0);
            if (dashboard.trendData.length > 0) {
                dashboard.trendData.forEach(trend => {
                    expect(trend).toHaveProperty('date');
                    expect(trend).toHaveProperty('securityScore');
                    expect(trend).toHaveProperty('vulnerabilityCount');
                    expect(trend).toHaveProperty('complianceScore');
                    expect(trend).toHaveProperty('riskScore');
                    expect(trend.date instanceof Date).toBe(true);
                });
            }
        });
    });
    describe('6. Security Test Reporting and Documentation', () => {
        it('should generate comprehensive security reports', async () => {
            const result = await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            expect(result.remediationPlan).toBeDefined();
            expect(result.remediationPlan.tasks).toBeDefined();
            expect(Array.isArray(result.remediationPlan.tasks)).toBe(true);
            expect(result.recommendations).toBeDefined();
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
        it('should save security test reports to disk', async () => {
            await automatedTesting.executeSecurityTestsOnDemand();
            // Check if reports are saved
            const files = await fs.readdir(testOutputDir);
            const reportFiles = files.filter(f => f.startsWith('security-report-'));
            expect(reportFiles.length).toBeGreaterThan(0);
        });
        it('should provide security trend analysis', async () => {
            // Execute multiple tests to generate trend data
            await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            await securityOrchestrator.executeSecurityTestSuite('daily-security-scan');
            const dashboard = securityOrchestrator.getSecurityDashboard();
            expect(dashboard.trendData).toBeDefined();
            expect(Array.isArray(dashboard.trendData)).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxzZWN1cml0eVxcY29tcHJlaGVuc2l2ZS1zZWN1cml0eS10ZXN0aW5nLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkgseUNBQXlDO0FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLCtDQUErQyxDQUFDLENBQUM7QUFDM0QsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBcEIzQixzREFBbUQ7QUFDbkQsMEZBQTBIO0FBQzFILDRGQUE4RztBQUM5RyxnR0FBMkY7QUFDM0YsMEVBQTZFO0FBQzdFLDBGQUFtSDtBQUNuSCxvRkFBK0U7QUFDL0Usd0ZBQW1GO0FBQ25GLHdGQUFvRjtBQUNwRiwwRUFBc0U7QUFDdEUsNEZBQXVGO0FBQ3ZGLCtDQUFpQztBQUNqQyxnREFBa0M7QUFDbEMsMkNBQTZCO0FBQzdCLHVDQUF5QjtBQVF6QixRQUFRLENBQUMsa0RBQWtELEVBQUUsR0FBRyxFQUFFO0lBQ2hFLElBQUksTUFBYyxDQUFDO0lBQ25CLElBQUksb0JBQThDLENBQUM7SUFDbkQsSUFBSSxrQkFBNkMsQ0FBQztJQUNsRCxJQUFJLG9CQUFpRCxDQUFDO0lBQ3RELElBQUksaUJBQTJDLENBQUM7SUFDaEQsSUFBSSxnQkFBK0MsQ0FBQztJQUNwRCxJQUFJLGVBQXNDLENBQUM7SUFDM0MsSUFBSSxnQkFBeUMsQ0FBQztJQUM5QyxJQUFJLGFBQWtDLENBQUM7SUFDdkMsSUFBSSxpQkFBb0MsQ0FBQztJQUN6QyxJQUFJLGtCQUE2QyxDQUFDO0lBQ2xELElBQUksYUFBcUIsQ0FBQztJQUUxQixTQUFTLENBQUMsS0FBSyxJQUFJ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QUssSUFBSSxFQUFFO1lBQ3pELE1BQU0sZ0JBQWdCLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztZQUV0RCw2QkFBNkI7WUFDN0IsTUFBTSxLQUFLLEdBQUcsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzlDLE1BQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQztZQUV4RSxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN0RCxnREFBZ0Q7WUFDaEQsTUFBTSxvQkFBb0IsQ0FBQyx3QkFBd0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQzNFLE1BQU0sb0JBQW9CLENBQUMsd0JBQXdCLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUUzRSxNQUFNLFNBQVMsR0FBRyxvQkFBb0IsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBRTlELE1BQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDMUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXE5pY2tcXERlc2t0b3BcXFNtb290aFNhaWxcXHNyY1xcdGVzdHNcXHNlY3VyaXR5XFxjb21wcmVoZW5zaXZlLXNlY3VyaXR5LXRlc3RpbmcudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ09NUFJFSEVOU0lWRSBTRUNVUklUWSBURVNUSU5HIFNVSVRFIC0gVEFTSyAxMi4zIElNUExFTUVOVEFUSU9OXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIFxyXG4gKiBDb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBhdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZyBzdWl0ZSwgcGVuZXRyYXRpb25cclxuICogdGVzdGluZyBmb3IgQVBJIGVuZHBvaW50cywgdnVsbmVyYWJpbGl0eSBzY2FubmluZyBhbmQgYXNzZXNzbWVudCwgYW5kXHJcbiAqIHNlY3VyaXR5IGNvbXBsaWFuY2UgdGVzdGluZyBhbmQgdmFsaWRhdGlvbiBhcyByZXF1aXJlZCBieSB0YXNrIDEyLjMuXHJcbiAqIFxyXG4gKiBGZWF0dXJlczpcclxuICogLSBBdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZyBzdWl0ZVxyXG4gKiAtIFBlbmV0cmF0aW9uIHRlc3RpbmcgZm9yIEFQSSBlbmRwb2ludHMgIFxyXG4gKiAtIFZ1bG5lcmFiaWxpdHkgc2Nhbm5pbmcgYW5kIGFzc2Vzc21lbnRcclxuICogLSBTZWN1cml0eSBjb21wbGlhbmNlIHRlc3RpbmcgYW5kIHZhbGlkYXRpb25cclxuICogLSBSZWFsLXRpbWUgc2VjdXJpdHkgbW9uaXRvcmluZyBpbnRlZ3JhdGlvblxyXG4gKiAtIENvbXByZWhlbnNpdmUgc2VjdXJpdHkgcmVwb3J0aW5nXHJcbiAqIFxyXG4gKiBSZXF1aXJlbWVudHM6IDI1LjcgLSBDcmVhdGUgc2VjdXJpdHkgYW5kIHBlbmV0cmF0aW9uIHRlc3RpbmdcclxuICogXHJcbiAqIEBhdXRob3IgQUkgQ3J5cHRvIFRyYWRpbmcgU3lzdGVtXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBsaWNlbnNlIFBST1BSSUVUQVJZXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vLi4vY29yZS9sb2dnaW5nL2xvZ2dlcic7XHJcbmltcG9ydCB7IFNlY3VyaXR5VGVzdE9yY2hlc3RyYXRvciwgU2VjdXJpdHlUZXN0U3VpdGUsIFNlY3VyaXR5VGVzdFR5cGUgfSBmcm9tICcuLi8uLi9zZWN1cml0eS9zZWN1cml0eS10ZXN0LW9yY2hlc3RyYXRvcic7XHJcbmltcG9ydCB7IFBlbmV0cmF0aW9uVGVzdGluZ1NlcnZpY2UsIFBlbmV0cmF0aW9uVGVzdENvbmZpZyB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L3BlbmV0cmF0aW9uLXRlc3Rpbmctc2VydmljZSc7XHJcbmltcG9ydCB7IFZ1bG5lcmFiaWxpdHlTY2FubmVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L3Z1bG5lcmFiaWxpdHktc2Nhbm5lci1zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tcGxpYW5jZVRlc3RpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvY29tcGxpYW5jZS10ZXN0aW5nJztcclxuaW1wb3J0IHsgQXV0b21hdGVkU2VjdXJpdHlUZXN0aW5nU3VpdGUsIFNlY3VyaXR5VGVzdFN1aXRlQ29uZmlnIH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvYXV0b21hdGVkLXNlY3VyaXR5LXRlc3RpbmcnO1xyXG5pbXBvcnQgeyBUaHJlYXREZXRlY3Rpb25FbmdpbmUgfSBmcm9tICcuLi8uLi9zZWN1cml0eS90aHJlYXQtZGV0ZWN0aW9uLWVuZ2luZSc7XHJcbmltcG9ydCB7IEluY2lkZW50UmVzcG9uc2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VjdXJpdHkvaW5jaWRlbnQtcmVzcG9uc2Utc2VydmljZSc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb3JlL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9uLXNlcnZpY2UnO1xyXG5pbXBvcnQgeyBFbmNyeXB0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlY3VyaXR5L2VuY3J5cHRpb24tc2VydmljZSc7XHJcbmltcG9ydCB7IFNlY3VyaXR5TW9uaXRvcmluZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWN1cml0eS9zZWN1cml0eS1tb25pdG9yaW5nLXNlcnZpY2UnO1xyXG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcclxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7XHJcblxyXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llcyBmb3IgdGVzdGluZ1xyXG5qZXN0Lm1vY2soJy4uLy4uL2NvcmUvbG9nZ2luZy9sb2dnZXInKTtcclxuamVzdC5tb2NrKCcuLi8uLi9jb3JlL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9uLXNlcnZpY2UnKTtcclxuamVzdC5tb2NrKCdheGlvcycpO1xyXG5qZXN0Lm1vY2soJ2NoaWxkX3Byb2Nlc3MnKTtcclxuXHJcbmRlc2NyaWJlKCdDb21wcmVoZW5zaXZlIFNlY3VyaXR5IFRlc3RpbmcgU3VpdGUgLSBUYXNrIDEyLjMnLCAoKSA9PiB7XHJcbiAgbGV0IGxvZ2dlcjogTG9nZ2VyO1xyXG4gIGxldCBzZWN1cml0eU9yY2hlc3RyYXRvcjogU2VjdXJpdHlUZXN0T3JjaGVzdHJhdG9yO1xyXG4gIGxldCBwZW5ldHJhdGlvblRlc3Rpbmc6IFBlbmV0cmF0aW9uVGVzdGluZ1NlcnZpY2U7XHJcbiAgbGV0IHZ1bG5lcmFiaWxpdHlTY2FubmVyOiBWdWxuZXJhYmlsaXR5U2Nhbm5lclNlcnZpY2U7XHJcbiAgbGV0IGNvbXBsaWFuY2VUZXN0aW5nOiBDb21wbGlhbmNlVGVzdGluZ1NlcnZpY2U7XHJcbiAgbGV0IGF1dG9tYXRlZFRlc3Rpbmc6IEF1dG9tYXRlZFNlY3VyaXR5VGVzdGluZ1N1aXRlO1xyXG4gIGxldCB0aHJlYXREZXRlY3Rpb246IFRocmVhdERldGVjdGlvbkVuZ2luZTtcclxuICBsZXQgaW5jaWRlbnRSZXNwb25zZTogSW5jaWRlbnRSZXNwb25zZVNlcnZpY2U7XHJcbiAgbGV0IG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvblNlcnZpY2U7XHJcbiAgbGV0IGVuY3J5cHRpb25TZXJ2aWNlOiBFbmNyeXB0aW9uU2VydmljZTtcclxuICBsZXQgc2VjdXJpdHlNb25pdG9yaW5nOiBTZWN1cml0eU1vbml0b3JpbmdTZXJ2aWNlO1xyXG4gIGxldCB0ZXN0T3V0cHV0RGlyOiBzdHJpbmc7XHJcblxyXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBTZXQgdXAgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCc7XHJcbiAgICBwcm9jZXNzLmVudi5NQVNURVJfRU5DUllQVElPTl9LRVkgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcclxuICAgIHByb2Nlc3MuZW52LkdBVEVfSU9fQVBJX0tFWSA9ICd0ZXN0X2FwaV9rZXknO1xyXG4gICAgcHJvY2Vzcy5lbnYuR0FURV9JT19TRUNSRVRfS0VZID0gJ3Rlc3Rfc2VjcmV0X2tleSc7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSB0ZW1wb3JhcnkgdGVzdCBvdXRwdXQgZGlyZWN0b3J5XHJcbiAgICB0ZXN0T3V0cHV0RGlyID0gcGF0aC5qb2luKG9zLnRtcGRpcigpLCAnY29tcHJlaGVuc2l2ZS1zZWN1cml0eS10ZXN0LW91dHB1dCcpO1xyXG4gICAgYXdhaXQgZnMubWtkaXIodGVzdE91dHB1dERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBhbGwgc2VjdXJpdHkgc2VydmljZXNcclxuICAgIGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcclxuICAgIGVuY3J5cHRpb25TZXJ2aWNlID0gbmV3IEVuY3J5cHRpb25TZXJ2aWNlKGxvZ2dlcik7XHJcbiAgICB0aHJlYXREZXRlY3Rpb24gPSBuZXcgVGhyZWF0RGV0ZWN0aW9uRW5naW5lKGxvZ2dlcik7XHJcbiAgICBzZWN1cml0eU1vbml0b3JpbmcgPSBuZXcgU2VjdXJpdHlNb25pdG9yaW5nU2VydmljZShsb2dnZXIpO1xyXG4gICAgbm90aWZpY2F0aW9ucyA9IG5ldyBOb3RpZmljYXRpb25TZXJ2aWNlKGxvZ2dlcik7XHJcbiAgICBpbmNpZGVudFJlc3BvbnNlID0gbmV3IEluY2lkZW50UmVzcG9uc2VTZXJ2aWNlKGxvZ2dlciwgbm90aWZpY2F0aW9ucyk7XHJcbiAgICB2dWxuZXJhYmlsaXR5U2Nhbm5lciA9IG5ldyBWdWxuZXJhYmlsaXR5U2Nhbm5lclNlcnZpY2UobG9nZ2VyKTtcclxuICAgIGNvbXBsaWFuY2VUZXN0aW5nID0gbmV3IENvbXBsaWFuY2VUZXN0aW5nU2VydmljZShsb2dnZXIpO1xyXG5cclxuICAgIC8vIENvbmZpZ3VyZSBwZW5ldHJhdGlvbiB0ZXN0aW5nXHJcbiAgICBjb25zdCBwZW5ldHJhdGlvbkNvbmZpZzogUGVuZXRyYXRpb25UZXN0Q29uZmlnID0ge1xyXG4gICAgICB0YXJnZXRFbmRwb2ludHM6IFtcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92NC9zcG90L3RpbWUnLFxyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Y0L3Nwb3QvYWNjb3VudHMnLFxyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Y0L3Nwb3Qvb3JkZXJzJyxcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9kYXNoYm9hcmQvc3RhdHVzJyxcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS90cmFkaW5nL3Bvc2l0aW9ucycsXHJcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYXV0aC9sb2dpbicsXHJcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvc2VjdXJpdHkvc3RhdHVzJ1xyXG4gICAgICBdLFxyXG4gICAgICB0ZXN0VHlwZXM6IFtcclxuICAgICAgICAnc3FsX2luamVjdGlvbicsXHJcbiAgICAgICAgJ3hzcycsXHJcbiAgICAgICAgJ2F1dGhlbnRpY2F0aW9uX2J5cGFzcycsXHJcbiAgICAgICAgJ2F1dGhvcml6YXRpb25fZXNjYWxhdGlvbicsXHJcbiAgICAgICAgJ2lucHV0X3ZhbGlkYXRpb24nLFxyXG4gICAgICAgICdyYXRlX2xpbWl0aW5nJyxcclxuICAgICAgICAndGxzX3NlY3VyaXR5JyxcclxuICAgICAgICAnY3NyZicsXHJcbiAgICAgICAgJ2NvbW1hbmRfaW5qZWN0aW9uJyxcclxuICAgICAgICAncGF0aF90cmF2ZXJzYWwnXHJcbiAgICAgIF0sXHJcbiAgICAgIG1heENvbmN1cnJlbnRUZXN0czogMTAsXHJcbiAgICAgIHRpbWVvdXRNczogMzAwMDAsXHJcbiAgICAgIGVuYWJsZURlc3RydWN0aXZlVGVzdGluZzogZmFsc2UsXHJcbiAgICAgIGNvbXBsaWFuY2VTdGFuZGFyZHM6IFsnT1dBU1BfVE9QXzEwJywgJ0lTT18yNzAwMScsICdTT0NfMicsICdDUllQVE9fVFJBRElOR19TRUNVUklUWSddXHJcbiAgICB9O1xyXG5cclxuICAgIHBlbmV0cmF0aW9uVGVzdGluZyA9IG5ldyBQZW5ldHJhdGlvblRlc3RpbmdTZXJ2aWNlKFxyXG4gICAgICBsb2dnZXIsXHJcbiAgICAgIGVuY3J5cHRpb25TZXJ2aWNlLFxyXG4gICAgICB0aHJlYXREZXRlY3Rpb24sXHJcbiAgICAgIHBlbmV0cmF0aW9uQ29uZmlnXHJcbiAgICApO1xyXG5cclxuICAgIC8vIENvbmZpZ3VyZSBhdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZ1xyXG4gICAgY29uc3Qgc2VjdXJpdHlUZXN0Q29uZmlnOiBTZWN1cml0eVRlc3RTdWl0ZUNvbmZpZyA9IHtcclxuICAgICAgc2NoZWR1bGVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdjb21wcmVoZW5zaXZlLWRhaWx5LXNjYW4nLFxyXG4gICAgICAgICAgbmFtZTogJ0NvbXByZWhlbnNpdmUgRGFpbHkgU2VjdXJpdHkgU2NhbicsXHJcbiAgICAgICAgICBjcm9uRXhwcmVzc2lvbjogJzAgMiAqICogKicsXHJcbiAgICAgICAgICB0ZXN0VHlwZXM6IFsncGVuZXRyYXRpb24nLCAndnVsbmVyYWJpbGl0eScsICdjb21wbGlhbmNlJywgJ2RlcGVuZGVuY3knXSxcclxuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnd2Vla2x5LWRlZXAtc2NhbicsXHJcbiAgICAgICAgICBuYW1lOiAnV2Vla2x5IERlZXAgU2VjdXJpdHkgQXNzZXNzbWVudCcsXHJcbiAgICAgICAgICBjcm9uRXhwcmVzc2lvbjogJzAgMSAqICogMCcsXHJcbiAgICAgICAgICB0ZXN0VHlwZXM6IFsnZnVsbF9wZW5ldHJhdGlvbicsICdkZWVwX3Z1bG5lcmFiaWxpdHknLCAnZnVsbF9jb21wbGlhbmNlJywgJ3RocmVhdF9tb2RlbGluZyddLFxyXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdwcmUtZGVwbG95bWVudC12YWxpZGF0aW9uJyxcclxuICAgICAgICAgIG5hbWU6ICdQcmUtRGVwbG95bWVudCBTZWN1cml0eSBWYWxpZGF0aW9uJyxcclxuICAgICAgICAgIGNyb25FeHByZXNzaW9uOiAnJyxcclxuICAgICAgICAgIHRlc3RUeXBlczogWydwZW5ldHJhdGlvbicsICd2dWxuZXJhYmlsaXR5JywgJ2NvbXBsaWFuY2UnXSxcclxuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIHJlcG9ydGluZ0NvbmZpZzoge1xyXG4gICAgICAgIG91dHB1dERpcmVjdG9yeTogdGVzdE91dHB1dERpcixcclxuICAgICAgICByZXRlbnRpb25EYXlzOiA5MCxcclxuICAgICAgICBlbWFpbFJlcG9ydHM6IHRydWUsXHJcbiAgICAgICAgc2xhY2tJbnRlZ3JhdGlvbjogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgYWxlcnRpbmdDb25maWc6IHtcclxuICAgICAgICBjcml0aWNhbFRocmVzaG9sZDogMSxcclxuICAgICAgICBoaWdoVGhyZXNob2xkOiAzLFxyXG4gICAgICAgIGVtYWlsQWxlcnRzOiB0cnVlLFxyXG4gICAgICAgIGltbWVkaWF0ZU5vdGlmaWNhdGlvbjogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBpbnRlZ3JhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgIGNpY2RJbnRlZ3JhdGlvbjogdHJ1ZSxcclxuICAgICAgICB3ZWJob29rVXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9zZWN1cml0eS93ZWJob29rJyxcclxuICAgICAgICBhcGlLZXk6ICd0ZXN0LXNlY3VyaXR5LWFwaS1rZXknXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYXV0b21hdGVkVGVzdGluZyA9IG5ldyBBdXRvbWF0ZWRTZWN1cml0eVRlc3RpbmdTdWl0ZShcclxuICAgICAgbG9nZ2VyLFxyXG4gICAgICBwZW5ldHJhdGlvblRlc3RpbmcsXHJcbiAgICAgIHNlY3VyaXR5TW9uaXRvcmluZyxcclxuICAgICAgaW5jaWRlbnRSZXNwb25zZSxcclxuICAgICAgbm90aWZpY2F0aW9ucyxcclxuICAgICAgc2VjdXJpdHlUZXN0Q29uZmlnXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgc2VjdXJpdHkgdGVzdCBvcmNoZXN0cmF0b3JcclxuICAgIHNlY3VyaXR5T3JjaGVzdHJhdG9yID0gbmV3IFNlY3VyaXR5VGVzdE9yY2hlc3RyYXRvcihcclxuICAgICAgbG9nZ2VyLFxyXG4gICAgICBwZW5ldHJhdGlvblRlc3RpbmcsXHJcbiAgICAgIHZ1bG5lcmFiaWxpdHlTY2FubmVyLFxyXG4gICAgICBjb21wbGlhbmNlVGVzdGluZyxcclxuICAgICAgYXV0b21hdGVkVGVzdGluZyxcclxuICAgICAgdGhyZWF0RGV0ZWN0aW9uLFxyXG4gICAgICBpbmNpZGVudFJlc3BvbnNlLFxyXG4gICAgICBub3RpZmljYXRpb25zXHJcbiAgICApO1xyXG5cclxuICAgIC8vIENsZWFyIGFsbCBtb2Nrc1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBDbGVhbiB1cCB0ZXN0IGZpbGVzXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIodGVzdE91dHB1dERpcik7XHJcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgIGF3YWl0IGZzLnVubGluayhwYXRoLmpvaW4odGVzdE91dHB1dERpciwgZmlsZSkpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZ25vcmUgY2xlYW51cCBlcnJvcnNcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52Lk1BU1RFUl9FTkNSWVBUSU9OX0tFWTtcclxuICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5HQVRFX0lPX0FQSV9LRVk7XHJcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuR0FURV9JT19TRUNSRVRfS0VZO1xyXG4gICAgZGVsZXRlIHByb2Nlc3MuZW52Lk5PREVfRU5WO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBmcy5ybWRpcih0ZXN0T3V0cHV0RGlyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIElnbm9yZSBjbGVhbnVwIGVycm9yc1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnMS4gQXV0b21hdGVkIFNlY3VyaXR5IFRlc3RpbmcgU3VpdGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgYXV0b21hdGVkIHNlY3VyaXR5IHRlc3Rpbmcgc3VpdGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBleHBlY3QoYXV0b21hdGVkVGVzdGluZy5pbml0aWFsaXplKCkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobG9nZ2VyLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICdBdXRvbWF0ZWQgc2VjdXJpdHkgdGVzdGluZyBzdWl0ZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIGNvbXByZWhlbnNpdmUgc2VjdXJpdHkgdGVzdCBzdWl0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmV4ZWN1dGlvbklkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnQ09NUExFVEVEJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudGVzdFJlc3VsdHMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC50ZXN0UmVzdWx0cykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQub3ZlcmFsbFJpc2tTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGlhbmNlU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgYWxsIHNlY3VyaXR5IHRlc3QgdHlwZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRlc3RUeXBlcyA9IFtcclxuICAgICAgICBTZWN1cml0eVRlc3RUeXBlLlBFTkVUUkFUSU9OX1RFU1RJTkcsXHJcbiAgICAgICAgU2VjdXJpdHlUZXN0VHlwZS5WVUxORVJBQklMSVRZX1NDQU5OSU5HLFxyXG4gICAgICAgIFNlY3VyaXR5VGVzdFR5cGUuQ09NUExJQU5DRV9URVNUSU5HLFxyXG4gICAgICAgIFNlY3VyaXR5VGVzdFR5cGUuREVQRU5ERU5DWV9BVURJVCxcclxuICAgICAgICBTZWN1cml0eVRlc3RUeXBlLkNPREVfQU5BTFlTSVMsXHJcbiAgICAgICAgU2VjdXJpdHlUZXN0VHlwZS5DT05GSUdVUkFUSU9OX1JFVklFVyxcclxuICAgICAgICBTZWN1cml0eVRlc3RUeXBlLk5FVFdPUktfU0VDVVJJVFksXHJcbiAgICAgICAgU2VjdXJpdHlUZXN0VHlwZS5USFJFQVRfTU9ERUxJTkdcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgdGVzdFR5cGUgb2YgdGVzdFR5cGVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKHNlY3VyaXR5T3JjaGVzdHJhdG9yIGFzIGFueSkuZXhlY3V0ZVNlY3VyaXR5VGVzdCh0ZXN0VHlwZSwgJ3Rlc3QtZXhlY3V0aW9uJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0LnRlc3RUeXBlKS50b0JlKHRlc3RUeXBlKTtcclxuICAgICAgICBleHBlY3QoWydQQVNTJywgJ0ZBSUwnLCAnV0FSTklORycsICdFUlJPUiddKS50b0NvbnRhaW4ocmVzdWx0LnN0YXR1cyk7XHJcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuZXhlY3V0aW9uVGltZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQucmlza1Njb3JlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFyYWxsZWwgdGVzdCBleGVjdXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlY3VyaXR5T3JjaGVzdHJhdG9yLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgnd2Vla2x5LWNvbXByZWhlbnNpdmUtc2NhbicpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50ZXN0UmVzdWx0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoJ0NPTVBMRVRFRCcpO1xyXG4gICAgICBcclxuICAgICAgLy8gVmVyaWZ5IGFsbCB0ZXN0IHR5cGVzIHdlcmUgZXhlY3V0ZWRcclxuICAgICAgY29uc3QgZXhlY3V0ZWRUZXN0VHlwZXMgPSByZXN1bHQudGVzdFJlc3VsdHMubWFwKHIgPT4gci50ZXN0VHlwZSk7XHJcbiAgICAgIGV4cGVjdChleGVjdXRlZFRlc3RUeXBlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBzZWN1cml0eSBkYXNoYm9hcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEV4ZWN1dGUgYSBmZXcgdGVzdCBzdWl0ZXMgdG8gcG9wdWxhdGUgZGF0YVxyXG4gICAgICBhd2FpdCBzZWN1cml0eU9yY2hlc3RyYXRvci5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoJ2RhaWx5LXNlY3VyaXR5LXNjYW4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZCA9IHNlY3VyaXR5T3JjaGVzdHJhdG9yLmdldFNlY3VyaXR5RGFzaGJvYXJkKCk7XHJcblxyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkLmxhc3RVcGRhdGVkKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZC5vdmVyYWxsU2VjdXJpdHlTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZC5vdmVyYWxsU2VjdXJpdHlTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xyXG4gICAgICBleHBlY3QoWydMT1cnLCAnTUVESVVNJywgJ0hJR0gnLCAnQ1JJVElDQUwnXSkudG9Db250YWluKGRhc2hib2FyZC5yaXNrTGV2ZWwpO1xyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkLnZ1bG5lcmFiaWxpdGllcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZC5jb21wbGlhbmNlU3RhdHVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShkYXNoYm9hcmQucmVjZW50RXhlY3V0aW9ucykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGRhc2hib2FyZC50cmVuZERhdGEpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCcyLiBQZW5ldHJhdGlvbiBUZXN0aW5nIGZvciBBUEkgRW5kcG9pbnRzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGFsbCBjb25maWd1cmVkIEFQSSBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2NhbklkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnZ1bG5lcmFiaWxpdGllcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnZ1bG5lcmFiaWxpdGllcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxWdWxuZXJhYmlsaXRpZXMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgZm9yIFNRTCBpbmplY3Rpb24gdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrU1FMVGVzdCA9IGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nIGFzIGFueSwgJ3Rlc3RTUUxJbmplY3Rpb24nKTtcclxuICAgICAgbW9ja1NRTFRlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHRlc3RJZDogJ3NxbC1pbmplY3Rpb24tdGVzdCcsXHJcbiAgICAgICAgdGVzdE5hbWU6ICdTUUwgSW5qZWN0aW9uIFRlc3QnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnQVBJX1NFQ1VSSVRZJyxcclxuICAgICAgICBzdGF0dXM6ICdQQVNTJyxcclxuICAgICAgICBzZXZlcml0eTogJ0xPVycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdObyBTUUwgaW5qZWN0aW9uIHZ1bG5lcmFiaWxpdGllcyBkZXRlY3RlZCcsXHJcbiAgICAgICAgZmluZGluZ3M6IFtdLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydDb250aW51ZSB1c2luZyBwYXJhbWV0ZXJpemVkIHF1ZXJpZXMnXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMjAwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrU1FMVGVzdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnZ1bG5lcmFiaWxpdGllcykudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCBmb3IgWFNTIHZ1bG5lcmFiaWxpdGllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1hTU1Rlc3QgPSBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZyBhcyBhbnksICd0ZXN0WFNTVnVsbmVyYWJpbGl0aWVzJyk7XHJcbiAgICAgIG1vY2tYU1NUZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICB0ZXN0SWQ6ICd4c3MtdGVzdCcsXHJcbiAgICAgICAgdGVzdE5hbWU6ICdYU1MgVnVsbmVyYWJpbGl0eSBUZXN0JyxcclxuICAgICAgICBjYXRlZ29yeTogJ0FQSV9TRUNVUklUWScsXHJcbiAgICAgICAgc3RhdHVzOiAnUEFTUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTm8gWFNTIHZ1bG5lcmFiaWxpdGllcyBkZXRlY3RlZCcsXHJcbiAgICAgICAgZmluZGluZ3M6IFtdLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydDb250aW51ZSB1c2luZyBvdXRwdXQgZW5jb2RpbmcnXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMTUwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrWFNTVGVzdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsaWFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCBhdXRoZW50aWNhdGlvbiBieXBhc3MgdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQXV0aFRlc3QgPSBqZXN0LnNweU9uKHBlbmV0cmF0aW9uVGVzdGluZyBhcyBhbnksICd0ZXN0QXV0aGVudGljYXRpb25CeXBhc3MnKTtcclxuICAgICAgbW9ja0F1dGhUZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICB0ZXN0SWQ6ICdhdXRoLWJ5cGFzcy10ZXN0JyxcclxuICAgICAgICB0ZXN0TmFtZTogJ0F1dGhlbnRpY2F0aW9uIEJ5cGFzcyBUZXN0JyxcclxuICAgICAgICBjYXRlZ29yeTogJ0FQSV9TRUNVUklUWScsXHJcbiAgICAgICAgc3RhdHVzOiAnUEFTUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRpb24gcHJvcGVybHkgZW5mb3JjZWQnLFxyXG4gICAgICAgIGZpbmRpbmdzOiBbXSxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnTWFpbnRhaW4gY3VycmVudCBhdXRoZW50aWNhdGlvbiBjb250cm9scyddLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBleGVjdXRpb25UaW1lOiAzMDAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1vY2tBdXRoVGVzdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnJlY29tbWVuZGF0aW9ucykudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCByYXRlIGxpbWl0aW5nIGltcGxlbWVudGF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUmF0ZUxpbWl0VGVzdCA9IGplc3Quc3B5T24ocGVuZXRyYXRpb25UZXN0aW5nIGFzIGFueSwgJ3Rlc3RSYXRlTGltaXRpbmcnKTtcclxuICAgICAgbW9ja1JhdGVMaW1pdFRlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHRlc3RJZDogJ3JhdGUtbGltaXQtdGVzdCcsXHJcbiAgICAgICAgdGVzdE5hbWU6ICdSYXRlIExpbWl0aW5nIFRlc3QnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnQVBJX1NFQ1VSSVRZJyxcclxuICAgICAgICBzdGF0dXM6ICdXQVJOSU5HJyxcclxuICAgICAgICBzZXZlcml0eTogJ01FRElVTScsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdSYXRlIGxpbWl0aW5nIGNvdWxkIGJlIGltcHJvdmVkJyxcclxuICAgICAgICBmaW5kaW5nczogW3tcclxuICAgICAgICAgIGlkOiAncmF0ZS1saW1pdC1maW5kaW5nJyxcclxuICAgICAgICAgIHR5cGU6ICdSQVRFX0xJTUlUSU5HJyxcclxuICAgICAgICAgIHNldmVyaXR5OiAnTUVESVVNJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU29tZSBlbmRwb2ludHMgbGFjayBwcm9wZXIgcmF0ZSBsaW1pdGluZycsXHJcbiAgICAgICAgICBsb2NhdGlvbjogJy9hcGkvdHJhZGluZy9vcmRlcnMnLFxyXG4gICAgICAgICAgZXZpZGVuY2U6ICdObyA0MjkgcmVzcG9uc2VzIHJlY2VpdmVkJyxcclxuICAgICAgICAgIHJlbWVkaWF0aW9uOiAnSW1wbGVtZW50IHJhdGUgbGltaXRpbmcgbWlkZGxld2FyZSdcclxuICAgICAgICB9XSxcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnSW1wbGVtZW50IGNvbXByZWhlbnNpdmUgcmF0ZSBsaW1pdGluZyddLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBleGVjdXRpb25UaW1lOiA1MDAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVuZXRyYXRpb25UZXN0aW5nLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1vY2tSYXRlTGltaXRUZXN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWVkaXVtQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgVExTL0hUVFBTIHNlY3VyaXR5IGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tUTFNUZXN0ID0gamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcgYXMgYW55LCAndGVzdFRMU1NlY3VyaXR5Jyk7XHJcbiAgICAgIG1vY2tUTFNUZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICB0ZXN0SWQ6ICd0bHMtc2VjdXJpdHktdGVzdCcsXHJcbiAgICAgICAgdGVzdE5hbWU6ICdUTFMgU2VjdXJpdHkgVGVzdCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICdBUElfU0VDVVJJVFknLFxyXG4gICAgICAgIHN0YXR1czogJ1BBU1MnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnTE9XJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RMUyBwcm9wZXJseSBjb25maWd1cmVkJyxcclxuICAgICAgICBmaW5kaW5nczogW10sXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ01haW50YWluIGN1cnJlbnQgVExTIGNvbmZpZ3VyYXRpb24nXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMjUwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrVExTVGVzdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsVnVsbmVyYWJpbGl0aWVzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGlucHV0IHZhbGlkYXRpb24gdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrSW5wdXRUZXN0ID0gamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcgYXMgYW55LCAndGVzdElucHV0VmFsaWRhdGlvbicpO1xyXG4gICAgICBtb2NrSW5wdXRUZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICB0ZXN0SWQ6ICdpbnB1dC12YWxpZGF0aW9uLXRlc3QnLFxyXG4gICAgICAgIHRlc3ROYW1lOiAnSW5wdXQgVmFsaWRhdGlvbiBUZXN0JyxcclxuICAgICAgICBjYXRlZ29yeTogJ0FQSV9TRUNVUklUWScsXHJcbiAgICAgICAgc3RhdHVzOiAnUEFTUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSW5wdXQgdmFsaWRhdGlvbiBwcm9wZXJseSBpbXBsZW1lbnRlZCcsXHJcbiAgICAgICAgZmluZGluZ3M6IFtdLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydDb250aW51ZSBjb21wcmVoZW5zaXZlIGlucHV0IHZhbGlkYXRpb24nXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMzUwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlbmV0cmF0aW9uVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtb2NrSW5wdXRUZXN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubG93Q291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJzMuIFZ1bG5lcmFiaWxpdHkgU2Nhbm5pbmcgYW5kIEFzc2Vzc21lbnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgY29tcHJlaGVuc2l2ZSB2dWxuZXJhYmlsaXR5IHNjYW4nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZ1bG5lcmFiaWxpdHlTY2FubmVyLmV4ZWN1dGVDb21wcmVoZW5zaXZlVnVsbmVyYWJpbGl0eVNjYW4oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2NhbklkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNjYW5UeXBlKS50b0JlKCdjb21wcmVoZW5zaXZlX3NjYW4nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoJ0NPTVBMRVRFRCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmZpbmRpbmdzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZmluZGluZ3MpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1bW1hcnkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNjYW4gZm9yIGRlcGVuZGVuY3kgdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2dWxuZXJhYmlsaXR5U2Nhbm5lci5leGVjdXRlQ29tcHJlaGVuc2l2ZVZ1bG5lcmFiaWxpdHlTY2FuKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiBkZXBlbmRlbmN5IHNjYW5uaW5nIHdhcyBwZXJmb3JtZWRcclxuICAgICAgY29uc3QgZGVwZW5kZW5jeUZpbmRpbmdzID0gcmVzdWx0LmZpbmRpbmdzLmZpbHRlcihmID0+IFxyXG4gICAgICAgIGYudHlwZSA9PT0gJ0RFUEVOREVOQ1lfVlVMTkVSQUJJTElUWSdcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmluZGluZ3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VtbWFyeS50b3RhbEZpbmRpbmdzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzY2FuIGZvciBjb2RlIHZ1bG5lcmFiaWxpdGllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdnVsbmVyYWJpbGl0eVNjYW5uZXIuZXhlY3V0ZUNvbXByZWhlbnNpdmVWdWxuZXJhYmlsaXR5U2NhbigpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgY29kZSBzY2FubmluZyB3YXMgcGVyZm9ybWVkXHJcbiAgICAgIGNvbnN0IGNvZGVGaW5kaW5ncyA9IHJlc3VsdC5maW5kaW5ncy5maWx0ZXIoZiA9PiBcclxuICAgICAgICBbJ1NRTF9JTkpFQ1RJT04nLCAnWFNTJywgJ0NPTU1BTkRfSU5KRUNUSU9OJywgJ0hBUkRDT0RFRF9TRUNSRVQnLCAnV0VBS19DUllQVE9HUkFQSFknXS5pbmNsdWRlcyhmLnR5cGUpXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmZpbmRpbmdzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1bW1hcnkucmlza1Njb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1bW1hcnkucmlza1Njb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNjYW4gZm9yIGNvbmZpZ3VyYXRpb24gdnVsbmVyYWJpbGl0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2dWxuZXJhYmlsaXR5U2Nhbm5lci5leGVjdXRlQ29tcHJlaGVuc2l2ZVZ1bG5lcmFiaWxpdHlTY2FuKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiBjb25maWd1cmF0aW9uIHNjYW5uaW5nIHdhcyBwZXJmb3JtZWRcclxuICAgICAgY29uc3QgY29uZmlnRmluZGluZ3MgPSByZXN1bHQuZmluZGluZ3MuZmlsdGVyKGYgPT4gXHJcbiAgICAgICAgWydDT05GSUdVUkFUSU9OX0VSUk9SJywgJ0lOU0VDVVJFX1RSQU5TUE9SVCcsICdXRUFLX1NFU1NJT05fU0VDUkVUJywgJ01JU1NJTkdfU0VDVVJJVFlfSEVBREVSUyddLmluY2x1ZGVzKGYudHlwZSlcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmluZGluZ3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VtbWFyeS5jb21wbGlhbmNlU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VtbWFyeS5jb21wbGlhbmNlU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2NhbiBmb3IgbmV0d29yayB2dWxuZXJhYmlsaXRpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZ1bG5lcmFiaWxpdHlTY2FubmVyLmV4ZWN1dGVDb21wcmVoZW5zaXZlVnVsbmVyYWJpbGl0eVNjYW4oKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIG5ldHdvcmsgc2Nhbm5pbmcgd2FzIHBlcmZvcm1lZFxyXG4gICAgICBjb25zdCBuZXR3b3JrRmluZGluZ3MgPSByZXN1bHQuZmluZGluZ3MuZmlsdGVyKGYgPT4gXHJcbiAgICAgICAgWydPUEVOX1BPUlQnLCAnTUlTU0lOR19UTFNfQ09ORklHJywgJ1VOTkVDRVNTQVJZX1NFUlZJQ0UnXS5pbmNsdWRlcyhmLnR5cGUpXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmZpbmRpbmdzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1bW1hcnkucmVtZWRpYXRpb25Qcmlvcml0eSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnN1bW1hcnkucmVtZWRpYXRpb25Qcmlvcml0eSkpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgdnVsbmVyYWJpbGl0eSBzZXZlcml0eSBjbGFzc2lmaWNhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdnVsbmVyYWJpbGl0eVNjYW5uZXIuZXhlY3V0ZUNvbXByZWhlbnNpdmVWdWxuZXJhYmlsaXR5U2NhbigpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdW1tYXJ5LmNyaXRpY2FsQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VtbWFyeS5oaWdoQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VtbWFyeS5tZWRpdW1Db3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdW1tYXJ5Lmxvd0NvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBcclxuICAgICAgLy8gVG90YWwgc2hvdWxkIG1hdGNoIHN1bSBvZiBzZXZlcml0eSBjb3VudHNcclxuICAgICAgY29uc3Qgc2V2ZXJpdHlTdW0gPSByZXN1bHQuc3VtbWFyeS5jcml0aWNhbENvdW50ICsgcmVzdWx0LnN1bW1hcnkuaGlnaENvdW50ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3VtbWFyeS5tZWRpdW1Db3VudCArIHJlc3VsdC5zdW1tYXJ5Lmxvd0NvdW50O1xyXG4gICAgICBleHBlY3Qoc2V2ZXJpdHlTdW0pLnRvQmUocmVzdWx0LnN1bW1hcnkudG90YWxGaW5kaW5ncyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgcmVtZWRpYXRpb24gcHJpb3JpdGllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdnVsbmVyYWJpbGl0eVNjYW5uZXIuZXhlY3V0ZUNvbXByZWhlbnNpdmVWdWxuZXJhYmlsaXR5U2NhbigpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdW1tYXJ5LnJlbWVkaWF0aW9uUHJpb3JpdHkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5zdW1tYXJ5LnJlbWVkaWF0aW9uUHJpb3JpdHkpKS50b0JlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3VsdC5zdW1tYXJ5LnJlbWVkaWF0aW9uUHJpb3JpdHkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlc3VsdC5zdW1tYXJ5LnJlbWVkaWF0aW9uUHJpb3JpdHkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVQcm9wZXJ0eSgncHJpb3JpdHknKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVQcm9wZXJ0eSgndGl0bGUnKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVQcm9wZXJ0eSgnZGVzY3JpcHRpb24nKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVQcm9wZXJ0eSgnZWZmb3J0Jyk7XHJcbiAgICAgICAgICBleHBlY3QoaXRlbSkudG9IYXZlUHJvcGVydHkoJ2ltcGFjdCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGl0ZW0pLnRvSGF2ZVByb3BlcnR5KCdzdGVwcycpO1xyXG4gICAgICAgICAgZXhwZWN0KGl0ZW0pLnRvSGF2ZVByb3BlcnR5KCdlc3RpbWF0ZWRUaW1lJyk7XHJcbiAgICAgICAgICBleHBlY3QoWydDUklUSUNBTCcsICdISUdIJywgJ01FRElVTScsICdMT1cnXSkudG9Db250YWluKGl0ZW0ucHJpb3JpdHkpO1xyXG4gICAgICAgICAgZXhwZWN0KFsnTE9XJywgJ01FRElVTScsICdISUdIJ10pLnRvQ29udGFpbihpdGVtLmVmZm9ydCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnNC4gU2VjdXJpdHkgQ29tcGxpYW5jZSBUZXN0aW5nIGFuZCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IE9XQVNQIFRvcCAxMCBjb21wbGlhbmNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGlhbmNlVGVzdGluZy5leGVjdXRlQ29tcGxpYW5jZVRlc3QoJ09XQVNQX1RPUF8xMCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZElkKS50b0JlKCdPV0FTUF9UT1BfMTAnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZE5hbWUpLnRvQmUoJ09XQVNQIFRvcCAxMCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm92ZXJhbGxTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5vdmVyYWxsU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgICAgZXhwZWN0KFsnQ09NUExJQU5UJywgJ05PTl9DT01QTElBTlQnLCAnUEFSVElBTCddKS50b0NvbnRhaW4ocmVzdWx0LnN0YXR1cyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udHJvbFJlc3VsdHMubGVuZ3RoKS50b0JlKDEwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGVzdCBJU08gMjcwMDEgY29tcGxpYW5jZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGxpYW5jZVRlc3RpbmcuZXhlY3V0ZUNvbXBsaWFuY2VUZXN0KCdJU09fMjcwMDEnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmRJZCkudG9CZSgnSVNPXzI3MDAxJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmROYW1lKS50b0JlKCdJU08vSUVDIDI3MDAxJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVxdWlyZWRTY29yZSkudG9CZSg4NSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udHJvbFJlc3VsdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRlc3QgU09DIDIgY29tcGxpYW5jZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGxpYW5jZVRlc3RpbmcuZXhlY3V0ZUNvbXBsaWFuY2VUZXN0KCdTT0NfMicpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZElkKS50b0JlKCdTT0NfMicpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YW5kYXJkTmFtZSkudG9CZSgnU09DIDIgVHlwZSBJSScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnJlcXVpcmVkU2NvcmUpLnRvQmUoOTApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRyb2xSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0ZXN0IGNyeXB0byB0cmFkaW5nIHNlY3VyaXR5IGZyYW1ld29yayBjb21wbGlhbmNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGlhbmNlVGVzdGluZy5leGVjdXRlQ29tcGxpYW5jZVRlc3QoJ0NSWVBUT19UUkFESU5HX1NFQ1VSSVRZJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YW5kYXJkSWQpLnRvQmUoJ0NSWVBUT19UUkFESU5HX1NFQ1VSSVRZJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhbmRhcmROYW1lKS50b0JlKCdDcnlwdG8gVHJhZGluZyBTZWN1cml0eSBGcmFtZXdvcmsnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXF1aXJlZFNjb3JlKS50b0JlKDk1KTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGZvciBjcnlwdG8tc3BlY2lmaWMgY29udHJvbHNcclxuICAgICAgY29uc3QgY29udHJvbElkcyA9IHJlc3VsdC5jb250cm9sUmVzdWx0cy5tYXAoYyA9PiBjLmNvbnRyb2xJZCk7XHJcbiAgICAgIGV4cGVjdChjb250cm9sSWRzKS50b0NvbnRhaW4oJ0NUUy4xLjEnKTsgLy8gQVBJIEtleSBTZWN1cml0eVxyXG4gICAgICBleHBlY3QoY29udHJvbElkcykudG9Db250YWluKCdDVFMuMi4xJyk7IC8vIFRyYWRpbmcgQWxnb3JpdGhtIFNlY3VyaXR5XHJcbiAgICAgIGV4cGVjdChjb250cm9sSWRzKS50b0NvbnRhaW4oJ0NUUy4zLjEnKTsgLy8gUmlzayBNYW5hZ2VtZW50IENvbnRyb2xzXHJcbiAgICAgIGV4cGVjdChjb250cm9sSWRzKS50b0NvbnRhaW4oJ0NUUy40LjEnKTsgLy8gTWFya2V0IERhdGEgSW50ZWdyaXR5XHJcbiAgICAgIGV4cGVjdChjb250cm9sSWRzKS50b0NvbnRhaW4oJ0NUUy41LjEnKTsgLy8gU3lzdGVtIEF2YWlsYWJpbGl0eVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGdhcCBhbmFseXNpcyBmb3Igbm9uLWNvbXBsaWFudCBzdGFuZGFyZHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXBsaWFuY2VUZXN0aW5nLmV4ZWN1dGVDb21wbGlhbmNlVGVzdCgnT1dBU1BfVE9QXzEwJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmdhcEFuYWx5c2lzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZ2FwQW5hbHlzaXMpKS50b0JlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT09ICdDT01QTElBTlQnKSB7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5nYXBBbmFseXNpcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgICBcclxuICAgICAgICByZXN1bHQuZ2FwQW5hbHlzaXMuZm9yRWFjaChnYXAgPT4ge1xyXG4gICAgICAgICAgZXhwZWN0KGdhcCkudG9IYXZlUHJvcGVydHkoJ2NvbnRyb2xJZCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGdhcCkudG9IYXZlUHJvcGVydHkoJ2NvbnRyb2xOYW1lJyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgnY3VycmVudFNjb3JlJyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgncmVxdWlyZWRTY29yZScpO1xyXG4gICAgICAgICAgZXhwZWN0KGdhcCkudG9IYXZlUHJvcGVydHkoJ2dhcCcpO1xyXG4gICAgICAgICAgZXhwZWN0KGdhcCkudG9IYXZlUHJvcGVydHkoJ3ByaW9yaXR5Jyk7XHJcbiAgICAgICAgICBleHBlY3QoZ2FwKS50b0hhdmVQcm9wZXJ0eSgncmVtZWRpYXRpb24nKTtcclxuICAgICAgICAgIGV4cGVjdChbJ0xPVycsICdNRURJVU0nLCAnSElHSCcsICdDUklUSUNBTCddKS50b0NvbnRhaW4oZ2FwLnByaW9yaXR5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbGwgY29tcGxpYW5jZSBzdGFuZGFyZHMgc2ltdWx0YW5lb3VzbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YW5kYXJkcyA9IFsnT1dBU1BfVE9QXzEwJywgJ0lTT18yNzAwMScsICdTT0NfMicsICdDUllQVE9fVFJBRElOR19TRUNVUklUWSddO1xyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgc3RhbmRhcmRzLm1hcChzdGFuZGFyZCA9PiBjb21wbGlhbmNlVGVzdGluZy5leGVjdXRlQ29tcGxpYW5jZVRlc3Qoc3RhbmRhcmQpKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCg0KTtcclxuICAgICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGFuZGFyZElkKS50b0JlKHN0YW5kYXJkc1tpbmRleF0pO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQub3ZlcmFsbFNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQub3ZlcmFsbFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jb250cm9sUmVzdWx0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBWZXJpZnkgY29tcGxpYW5jZSByZXF1aXJlbWVudHMgYXJlIGluIGFzY2VuZGluZyBvcmRlclxyXG4gICAgICBleHBlY3QocmVzdWx0c1swXS5yZXF1aXJlZFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKHJlc3VsdHNbMV0ucmVxdWlyZWRTY29yZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRzWzFdLnJlcXVpcmVkU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwocmVzdWx0c1syXS5yZXF1aXJlZFNjb3JlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdHNbMl0ucmVxdWlyZWRTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbChyZXN1bHRzWzNdLnJlcXVpcmVkU2NvcmUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCc1LiBTZWN1cml0eSBUZXN0IEludGVncmF0aW9uIGFuZCBPcmNoZXN0cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBpbnRlZ3JhdGUgd2l0aCB0aHJlYXQgZGV0ZWN0aW9uIGVuZ2luZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodGhyZWF0RGV0ZWN0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRlc3RSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbnRlZ3JhdGUgd2l0aCBpbmNpZGVudCByZXNwb25zZSBzeXN0ZW0nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgY3JpdGljYWwgZmluZGluZ3MgdG8gdHJpZ2dlciBpbmNpZGVudCByZXNwb25zZVxyXG4gICAgICBjb25zdCBtb2NrUGVuZXRyYXRpb25UZXN0ID0gamVzdC5zcHlPbihwZW5ldHJhdGlvblRlc3RpbmcsICdleGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUnKTtcclxuICAgICAgbW9ja1BlbmV0cmF0aW9uVGVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgc2NhbklkOiAnY3JpdGljYWwtdGVzdC1zY2FuJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdG90YWxWdWxuZXJhYmlsaXRpZXM6IDIsXHJcbiAgICAgICAgY3JpdGljYWxDb3VudDogMixcclxuICAgICAgICBoaWdoQ291bnQ6IDAsXHJcbiAgICAgICAgbWVkaXVtQ291bnQ6IDAsXHJcbiAgICAgICAgbG93Q291bnQ6IDAsXHJcbiAgICAgICAgdnVsbmVyYWJpbGl0aWVzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnY3JpdGljYWwtdnVsbi0xJyxcclxuICAgICAgICAgICAgdHlwZTogJ0FVVEhFTlRJQ0FUSU9OX0JZUEFTUycsXHJcbiAgICAgICAgICAgIHNldmVyaXR5OiAnQ1JJVElDQUwnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NyaXRpY2FsIGF1dGhlbnRpY2F0aW9uIGJ5cGFzcyBkZXRlY3RlZCcsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiAnL2FwaS90cmFkaW5nL29yZGVycycsXHJcbiAgICAgICAgICAgIGV2aWRlbmNlOiAnRW5kcG9pbnQgYWNjZXNzaWJsZSB3aXRob3V0IGF1dGhlbnRpY2F0aW9uJyxcclxuICAgICAgICAgICAgcmVtZWRpYXRpb246ICdJbXBsZW1lbnQgcHJvcGVyIGF1dGhlbnRpY2F0aW9uIGNoZWNrcydcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnY3JpdGljYWwtdnVsbi0yJyxcclxuICAgICAgICAgICAgdHlwZTogJ1NRTF9JTkpFQ1RJT04nLFxyXG4gICAgICAgICAgICBzZXZlcml0eTogJ0NSSVRJQ0FMJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTUUwgaW5qZWN0aW9uIHZ1bG5lcmFiaWxpdHkgZGV0ZWN0ZWQnLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogJy9hcGkvdXNlci9wcm9maWxlJyxcclxuICAgICAgICAgICAgZXZpZGVuY2U6ICdNYWxpY2lvdXMgU1FMIHBheWxvYWQgZXhlY3V0ZWQnLFxyXG4gICAgICAgICAgICByZW1lZGlhdGlvbjogJ1VzZSBwYXJhbWV0ZXJpemVkIHF1ZXJpZXMnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBjb21wbGlhbmNlU2NvcmU6IDI1LFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydJbW1lZGlhdGUgc2VjdXJpdHkgcmV2aWV3IHJlcXVpcmVkJ11cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBqZXN0LnNweU9uKGluY2lkZW50UmVzcG9uc2UsICdjcmVhdGVJbmNpZGVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3NlY3VyaXR5LWluY2lkZW50LTEyMycsXHJcbiAgICAgICAgdHlwZTogJ0NSSVRJQ0FMX1ZVTE5FUkFCSUxJVElFUycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdDUklUSUNBTCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdDcml0aWNhbCBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMgZGV0ZWN0ZWQnLFxyXG4gICAgICAgIHNvdXJjZTogJ0F1dG9tYXRlZCBTZWN1cml0eSBUZXN0aW5nJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc3RhdHVzOiAnREVURUNURUQnLFxyXG4gICAgICAgIGV2aWRlbmNlOiBbXSxcclxuICAgICAgICByZXNwb25zZUFjdGlvbnM6IFtdXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmNyaXRpY2FsRmluZGluZ3MpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KGluY2lkZW50UmVzcG9uc2UuY3JlYXRlSW5jaWRlbnQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaW50ZWdyYXRlIHdpdGggbm90aWZpY2F0aW9uIHN5c3RlbScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTW9jayBoaWdoIHNldmVyaXR5IGZpbmRpbmdzIHRvIHRyaWdnZXIgbm90aWZpY2F0aW9uc1xyXG4gICAgICBjb25zdCBtb2NrVnVsblNjYW4gPSBqZXN0LnNweU9uKHZ1bG5lcmFiaWxpdHlTY2FubmVyLCAnZXhlY3V0ZUNvbXByZWhlbnNpdmVWdWxuZXJhYmlsaXR5U2NhbicpO1xyXG4gICAgICBtb2NrVnVsblNjYW4ubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHNjYW5JZDogJ2hpZ2gtc2V2ZXJpdHktc2NhbicsXHJcbiAgICAgICAgc2NhblR5cGU6ICdjb21wcmVoZW5zaXZlX3NjYW4nIGFzIGFueSxcclxuICAgICAgICB0YXJnZXQ6ICdzeXN0ZW0nLFxyXG4gICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKSxcclxuICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHN0YXR1czogJ0NPTVBMRVRFRCcsXHJcbiAgICAgICAgZmluZGluZ3M6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6ICdoaWdoLXZ1bG4tMScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdERVBFTkRFTkNZX1ZVTE5FUkFCSUxJVFknLFxyXG4gICAgICAgICAgICBzZXZlcml0eTogJ0hJR0gnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0hpZ2ggc2V2ZXJpdHkgZGVwZW5kZW5jeSB2dWxuZXJhYmlsaXR5JyxcclxuICAgICAgICAgICAgbG9jYXRpb246ICdwYWNrYWdlLmpzb24nLFxyXG4gICAgICAgICAgICBldmlkZW5jZTogJ1Z1bG5lcmFibGUgcGFja2FnZSBkZXRlY3RlZCcsXHJcbiAgICAgICAgICAgIHJlbWVkaWF0aW9uOiAnVXBkYXRlIHRvIGxhdGVzdCB2ZXJzaW9uJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgc3VtbWFyeToge1xyXG4gICAgICAgICAgdG90YWxGaW5kaW5nczogMyxcclxuICAgICAgICAgIGNyaXRpY2FsQ291bnQ6IDAsXHJcbiAgICAgICAgICBoaWdoQ291bnQ6IDMsXHJcbiAgICAgICAgICBtZWRpdW1Db3VudDogMCxcclxuICAgICAgICAgIGxvd0NvdW50OiAwLFxyXG4gICAgICAgICAgcmlza1Njb3JlOiA2MCxcclxuICAgICAgICAgIGNvbXBsaWFuY2VTY29yZTogNzAsXHJcbiAgICAgICAgICByZW1lZGlhdGlvblByaW9yaXR5OiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBqZXN0LnNweU9uKG5vdGlmaWNhdGlvbnMsICdzZW5kQWxlcnQnKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmhpZ2hGaW5kaW5ncykudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3Qobm90aWZpY2F0aW9ucy5zZW5kQWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIHRpdGxlOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnSGlnaCcpLFxyXG4gICAgICAgICAgcHJpb3JpdHk6ICdISUdIJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcmVtZWRpYXRpb24gcGxhbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlY3VyaXR5T3JjaGVzdHJhdG9yLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgnd2Vla2x5LWNvbXByZWhlbnNpdmUtc2NhbicpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZW1lZGlhdGlvblBsYW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVtZWRpYXRpb25QbGFuLnBsYW5JZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KFsnSU1NRURJQVRFJywgJ0hJR0gnLCAnTUVESVVNJywgJ0xPVyddKS50b0NvbnRhaW4ocmVzdWx0LnJlbWVkaWF0aW9uUGxhbi5wcmlvcml0eSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVtZWRpYXRpb25QbGFuLmVzdGltYXRlZEVmZm9ydCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZW1lZGlhdGlvblBsYW4udGltZWxpbmUpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZW1lZGlhdGlvblBsYW4udGFza3MpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucmVtZWRpYXRpb25QbGFuLmRlcGVuZGVuY2llcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnJlbWVkaWF0aW9uUGxhbi5yaXNrUmVkdWN0aW9uKS50b0JlKCdudW1iZXInKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgc2VjdXJpdHkgdHJlbmRzIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gRXhlY3V0ZSBtdWx0aXBsZSBzZWN1cml0eSB0ZXN0cyB0byBnZW5lcmF0ZSB0cmVuZCBkYXRhXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpOyAvLyBTbWFsbCBkZWxheSBmb3IgZGlmZmVyZW50IHRpbWVzdGFtcHNcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGFzaGJvYXJkID0gc2VjdXJpdHlPcmNoZXN0cmF0b3IuZ2V0U2VjdXJpdHlEYXNoYm9hcmQoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmQudHJlbmREYXRhKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShkYXNoYm9hcmQudHJlbmREYXRhKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZC50cmVuZERhdGEubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZGFzaGJvYXJkLnRyZW5kRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZGFzaGJvYXJkLnRyZW5kRGF0YS5mb3JFYWNoKHRyZW5kID0+IHtcclxuICAgICAgICAgIGV4cGVjdCh0cmVuZCkudG9IYXZlUHJvcGVydHkoJ2RhdGUnKTtcclxuICAgICAgICAgIGV4cGVjdCh0cmVuZCkudG9IYXZlUHJvcGVydHkoJ3NlY3VyaXR5U2NvcmUnKTtcclxuICAgICAgICAgIGV4cGVjdCh0cmVuZCkudG9IYXZlUHJvcGVydHkoJ3Z1bG5lcmFiaWxpdHlDb3VudCcpO1xyXG4gICAgICAgICAgZXhwZWN0KHRyZW5kKS50b0hhdmVQcm9wZXJ0eSgnY29tcGxpYW5jZVNjb3JlJyk7XHJcbiAgICAgICAgICBleHBlY3QodHJlbmQpLnRvSGF2ZVByb3BlcnR5KCdyaXNrU2NvcmUnKTtcclxuICAgICAgICAgIGV4cGVjdCh0cmVuZC5kYXRlIGluc3RhbmNlb2YgRGF0ZSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCc2LiBTZWN1cml0eSBUZXN0IFJlcG9ydGluZyBhbmQgRG9jdW1lbnRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBzZWN1cml0eSByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZWN1cml0eU9yY2hlc3RyYXRvci5leGVjdXRlU2VjdXJpdHlUZXN0U3VpdGUoJ2RhaWx5LXNlY3VyaXR5LXNjYW4nKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVtZWRpYXRpb25QbGFuKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnJlbWVkaWF0aW9uUGxhbi50YXNrcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnJlbWVkaWF0aW9uUGxhbi50YXNrcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVjb21tZW5kYXRpb25zKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2F2ZSBzZWN1cml0eSB0ZXN0IHJlcG9ydHMgdG8gZGlzaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgYXV0b21hdGVkVGVzdGluZy5leGVjdXRlU2VjdXJpdHlUZXN0c09uRGVtYW5kKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiByZXBvcnRzIGFyZSBzYXZlZFxyXG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIodGVzdE91dHB1dERpcik7XHJcbiAgICAgIGNvbnN0IHJlcG9ydEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5zdGFydHNXaXRoKCdzZWN1cml0eS1yZXBvcnQtJykpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlcG9ydEZpbGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIHNlY3VyaXR5IHRyZW5kIGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBFeGVjdXRlIG11bHRpcGxlIHRlc3RzIHRvIGdlbmVyYXRlIHRyZW5kIGRhdGFcclxuICAgICAgYXdhaXQgc2VjdXJpdHlPcmNoZXN0cmF0b3IuZXhlY3V0ZVNlY3VyaXR5VGVzdFN1aXRlKCdkYWlseS1zZWN1cml0eS1zY2FuJyk7XHJcbiAgICAgIGF3YWl0IHNlY3VyaXR5T3JjaGVzdHJhdG9yLmV4ZWN1dGVTZWN1cml0eVRlc3RTdWl0ZSgnZGFpbHktc2VjdXJpdHktc2NhbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGFzaGJvYXJkID0gc2VjdXJpdHlPcmNoZXN0cmF0b3IuZ2V0U2VjdXJpdHlEYXNoYm9hcmQoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmQudHJlbmREYXRhKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShkYXNoYm9hcmQudHJlbmREYXRhKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwidmVyc2lvbiI6M30=