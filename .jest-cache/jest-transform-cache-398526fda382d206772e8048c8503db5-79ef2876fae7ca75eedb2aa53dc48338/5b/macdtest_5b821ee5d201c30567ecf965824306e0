9f37adebae95820bbdff84f22ebd7568
"use strict";
// =============================================================================
// AI CRYPTO TRADING AGENT - MACD STRATEGY UNIT TESTS
// =============================================================================
// Comprehensive unit tests for MACD trend following strategy
// Tests signal line crossovers, histogram analysis, and divergence detection
// =============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
const macd_1 = require("@/trading/strategies/macd");
describe('MACDStrategy', () => {
    let strategy;
    beforeEach(() => {
        strategy = new macd_1.MACDStrategy();
    });
    describe('calculateMACD', () => {
        it('should calculate MACD correctly for trending market', () => {
            // Create uptrending prices
            const prices = Array.from({ length: 50 }, (_, i) => 100 + i * 0.5);
            const macd = strategy.calculateMACD(prices);
            expect(macd.macdLine).toHaveLength(prices.length);
            expect(macd.signalLine).toHaveLength(prices.length);
            expect(macd.histogram).toHaveLength(prices.length);
            // First 26 values should be null (need 26 periods for slow EMA)
            expect(macd.macdLine.slice(0, 26).every(val => val === null)).toBe(true);
            // MACD line should be positive in uptrend
            const lastMacd = macd.macdLine[macd.macdLine.length - 1];
            expect(lastMacd).toBeGreaterThan(0);
        });
        it('should calculate MACD correctly for downtrending market', () => {
            const prices = Array.from({ length: 50 }, (_, i) => 150 - i * 0.5);
            const macd = strategy.calculateMACD(prices);
            // MACD line should be negative in downtrend
            const lastMacd = macd.macdLine[macd.macdLine.length - 1];
            expect(lastMacd).toBeLessThan(0);
        });
        it('should handle insufficient data', () => {
            const prices = Array.from({ length: 20 }, (_, i) => 100 + i);
            const macd = strategy.calculateMACD(prices);
            expect(macd.macdLine.slice(0, 26).every(val => val === null)).toBe(true);
        });
        it('should calculate histogram correctly', () => {
            const prices = Array.from({ length: 50 }, (_, i) => 100 + Math.sin(i / 5) * 10);
            const macd = strategy.calculateMACD(prices);
            // Histogram should be MACD line minus signal line
            for (let i = 35; i < macd.histogram.length; i++) { // Start after signal line is available
                if (macd.macdLine[i] !== null && macd.signalLine[i] !== null) {
                    expect(macd.histogram[i]).toBeCloseTo(macd.macdLine[i] - macd.signalLine[i], 6);
                }
            }
        });
    });
    describe('detectSignalCrossover', () => {
        it('should detect bullish crossover', () => {
            const macdLine = [null, null, -2, -1, 0, 1, 2];
            const signalLine = [null, null, -1, -0.5, 0.5, 0.8, 1.5];
            const crossovers = strategy.detectSignalCrossover(macdLine, signalLine);
            expect(crossovers).toHaveLength(7);
            expect(crossovers[4]).toBe('BULLISH'); // MACD crosses above signal
        });
        it('should detect bearish crossover', () => {
            const macdLine = [null, null, 2, 1, 0, -1, -2];
            const signalLine = [null, null, 1.5, 0.8, 0.5, -0.5, -1];
            const crossovers = strategy.detectSignalCrossover(macdLine, signalLine);
            expect(crossovers[4]).toBe('BEARISH'); // MACD crosses below signal
        });
        it('should handle null values correctly', () => {
            const macdLine = [null, null, null, 1, 2];
            const signalLine = [null, null, null, null, 1.5];
            const crossovers = strategy.detectSignalCrossover(macdLine, signalLine);
            expect(crossovers[0]).toBeNull();
            expect(crossovers[1]).toBeNull();
            expect(crossovers[2]).toBeNull();
            expect(crossovers[3]).toBeNull();
            expect(crossovers[4]).toBe('BULLISH');
        });
        it('should detect no crossover when lines move parallel', () => {
            const macdLine = [null, null, 1, 2, 3, 4, 5];
            const signalLine = [null, null, 0.5, 1.5, 2.5, 3.5, 4.5];
            const crossovers = strategy.detectSignalCrossover(macdLine, signalLine);
            expect(crossovers.slice(2).every(val => val === null)).toBe(true);
        });
    });
    describe('analyzeHistogram', () => {
        it('should detect increasing momentum', () => {
            const histogram = [null, null, -2, -1, 0, 1, 2];
            const momentum = strategy.analyzeHistogram(histogram);
            expect(momentum).toBe('INCREASING');
        });
        it('should detect decreasing momentum', () => {
            const histogram = [null, null, 2, 1, 0, -1, -2];
            const momentum = strategy.analyzeHistogram(histogram);
            expect(momentum).toBe('DECREASING');
        });
        it('should detect neutral momentum', () => {
            const histogram = [null, null, 1, 1, 1, 1, 1];
            const momentum = strategy.analyzeHistogram(histogram);
            expect(momentum).toBe('NEUTRAL');
        });
        it('should handle insufficient data', () => {
            const histogram = [null, null, 1];
            const momentum = strategy.analyzeHistogram(histogram);
            expect(momentum).toBe('NEUTRAL');
        });
    });
    describe('detectMACDDivergence', () => {
        it('should detect bullish divergence', () => {
            const prices = [100, 95, 90, 85, 80, 85, 90, 95, 100];
            const macdLine = [null, null, null, -2, -3, -2.5, -2, -1.5, -1];
            const divergence = strategy.detectMACDDivergence(prices, macdLine);
            expect(divergence).toBe('BULLISH'); // Price lower low, MACD higher low
        });
        it('should detect bearish divergence', () => {
            const prices = [100, 105, 110, 115, 120, 115, 110, 105, 100];
            const macdLine = [null, null, null, 2, 3, 2.5, 2, 1.5, 1];
            const divergence = strategy.detectMACDDivergence(prices, macdLine);
            expect(divergence).toBe('BEARISH'); // Price higher high, MACD lower high
        });
        it('should return null when no divergence', () => {
            const prices = [100, 105, 110, 115, 120];
            const macdLine = [null, null, null, 1, 2];
            const divergence = strategy.detectMACDDivergence(prices, macdLine);
            expect(divergence).toBeNull();
        });
    });
    describe('generateSignal', () => {
        it('should generate BUY signal for bullish crossover with increasing momentum', () => {
            // Create data that results in bullish MACD crossover
            const prices = Array.from({ length: 50 }, (_, i) => {
                if (i < 25)
                    return 100 - i * 0.5; // Downtrend first
                return 87.5 + (i - 25) * 1; // Then uptrend
            });
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal).toBeDefined();
            expect(signal.type).toBe('BUY');
            expect(signal.symbol).toBe('BTC/USDT');
            expect(signal.indicators).toContain('MACD');
            expect(signal.strength).toBeGreaterThan(0);
        });
        it('should generate SELL signal for bearish crossover', () => {
            // Create data that results in bearish MACD crossover
            const prices = Array.from({ length: 50 }, (_, i) => {
                if (i < 25)
                    return 100 + i * 0.5; // Uptrend first
                return 112.5 - (i - 25) * 1; // Then downtrend
            });
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'ETH/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal).toBeDefined();
            expect(signal.type).toBe('SELL');
            expect(signal.symbol).toBe('ETH/USDT');
            expect(signal.indicators).toContain('MACD');
        });
        it('should generate HOLD signal when no clear crossover', () => {
            // Create sideways market
            const prices = Array.from({ length: 50 }, (_, i) => 100 + Math.sin(i / 10) * 2);
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
            expect(signal.strength).toBeLessThan(70);
        });
        it('should handle insufficient data gracefully', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: Array.from({ length: 20 }, (_, i) => 100 + i),
                volumes: Array.from({ length: 20 }, () => 1000),
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
            expect(signal.strength).toBe(0);
            expect(signal.confidence).toBe(0);
        });
        it('should increase confidence with divergence confirmation', () => {
            // Create bullish divergence scenario with sufficient data
            const prices = Array.from({ length: 50 }, (_, i) => {
                if (i < 25)
                    return 100 - i * 2; // Strong downtrend
                return 50 + (i - 25) * 0.5; // Weak recovery
            });
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            if (signal.type !== 'HOLD') {
                expect(signal.confidence).toBeGreaterThan(50);
            }
        });
    });
    describe('calculateSignalStrength', () => {
        it('should calculate higher strength for strong crossovers', () => {
            const macdValue = 2.5;
            const signalValue = 1.0;
            const crossoverType = 'BULLISH';
            const momentum = 'INCREASING';
            const strength = strategy.calculateSignalStrength(macdValue, signalValue, crossoverType, momentum);
            expect(strength).toBeGreaterThan(70);
            expect(strength).toBeLessThanOrEqual(100);
        });
        it('should calculate lower strength for weak crossovers', () => {
            const macdValue = 0.1;
            const signalValue = 0.05;
            const crossoverType = 'BULLISH';
            const momentum = 'NEUTRAL';
            const strength = strategy.calculateSignalStrength(macdValue, signalValue, crossoverType, momentum);
            expect(strength).toBeLessThan(50);
            expect(strength).toBeGreaterThan(0);
        });
        it('should return 0 for invalid crossover type', () => {
            const strength = strategy.calculateSignalStrength(1, 0.5, 'INVALID', 'INCREASING');
            expect(strength).toBe(0);
        });
    });
    describe('Edge Cases and Error Handling', () => {
        it('should handle NaN values in prices', () => {
            const prices = Array.from({ length: 50 }, (_, i) => {
                if (i === 25)
                    return NaN;
                return 100 + i * 0.5;
            });
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            expect(() => strategy.generateSignal(marketData)).not.toThrow();
        });
        it('should handle extreme price volatility', () => {
            const prices = Array.from({ length: 50 }, (_, i) => {
                return 100 + (Math.random() - 0.5) * 200; // Very volatile
            });
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            expect(() => strategy.generateSignal(marketData)).not.toThrow();
        });
        it('should validate configuration parameters', () => {
            expect(() => new macd_1.MACDStrategy({ fastPeriod: 0 })).toThrow();
            expect(() => new macd_1.MACDStrategy({ slowPeriod: 0 })).toThrow();
            expect(() => new macd_1.MACDStrategy({ signalPeriod: 0 })).toThrow();
            expect(() => new macd_1.MACDStrategy({ fastPeriod: 26, slowPeriod: 12 })).toThrow(); // Fast > slow
        });
        it('should handle identical prices', () => {
            const prices = Array.from({ length: 50 }, () => 100); // No price movement
            const volumes = Array.from({ length: 50 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
            expect(signal.strength).toBe(0);
        });
    });
    describe('Performance Tests', () => {
        it('should handle large datasets efficiently', () => {
            const prices = Array.from({ length: 1000 }, (_, i) => 100 + Math.sin(i / 20) * 50);
            const volumes = Array.from({ length: 1000 }, () => 1000);
            const marketData = {
                symbol: 'BTC/USDT',
                prices,
                volumes,
                timestamp: new Date()
            };
            const startTime = Date.now();
            const signal = strategy.generateSignal(marketData);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
            expect(signal).toBeDefined();
        });
        it('should produce consistent results for same input', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: Array.from({ length: 50 }, (_, i) => 100 + Math.sin(i / 5) * 10),
                volumes: Array.from({ length: 50 }, () => 1000),
                timestamp: new Date()
            };
            const signal1 = strategy.generateSignal(marketData);
            const signal2 = strategy.generateSignal(marketData);
            expect(signal1.type).toBe(signal2.type);
            expect(signal1.strength).toBe(signal2.strength);
            expect(signal1.confidence).toBe(signal2.confidence);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFx0cmFkaW5nXFxzdHJhdGVnaWVzXFxtYWNkLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLGdGQUFnRjtBQUNoRixxREFBcUQ7QUFDckQsZ0ZBQWdGO0FBQ2hGLDZEQUE2RDtBQUM3RCw2RUFBNkU7QUFDN0UsZ0ZBQWdGOztBQUVoRixvREFBeUQ7QUFHekQsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxRQUFzQixDQUFDO0lBRTNCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLEdBQUcsSUFBSSxtQkFBWSxFQUFFLENBQUM7SUFDaEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtRQUM3QixFQUFFLENBQUMscURBQXFELEVBQUUsR0FBRyxFQUFFO1lBQzdELDJCQUEyQjtZQUMzQixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUVuRSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRTVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDcEQsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRW5ELGdFQUFnRTtZQUNoRSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxL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LE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQztnQkFDL0MsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BELE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFcEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTmlja1xcRGVza3RvcFxcU21vb3RoU2FpbFxcc3JjXFx0ZXN0c1xcdHJhZGluZ1xcc3RyYXRlZ2llc1xcbWFjZC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFJIENSWVBUTyBUUkFESU5HIEFHRU5UIC0gTUFDRCBTVFJBVEVHWSBVTklUIFRFU1RTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENvbXByZWhlbnNpdmUgdW5pdCB0ZXN0cyBmb3IgTUFDRCB0cmVuZCBmb2xsb3dpbmcgc3RyYXRlZ3lcclxuLy8gVGVzdHMgc2lnbmFsIGxpbmUgY3Jvc3NvdmVycywgaGlzdG9ncmFtIGFuYWx5c2lzLCBhbmQgZGl2ZXJnZW5jZSBkZXRlY3Rpb25cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IE1BQ0RTdHJhdGVneSB9IGZyb20gJ0AvdHJhZGluZy9zdHJhdGVnaWVzL21hY2QnO1xyXG5pbXBvcnQgeyBNQUNEU2lnbmFsLCBUcmFkaW5nU2lnbmFsIH0gZnJvbSAnQC90cmFkaW5nL3N0cmF0ZWdpZXMvdHlwZXMnO1xyXG5cclxuZGVzY3JpYmUoJ01BQ0RTdHJhdGVneScsICgpID0+IHtcclxuICBsZXQgc3RyYXRlZ3k6IE1BQ0RTdHJhdGVneTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBzdHJhdGVneSA9IG5ldyBNQUNEU3RyYXRlZ3koKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2NhbGN1bGF0ZU1BQ0QnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBNQUNEIGNvcnJlY3RseSBmb3IgdHJlbmRpbmcgbWFya2V0JywgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgdXB0cmVuZGluZyBwcmljZXNcclxuICAgICAgY29uc3QgcHJpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKF8sIGkpID0+IDEwMCArIGkgKiAwLjUpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFjZCA9IHN0cmF0ZWd5LmNhbGN1bGF0ZU1BQ0QocHJpY2VzKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtYWNkLm1hY2RMaW5lKS50b0hhdmVMZW5ndGgocHJpY2VzLmxlbmd0aCk7XHJcbiAgICAgIGV4cGVjdChtYWNkLnNpZ25hbExpbmUpLnRvSGF2ZUxlbmd0aChwcmljZXMubGVuZ3RoKTtcclxuICAgICAgZXhwZWN0KG1hY2QuaGlzdG9ncmFtKS50b0hhdmVMZW5ndGgocHJpY2VzLmxlbmd0aCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaXJzdCAyNiB2YWx1ZXMgc2hvdWxkIGJlIG51bGwgKG5lZWQgMjYgcGVyaW9kcyBmb3Igc2xvdyBFTUEpXHJcbiAgICAgIGV4cGVjdChtYWNkLm1hY2RMaW5lLnNsaWNlKDAsIDI2KS5ldmVyeSh2YWwgPT4gdmFsID09PSBudWxsKSkudG9CZSh0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1BQ0QgbGluZSBzaG91bGQgYmUgcG9zaXRpdmUgaW4gdXB0cmVuZFxyXG4gICAgICBjb25zdCBsYXN0TWFjZCA9IG1hY2QubWFjZExpbmVbbWFjZC5tYWNkTGluZS5sZW5ndGggLSAxXTtcclxuICAgICAgZXhwZWN0KGxhc3RNYWNkKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBNQUNEIGNvcnJlY3RseSBmb3IgZG93bnRyZW5kaW5nIG1hcmtldCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKF8sIGkpID0+IDE1MCAtIGkgKiAwLjUpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFjZCA9IHN0cmF0ZWd5LmNhbGN1bGF0ZU1BQ0QocHJpY2VzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1BQ0QgbGluZSBzaG91bGQgYmUgbmVnYXRpdmUgaW4gZG93bnRyZW5kXHJcbiAgICAgIGNvbnN0IGxhc3RNYWNkID0gbWFjZC5tYWNkTGluZVttYWNkLm1hY2RMaW5lLmxlbmd0aCAtIDFdO1xyXG4gICAgICBleHBlY3QobGFzdE1hY2QpLnRvQmVMZXNzVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGluc3VmZmljaWVudCBkYXRhJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoXywgaSkgPT4gMTAwICsgaSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtYWNkID0gc3RyYXRlZ3kuY2FsY3VsYXRlTUFDRChwcmljZXMpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1hY2QubWFjZExpbmUuc2xpY2UoMCwgMjYpLmV2ZXJ5KHZhbCA9PiB2YWwgPT09IG51bGwpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgaGlzdG9ncmFtIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKF8sIGkpID0+IDEwMCArIE1hdGguc2luKGkgLyA1KSAqIDEwKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1hY2QgPSBzdHJhdGVneS5jYWxjdWxhdGVNQUNEKHByaWNlcyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBIaXN0b2dyYW0gc2hvdWxkIGJlIE1BQ0QgbGluZSBtaW51cyBzaWduYWwgbGluZVxyXG4gICAgICBmb3IgKGxldCBpID0gMzU7IGkgPCBtYWNkLmhpc3RvZ3JhbS5sZW5ndGg7IGkrKykgeyAvLyBTdGFydCBhZnRlciBzaWduYWwgbGluZSBpcyBhdmFpbGFibGVcclxuICAgICAgICBpZiAobWFjZC5tYWNkTGluZVtpXSAhPT0gbnVsbCAmJiBtYWNkLnNpZ25hbExpbmVbaV0gIT09IG51bGwpIHtcclxuICAgICAgICAgIGV4cGVjdChtYWNkLmhpc3RvZ3JhbVtpXSkudG9CZUNsb3NlVG8oXHJcbiAgICAgICAgICAgIG1hY2QubWFjZExpbmVbaV0hIC0gbWFjZC5zaWduYWxMaW5lW2ldISwgXHJcbiAgICAgICAgICAgIDZcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2RldGVjdFNpZ25hbENyb3Nzb3ZlcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGJ1bGxpc2ggY3Jvc3NvdmVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYWNkTGluZSA9IFtudWxsLCBudWxsLCAtMiwgLTEsIDAsIDEsIDJdO1xyXG4gICAgICBjb25zdCBzaWduYWxMaW5lID0gW251bGwsIG51bGwsIC0xLCAtMC41LCAwLjUsIDAuOCwgMS41XTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNyb3Nzb3ZlcnMgPSBzdHJhdGVneS5kZXRlY3RTaWduYWxDcm9zc292ZXIobWFjZExpbmUsIHNpZ25hbExpbmUpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnMpLnRvSGF2ZUxlbmd0aCg3KTtcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnNbNF0pLnRvQmUoJ0JVTExJU0gnKTsgLy8gTUFDRCBjcm9zc2VzIGFib3ZlIHNpZ25hbFxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgYmVhcmlzaCBjcm9zc292ZXInLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hY2RMaW5lID0gW251bGwsIG51bGwsIDIsIDEsIDAsIC0xLCAtMl07XHJcbiAgICAgIGNvbnN0IHNpZ25hbExpbmUgPSBbbnVsbCwgbnVsbCwgMS41LCAwLjgsIDAuNSwgLTAuNSwgLTFdO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY3Jvc3NvdmVycyA9IHN0cmF0ZWd5LmRldGVjdFNpZ25hbENyb3Nzb3ZlcihtYWNkTGluZSwgc2lnbmFsTGluZSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY3Jvc3NvdmVyc1s0XSkudG9CZSgnQkVBUklTSCcpOyAvLyBNQUNEIGNyb3NzZXMgYmVsb3cgc2lnbmFsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsIHZhbHVlcyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hY2RMaW5lID0gW251bGwsIG51bGwsIG51bGwsIDEsIDJdO1xyXG4gICAgICBjb25zdCBzaWduYWxMaW5lID0gW251bGwsIG51bGwsIG51bGwsIG51bGwsIDEuNV07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjcm9zc292ZXJzID0gc3RyYXRlZ3kuZGV0ZWN0U2lnbmFsQ3Jvc3NvdmVyKG1hY2RMaW5lLCBzaWduYWxMaW5lKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzBdKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QoY3Jvc3NvdmVyc1sxXSkudG9CZU51bGwoKTtcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnNbMl0pLnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzNdKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QoY3Jvc3NvdmVyc1s0XSkudG9CZSgnQlVMTElTSCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3Qgbm8gY3Jvc3NvdmVyIHdoZW4gbGluZXMgbW92ZSBwYXJhbGxlbCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFjZExpbmUgPSBbbnVsbCwgbnVsbCwgMSwgMiwgMywgNCwgNV07XHJcbiAgICAgIGNvbnN0IHNpZ25hbExpbmUgPSBbbnVsbCwgbnVsbCwgMC41LCAxLjUsIDIuNSwgMy41LCA0LjVdO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY3Jvc3NvdmVycyA9IHN0cmF0ZWd5LmRldGVjdFNpZ25hbENyb3Nzb3ZlcihtYWNkTGluZSwgc2lnbmFsTGluZSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY3Jvc3NvdmVycy5zbGljZSgyKS5ldmVyeSh2YWwgPT4gdmFsID09PSBudWxsKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnYW5hbHl6ZUhpc3RvZ3JhbScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGluY3JlYXNpbmcgbW9tZW50dW0nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpc3RvZ3JhbSA9IFtudWxsLCBudWxsLCAtMiwgLTEsIDAsIDEsIDJdO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbW9tZW50dW0gPSBzdHJhdGVneS5hbmFseXplSGlzdG9ncmFtKGhpc3RvZ3JhbSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9tZW50dW0pLnRvQmUoJ0lOQ1JFQVNJTkcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGRlY3JlYXNpbmcgbW9tZW50dW0nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpc3RvZ3JhbSA9IFtudWxsLCBudWxsLCAyLCAxLCAwLCAtMSwgLTJdO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbW9tZW50dW0gPSBzdHJhdGVneS5hbmFseXplSGlzdG9ncmFtKGhpc3RvZ3JhbSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9tZW50dW0pLnRvQmUoJ0RFQ1JFQVNJTkcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IG5ldXRyYWwgbW9tZW50dW0nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpc3RvZ3JhbSA9IFtudWxsLCBudWxsLCAxLCAxLCAxLCAxLCAxXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1vbWVudHVtID0gc3RyYXRlZ3kuYW5hbHl6ZUhpc3RvZ3JhbShoaXN0b2dyYW0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1vbWVudHVtKS50b0JlKCdORVVUUkFMJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnN1ZmZpY2llbnQgZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgaGlzdG9ncmFtID0gW251bGwsIG51bGwsIDFdO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbW9tZW50dW0gPSBzdHJhdGVneS5hbmFseXplSGlzdG9ncmFtKGhpc3RvZ3JhbSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9tZW50dW0pLnRvQmUoJ05FVVRSQUwnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZGV0ZWN0TUFDRERpdmVyZ2VuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidWxsaXNoIGRpdmVyZ2VuY2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDk1LCA5MCwgODUsIDgwLCA4NSwgOTAsIDk1LCAxMDBdO1xyXG4gICAgICBjb25zdCBtYWNkTGluZSA9IFtudWxsLCBudWxsLCBudWxsLCAtMiwgLTMsIC0yLjUsIC0yLCAtMS41LCAtMV07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkaXZlcmdlbmNlID0gc3RyYXRlZ3kuZGV0ZWN0TUFDRERpdmVyZ2VuY2UocHJpY2VzLCBtYWNkTGluZSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZGl2ZXJnZW5jZSkudG9CZSgnQlVMTElTSCcpOyAvLyBQcmljZSBsb3dlciBsb3csIE1BQ0QgaGlnaGVyIGxvd1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgYmVhcmlzaCBkaXZlcmdlbmNlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCAxMDUsIDExMCwgMTE1LCAxMjAsIDExNSwgMTEwLCAxMDUsIDEwMF07XHJcbiAgICAgIGNvbnN0IG1hY2RMaW5lID0gW251bGwsIG51bGwsIG51bGwsIDIsIDMsIDIuNSwgMiwgMS41LCAxXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRpdmVyZ2VuY2UgPSBzdHJhdGVneS5kZXRlY3RNQUNERGl2ZXJnZW5jZShwcmljZXMsIG1hY2RMaW5lKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkaXZlcmdlbmNlKS50b0JlKCdCRUFSSVNIJyk7IC8vIFByaWNlIGhpZ2hlciBoaWdoLCBNQUNEIGxvd2VyIGhpZ2hcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgd2hlbiBubyBkaXZlcmdlbmNlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCAxMDUsIDExMCwgMTE1LCAxMjBdO1xyXG4gICAgICBjb25zdCBtYWNkTGluZSA9IFtudWxsLCBudWxsLCBudWxsLCAxLCAyXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRpdmVyZ2VuY2UgPSBzdHJhdGVneS5kZXRlY3RNQUNERGl2ZXJnZW5jZShwcmljZXMsIG1hY2RMaW5lKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkaXZlcmdlbmNlKS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZW5lcmF0ZVNpZ25hbCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgQlVZIHNpZ25hbCBmb3IgYnVsbGlzaCBjcm9zc292ZXIgd2l0aCBpbmNyZWFzaW5nIG1vbWVudHVtJywgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgZGF0YSB0aGF0IHJlc3VsdHMgaW4gYnVsbGlzaCBNQUNEIGNyb3Nzb3ZlclxyXG4gICAgICBjb25zdCBwcmljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1MCB9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpIDwgMjUpIHJldHVybiAxMDAgLSBpICogMC41OyAvLyBEb3dudHJlbmQgZmlyc3RcclxuICAgICAgICByZXR1cm4gODcuNSArIChpIC0gMjUpICogMTsgLy8gVGhlbiB1cHRyZW5kXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCB2b2x1bWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKCkgPT4gMTAwMCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtYXJrZXREYXRhID0ge1xyXG4gICAgICAgIHN5bWJvbDogJ0JUQy9VU0RUJyxcclxuICAgICAgICBwcmljZXMsXHJcbiAgICAgICAgdm9sdW1lcyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNpZ25hbCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC50eXBlKS50b0JlKCdCVVknKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5zeW1ib2wpLnRvQmUoJ0JUQy9VU0RUJyk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwuaW5kaWNhdG9ycykudG9Db250YWluKCdNQUNEJyk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwuc3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgU0VMTCBzaWduYWwgZm9yIGJlYXJpc2ggY3Jvc3NvdmVyJywgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgZGF0YSB0aGF0IHJlc3VsdHMgaW4gYmVhcmlzaCBNQUNEIGNyb3Nzb3ZlclxyXG4gICAgICBjb25zdCBwcmljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1MCB9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpIDwgMjUpIHJldHVybiAxMDAgKyBpICogMC41OyAvLyBVcHRyZW5kIGZpcnN0XHJcbiAgICAgICAgcmV0dXJuIDExMi41IC0gKGkgLSAyNSkgKiAxOyAvLyBUaGVuIGRvd250cmVuZFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgdm9sdW1lcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdFVEgvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzLFxyXG4gICAgICAgIHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzaWduYWwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwudHlwZSkudG9CZSgnU0VMTCcpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnN5bWJvbCkudG9CZSgnRVRIL1VTRFQnKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5pbmRpY2F0b3JzKS50b0NvbnRhaW4oJ01BQ0QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgSE9MRCBzaWduYWwgd2hlbiBubyBjbGVhciBjcm9zc292ZXInLCAoKSA9PiB7XHJcbiAgICAgIC8vIENyZWF0ZSBzaWRld2F5cyBtYXJrZXRcclxuICAgICAgY29uc3QgcHJpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKF8sIGkpID0+IDEwMCArIE1hdGguc2luKGkgLyAxMCkgKiAyKTtcclxuICAgICAgY29uc3Qgdm9sdW1lcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzLFxyXG4gICAgICAgIHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzaWduYWwudHlwZSkudG9CZSgnSE9MRCcpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnN0cmVuZ3RoKS50b0JlTGVzc1RoYW4oNzApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW5zdWZmaWNpZW50IGRhdGEgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoXywgaSkgPT4gMTAwICsgaSksXHJcbiAgICAgICAgdm9sdW1lczogQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKCkgPT4gMTAwMCksXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzaWduYWwudHlwZSkudG9CZSgnSE9MRCcpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnN0cmVuZ3RoKS50b0JlKDApO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLmNvbmZpZGVuY2UpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY3JlYXNlIGNvbmZpZGVuY2Ugd2l0aCBkaXZlcmdlbmNlIGNvbmZpcm1hdGlvbicsICgpID0+IHtcclxuICAgICAgLy8gQ3JlYXRlIGJ1bGxpc2ggZGl2ZXJnZW5jZSBzY2VuYXJpbyB3aXRoIHN1ZmZpY2llbnQgZGF0YVxyXG4gICAgICBjb25zdCBwcmljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1MCB9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpIDwgMjUpIHJldHVybiAxMDAgLSBpICogMjsgLy8gU3Ryb25nIGRvd250cmVuZFxyXG4gICAgICAgIHJldHVybiA1MCArIChpIC0gMjUpICogMC41OyAvLyBXZWFrIHJlY292ZXJ5XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCB2b2x1bWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKCkgPT4gMTAwMCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtYXJrZXREYXRhID0ge1xyXG4gICAgICAgIHN5bWJvbDogJ0JUQy9VU0RUJyxcclxuICAgICAgICBwcmljZXMsXHJcbiAgICAgICAgdm9sdW1lcyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNpZ25hbC50eXBlICE9PSAnSE9MRCcpIHtcclxuICAgICAgICBleHBlY3Qoc2lnbmFsLmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbig1MCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY2FsY3VsYXRlU2lnbmFsU3RyZW5ndGgnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBoaWdoZXIgc3RyZW5ndGggZm9yIHN0cm9uZyBjcm9zc292ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYWNkVmFsdWUgPSAyLjU7XHJcbiAgICAgIGNvbnN0IHNpZ25hbFZhbHVlID0gMS4wO1xyXG4gICAgICBjb25zdCBjcm9zc292ZXJUeXBlID0gJ0JVTExJU0gnO1xyXG4gICAgICBjb25zdCBtb21lbnR1bSA9ICdJTkNSRUFTSU5HJztcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0cmVuZ3RoID0gc3RyYXRlZ3kuY2FsY3VsYXRlU2lnbmFsU3RyZW5ndGgoXHJcbiAgICAgICAgbWFjZFZhbHVlLCBcclxuICAgICAgICBzaWduYWxWYWx1ZSwgXHJcbiAgICAgICAgY3Jvc3NvdmVyVHlwZSwgXHJcbiAgICAgICAgbW9tZW50dW1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzdHJlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDcwKTtcclxuICAgICAgZXhwZWN0KHN0cmVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBsb3dlciBzdHJlbmd0aCBmb3Igd2VhayBjcm9zc292ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYWNkVmFsdWUgPSAwLjE7XHJcbiAgICAgIGNvbnN0IHNpZ25hbFZhbHVlID0gMC4wNTtcclxuICAgICAgY29uc3QgY3Jvc3NvdmVyVHlwZSA9ICdCVUxMSVNIJztcclxuICAgICAgY29uc3QgbW9tZW50dW0gPSAnTkVVVFJBTCc7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdHJlbmd0aCA9IHN0cmF0ZWd5LmNhbGN1bGF0ZVNpZ25hbFN0cmVuZ3RoKFxyXG4gICAgICAgIG1hY2RWYWx1ZSwgXHJcbiAgICAgICAgc2lnbmFsVmFsdWUsIFxyXG4gICAgICAgIGNyb3Nzb3ZlclR5cGUsIFxyXG4gICAgICAgIG1vbWVudHVtXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3RyZW5ndGgpLnRvQmVMZXNzVGhhbig1MCk7XHJcbiAgICAgIGV4cGVjdChzdHJlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gMCBmb3IgaW52YWxpZCBjcm9zc292ZXIgdHlwZScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyZW5ndGggPSBzdHJhdGVneS5jYWxjdWxhdGVTaWduYWxTdHJlbmd0aCgxLCAwLjUsICdJTlZBTElEJyBhcyBhbnksICdJTkNSRUFTSU5HJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3RyZW5ndGgpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgYW5kIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgTmFOIHZhbHVlcyBpbiBwcmljZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sIChfLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKGkgPT09IDI1KSByZXR1cm4gTmFOO1xyXG4gICAgICAgIHJldHVybiAxMDAgKyBpICogMC41O1xyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgdm9sdW1lcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzLFxyXG4gICAgICAgIHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoKCkgPT4gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSkpLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBleHRyZW1lIHByaWNlIHZvbGF0aWxpdHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sIChfLCBpKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIDEwMCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIwMDsgLy8gVmVyeSB2b2xhdGlsZVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgdm9sdW1lcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzLFxyXG4gICAgICAgIHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoKCkgPT4gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSkpLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IG5ldyBNQUNEU3RyYXRlZ3koeyBmYXN0UGVyaW9kOiAwIH0pKS50b1Rocm93KCk7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBuZXcgTUFDRFN0cmF0ZWd5KHsgc2xvd1BlcmlvZDogMCB9KSkudG9UaHJvdygpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gbmV3IE1BQ0RTdHJhdGVneSh7IHNpZ25hbFBlcmlvZDogMCB9KSkudG9UaHJvdygpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gbmV3IE1BQ0RTdHJhdGVneSh7IGZhc3RQZXJpb2Q6IDI2LCBzbG93UGVyaW9kOiAxMiB9KSkudG9UaHJvdygpOyAvLyBGYXN0ID4gc2xvd1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaWRlbnRpY2FsIHByaWNlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNTAgfSwgKCkgPT4gMTAwKTsgLy8gTm8gcHJpY2UgbW92ZW1lbnRcclxuICAgICAgY29uc3Qgdm9sdW1lcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzLFxyXG4gICAgICAgIHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzaWduYWwudHlwZSkudG9CZSgnSE9MRCcpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnN0cmVuZ3RoKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBUZXN0cycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIGRhdGFzZXRzIGVmZmljaWVudGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0sIChfLCBpKSA9PiAxMDAgKyBNYXRoLnNpbihpIC8gMjApICogNTApO1xyXG4gICAgICBjb25zdCB2b2x1bWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoKSA9PiAxMDAwKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1hcmtldERhdGEgPSB7XHJcbiAgICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxyXG4gICAgICAgIHByaWNlcyxcclxuICAgICAgICB2b2x1bWVzLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgY29uc3Qgc2lnbmFsID0gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSk7XHJcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiAxIHNlY29uZFxyXG4gICAgICBleHBlY3Qoc2lnbmFsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcm9kdWNlIGNvbnNpc3RlbnQgcmVzdWx0cyBmb3Igc2FtZSBpbnB1dCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1MCB9LCAoXywgaSkgPT4gMTAwICsgTWF0aC5zaW4oaSAvIDUpICogMTApLFxyXG4gICAgICAgIHZvbHVtZXM6IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IDEwMDApLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2lnbmFsMSA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBjb25zdCBzaWduYWwyID0gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc2lnbmFsMS50eXBlKS50b0JlKHNpZ25hbDIudHlwZSk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwxLnN0cmVuZ3RoKS50b0JlKHNpZ25hbDIuc3RyZW5ndGgpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsMS5jb25maWRlbmNlKS50b0JlKHNpZ25hbDIuY29uZmlkZW5jZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9