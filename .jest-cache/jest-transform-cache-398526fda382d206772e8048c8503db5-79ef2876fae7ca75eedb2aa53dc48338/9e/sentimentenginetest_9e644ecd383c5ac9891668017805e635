8282f36e789a123fa7e90aa40c4d7497
"use strict";
/**
 * Sentiment Analysis Engine Tests
 * Unit tests for the sentiment analysis engine
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the individual monitors
jest.mock('../../../ai/sentiment/twitter-monitor');
jest.mock('../../../ai/sentiment/reddit-monitor');
jest.mock('../../../ai/sentiment/news-monitor');
jest.mock('../../../core/logging/logger');
const sentiment_engine_1 = require("../../../ai/sentiment/sentiment-engine");
describe('SentimentAnalysisEngine', () => {
    let engine;
    let mockConfig;
    beforeEach(() => {
        mockConfig = {
            twitter: {
                apiKey: 'test_key',
                apiSecret: 'test_secret',
                accessToken: 'test_token',
                accessTokenSecret: 'test_token_secret',
                bearerToken: 'test_bearer'
            },
            reddit: {
                clientId: 'test_client_id',
                clientSecret: 'test_client_secret',
                username: 'test_user',
                password: 'test_pass',
                userAgent: 'test_agent'
            },
            news: {
                sources: ['coindesk', 'cointelegraph'],
                apiKeys: {},
                updateInterval: 15
            },
            weights: {
                twitter: 0.4,
                reddit: 0.35,
                news: 0.25
            },
            thresholds: {
                extremePositive: 70,
                extremeNegative: -70,
                rapidChange: 15,
                volumeSpike: 500
            }
        };
        engine = new sentiment_engine_1.SentimentAnalysisEngine(mockConfig);
    });
    afterEach(() => {
        if (engine) {
            engine.stopEngine();
        }
        jest.clearAllMocks();
    });
    describe('Weighted Sentiment Calculation', () => {
        it('should calculate weighted sentiment correctly', async () => {
            // Mock sentiment scores from different sources
            const mockTwitterScore = {
                source: 'twitter',
                score: 50,
                confidence: 80,
                volume: 100,
                timestamp: new Date(),
                keyTopics: ['bitcoin', 'bullish']
            };
            const mockRedditScore = {
                source: 'reddit',
                score: 30,
                confidence: 70,
                volume: 50,
                timestamp: new Date(),
                keyTopics: ['ethereum', 'defi']
            };
            const mockNewsScore = {
                source: 'news',
                score: 20,
                confidence: 90,
                volume: 25,
                timestamp: new Date(),
                keyTopics: ['regulation', 'adoption']
            };
            // Mock the monitor methods
            const mockTwitterMonitor = require('../../../ai/sentiment/twitter-monitor').TwitterSentimentMonitor;
            const mockRedditMonitor = require('../../../ai/sentiment/reddit-monitor').RedditSentimentMonitor;
            const mockNewsMonitor = require('../../../ai/sentiment/news-monitor').NewsSentimentMonitor;
            mockTwitterMonitor.prototype.getCurrentSentiment = jest.fn().mockResolvedValue(mockTwitterScore);
            mockRedditMonitor.prototype.getCurrentSentiment = jest.fn().mockResolvedValue(mockRedditScore);
            mockNewsMonitor.prototype.getCurrentSentiment = jest.fn().mockResolvedValue(mockNewsScore);
            const result = await engine.getCurrentSentiment();
            expect(result).toBeDefined();
            expect(result.aggregatedScore).toBeGreaterThan(0);
            expect(result.confidence).toBeGreaterThan(0);
            expect(result.sources).toHaveLength(3);
            expect(result.weights).toBeDefined();
            expect(result.timestamp).toBeInstanceOf(Date);
        });
        it('should handle failed source gracefully', async () => {
            const mockTwitterScore = {
                source: 'twitter',
                score: 40,
                confidence: 75,
                volume: 80,
                timestamp: new Date(),
                keyTopics: ['bitcoin']
            };
            // Mock Twitter success, Reddit failure, News success
            const mockTwitterMonitor = require('../../../ai/sentiment/twitter-monitor').TwitterSentimentMonitor;
            const mockRedditMonitor = require('../../../ai/sentiment/reddit-monitor').RedditSentimentMonitor;
            const mockNewsMonitor = require('../../../ai/sentiment/news-monitor').NewsSentimentMonitor;
            mockTwitterMonitor.prototype.getCurrentSentiment = jest.fn().mockResolvedValue(mockTwitterScore);
            mockRedditMonitor.prototype.getCurrentSentiment = jest.fn().mockRejectedValue(new Error('Reddit API error'));
            mockNewsMonitor.prototype.getCurrentSentiment = jest.fn().mockResolvedValue({
                source: 'news',
                score: 25,
                confidence: 85,
                volume: 30,
                timestamp: new Date(),
                keyTopics: ['crypto']
            });
            const result = await engine.getCurrentSentiment();
            expect(result).toBeDefined();
            expect(result.sources).toHaveLength(3);
            expect(result.sources.find(s => s.source === 'reddit')?.score).toBe(0);
            expect(result.sources.find(s => s.source === 'reddit')?.confidence).toBe(0);
        });
    });
    describe('Position Sizing Adjustment', () => {
        it('should increase position size for positive sentiment', () => {
            // Create mock sentiment history
            const positiveSentiment = {
                aggregatedScore: 60,
                confidence: 80,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            // Access private method through type assertion
            engine.sentimentHistory = [positiveSentiment];
            const baseSizePercent = 2.0;
            const adjustedSize = engine.calculateSentimentPositionAdjustment(baseSizePercent);
            expect(adjustedSize).toBeGreaterThan(baseSizePercent);
            expect(adjustedSize).toBeLessThanOrEqual(baseSizePercent * 2.0); // Max 2x increase
        });
        it('should decrease position size for negative sentiment', () => {
            const negativeSentiment = {
                aggregatedScore: -50,
                confidence: 75,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            engine.sentimentHistory = [negativeSentiment];
            const baseSizePercent = 2.0;
            const adjustedSize = engine.calculateSentimentPositionAdjustment(baseSizePercent);
            expect(adjustedSize).toBeLessThan(baseSizePercent);
            expect(adjustedSize).toBeGreaterThanOrEqual(baseSizePercent * 0.5); // Min 0.5x decrease
        });
        it('should not adjust for neutral sentiment', () => {
            const neutralSentiment = {
                aggregatedScore: 5,
                confidence: 60,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            engine.sentimentHistory = [neutralSentiment];
            const baseSizePercent = 2.0;
            const adjustedSize = engine.calculateSentimentPositionAdjustment(baseSizePercent);
            expect(Math.abs(adjustedSize - baseSizePercent)).toBeLessThan(0.1);
        });
        it('should scale adjustment by confidence', () => {
            const lowConfidenceSentiment = {
                aggregatedScore: 60,
                confidence: 30, // Low confidence
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const highConfidenceSentiment = {
                aggregatedScore: 60,
                confidence: 90, // High confidence
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const baseSizePercent = 2.0;
            engine.sentimentHistory = [lowConfidenceSentiment];
            const lowConfidenceAdjustment = engine.calculateSentimentPositionAdjustment(baseSizePercent);
            engine.sentimentHistory = [highConfidenceSentiment];
            const highConfidenceAdjustment = engine.calculateSentimentPositionAdjustment(baseSizePercent);
            expect(highConfidenceAdjustment).toBeGreaterThan(lowConfidenceAdjustment);
        });
    });
    describe('Trend Analysis', () => {
        it('should detect bullish trend', () => {
            // Create ascending sentiment history
            const history = [];
            for (let i = 0; i < 10; i++) {
                history.push({
                    aggregatedScore: i * 5, // Increasing scores
                    confidence: 70,
                    sources: [],
                    weights: {},
                    timestamp: new Date(Date.now() - (10 - i) * 5 * 60 * 1000) // 5 minutes apart
                });
            }
            engine.sentimentHistory = history;
            const trends = engine.analyzeSentimentTrends();
            expect(trends).toHaveLength(1);
            expect(trends[0].direction).toBe('BULLISH');
            expect(trends[0].strength).toBeGreaterThan(0);
        });
        it('should detect bearish trend', () => {
            // Create descending sentiment history
            const history = [];
            for (let i = 0; i < 10; i++) {
                history.push({
                    aggregatedScore: 50 - i * 5, // Decreasing scores
                    confidence: 70,
                    sources: [],
                    weights: {},
                    timestamp: new Date(Date.now() - (10 - i) * 5 * 60 * 1000)
                });
            }
            engine.sentimentHistory = history;
            const trends = engine.analyzeSentimentTrends();
            expect(trends).toHaveLength(1);
            expect(trends[0].direction).toBe('BEARISH');
            expect(trends[0].strength).toBeGreaterThan(0);
        });
        it('should detect neutral trend for flat data', () => {
            // Create flat sentiment history
            const history = [];
            for (let i = 0; i < 10; i++) {
                history.push({
                    aggregatedScore: 25, // Constant score
                    confidence: 70,
                    sources: [],
                    weights: {},
                    timestamp: new Date(Date.now() - (10 - i) * 5 * 60 * 1000)
                });
            }
            engine.sentimentHistory = history;
            const trends = engine.analyzeSentimentTrends();
            expect(trends).toHaveLength(1);
            expect(trends[0].direction).toBe('NEUTRAL');
            expect(trends[0].strength).toBeLessThan(20);
        });
    });
    describe('Alert Generation', () => {
        it('should generate extreme positive alert', async () => {
            const extremePositiveSentiment = {
                aggregatedScore: 85, // Above threshold
                confidence: 80,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const alerts = await engine.generateSentimentAlerts(extremePositiveSentiment);
            expect(alerts).toHaveLength(1);
            expect(alerts[0].type).toBe('EXTREME_POSITIVE');
            expect(alerts[0].severity).toBe('HIGH');
        });
        it('should generate extreme negative alert', async () => {
            const extremeNegativeSentiment = {
                aggregatedScore: -85, // Below threshold
                confidence: 80,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const alerts = await engine.generateSentimentAlerts(extremeNegativeSentiment);
            expect(alerts).toHaveLength(1);
            expect(alerts[0].type).toBe('EXTREME_NEGATIVE');
            expect(alerts[0].severity).toBe('HIGH');
        });
        it('should generate rapid change alert', async () => {
            // Set up history with previous sentiment
            const previousSentiment = {
                aggregatedScore: 10,
                confidence: 70,
                sources: [],
                weights: {},
                timestamp: new Date(Date.now() - 5 * 60 * 1000)
            };
            const currentSentiment = {
                aggregatedScore: 30, // Change of 20, above rapid change threshold
                confidence: 70,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            engine.sentimentHistory = [previousSentiment];
            const alerts = await engine.generateSentimentAlerts(currentSentiment);
            expect(alerts).toHaveLength(1);
            expect(alerts[0].type).toBe('RAPID_CHANGE');
            expect(alerts[0].severity).toBe('MEDIUM');
        });
    });
    describe('Engine Status', () => {
        it('should return correct status when stopped', () => {
            const status = engine.getStatus();
            expect(status.isRunning).toBe(false);
            expect(status.historySize).toBe(0);
            expect(status.lastUpdate).toBeNull();
            expect(status.sources.twitter).toBe(true);
            expect(status.sources.reddit).toBe(true);
            expect(status.sources.news).toBe(true);
        });
    });
    describe('Recommendation Generation', () => {
        it('should generate bullish recommendations for high positive sentiment', () => {
            const positiveSentiment = {
                aggregatedScore: 60,
                confidence: 80,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const recommendations = engine.generateRecommendations(positiveSentiment, []);
            expect(recommendations.length).toBeGreaterThan(0);
            expect(recommendations.some((r) => r.includes('bullish'))).toBe(true);
        });
        it('should generate bearish recommendations for high negative sentiment', () => {
            const negativeSentiment = {
                aggregatedScore: -60,
                confidence: 80,
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const recommendations = engine.generateRecommendations(negativeSentiment, []);
            expect(recommendations.length).toBeGreaterThan(0);
            expect(recommendations.some((r) => r.includes('bearish'))).toBe(true);
        });
        it('should warn about low confidence', () => {
            const lowConfidenceSentiment = {
                aggregatedScore: 40,
                confidence: 25, // Low confidence
                sources: [],
                weights: {},
                timestamp: new Date()
            };
            const recommendations = engine.generateRecommendations(lowConfidenceSentiment, []);
            expect(recommendations.some((r) => r.includes('Low sentiment confidence'))).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxhaVxcc2VudGltZW50XFxzZW50aW1lbnQtZW5naW5lLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFLSCwrQkFBK0I7QUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDO0FBQ25ELElBQUksQ0FBQyxJQUFJLENBQUMsc0NBQXNDLENBQUMsQ0FBQztBQUNsRCxJQUFJLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBUDFDLDZFQUFpRjtBQVNqRixRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO0lBQ3ZDLElBQUksTUFBK0IsQ0FBQztJQUNwQyxJQUFJLFVBQTJCLENBQUM7SUFFaEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFVBQVUsR0FBRztZQUNYLE9BQU8sRUFBRTtnQkFDUCxNQUFNLEVBQUUsVUFBVTtnQkFDbEIsU0FBUyxFQUFFLGFBQWE7Z0JBQ3hCLFdBQVcsRUFBRSxZQUFZO2dCQUN6QixpQkFBaUIsRUFBRSxtQkFBbUI7Z0JBQ3RDLFdBQVcsRUFBRSxhQUFhO2FBQzNCO1lBQ0QsTUFBTSxFQUFFO2dCQUNOLFFBQVEsRUFBRSxnQkFBZ0I7Z0JBQzFCLFlBQVksRUFBRSxvQkFBb0I7Z0JBQ2xDLFFBQVEsRUFBRSxXQUFXO2dCQUNyQixRQUFRLEVBQUUsV0FBVztnQkFDckIsU0FBUyxFQUFFLFlBQVk7YUFDeEI7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFLGVBQWUsQ0FBQztnQkFDdEMsT0FBTyxFQUFFLEVBQUU7Z0JBQ1gsY0FBYyxFQUFFLEVBQUU7YUFDbkI7WUFDRCxPQUFPLEVBQUU7Z0JBQ1AsT0FBTyxFQUFFLEdBQUc7Z0JBQ1osTUFBTSxFQUFFLElBQUk7Z0JBQ1osSUFBSSxFQUFFLElBQUk7YUFD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QUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFxhaVxcc2VudGltZW50XFxzZW50aW1lbnQtZW5naW5lLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFNlbnRpbWVudCBBbmFseXNpcyBFbmdpbmUgVGVzdHNcclxuICogVW5pdCB0ZXN0cyBmb3IgdGhlIHNlbnRpbWVudCBhbmFseXNpcyBlbmdpbmVcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZW50aW1lbnRBbmFseXNpc0VuZ2luZSB9IGZyb20gJy4uLy4uLy4uL2FpL3NlbnRpbWVudC9zZW50aW1lbnQtZW5naW5lJztcclxuaW1wb3J0IHsgU2VudGltZW50Q29uZmlnLCBTZW50aW1lbnRTY29yZSwgV2VpZ2h0ZWRTZW50aW1lbnQgfSBmcm9tICcuLi8uLi8uLi9haS9zZW50aW1lbnQvdHlwZXMnO1xyXG5cclxuLy8gTW9jayB0aGUgaW5kaXZpZHVhbCBtb25pdG9yc1xyXG5qZXN0Lm1vY2soJy4uLy4uLy4uL2FpL3NlbnRpbWVudC90d2l0dGVyLW1vbml0b3InKTtcclxuamVzdC5tb2NrKCcuLi8uLi8uLi9haS9zZW50aW1lbnQvcmVkZGl0LW1vbml0b3InKTtcclxuamVzdC5tb2NrKCcuLi8uLi8uLi9haS9zZW50aW1lbnQvbmV3cy1tb25pdG9yJyk7XHJcbmplc3QubW9jaygnLi4vLi4vLi4vY29yZS9sb2dnaW5nL2xvZ2dlcicpO1xyXG5cclxuZGVzY3JpYmUoJ1NlbnRpbWVudEFuYWx5c2lzRW5naW5lJywgKCkgPT4ge1xyXG4gIGxldCBlbmdpbmU6IFNlbnRpbWVudEFuYWx5c2lzRW5naW5lO1xyXG4gIGxldCBtb2NrQ29uZmlnOiBTZW50aW1lbnRDb25maWc7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgbW9ja0NvbmZpZyA9IHtcclxuICAgICAgdHdpdHRlcjoge1xyXG4gICAgICAgIGFwaUtleTogJ3Rlc3Rfa2V5JyxcclxuICAgICAgICBhcGlTZWNyZXQ6ICd0ZXN0X3NlY3JldCcsXHJcbiAgICAgICAgYWNjZXNzVG9rZW46ICd0ZXN0X3Rva2VuJyxcclxuICAgICAgICBhY2Nlc3NUb2tlblNlY3JldDogJ3Rlc3RfdG9rZW5fc2VjcmV0JyxcclxuICAgICAgICBiZWFyZXJUb2tlbjogJ3Rlc3RfYmVhcmVyJ1xyXG4gICAgICB9LFxyXG4gICAgICByZWRkaXQ6IHtcclxuICAgICAgICBjbGllbnRJZDogJ3Rlc3RfY2xpZW50X2lkJyxcclxuICAgICAgICBjbGllbnRTZWNyZXQ6ICd0ZXN0X2NsaWVudF9zZWNyZXQnLFxyXG4gICAgICAgIHVzZXJuYW1lOiAndGVzdF91c2VyJyxcclxuICAgICAgICBwYXNzd29yZDogJ3Rlc3RfcGFzcycsXHJcbiAgICAgICAgdXNlckFnZW50OiAndGVzdF9hZ2VudCdcclxuICAgICAgfSxcclxuICAgICAgbmV3czoge1xyXG4gICAgICAgIHNvdXJjZXM6IFsnY29pbmRlc2snLCAnY29pbnRlbGVncmFwaCddLFxyXG4gICAgICAgIGFwaUtleXM6IHt9LFxyXG4gICAgICAgIHVwZGF0ZUludGVydmFsOiAxNVxyXG4gICAgICB9LFxyXG4gICAgICB3ZWlnaHRzOiB7XHJcbiAgICAgICAgdHdpdHRlcjogMC40LFxyXG4gICAgICAgIHJlZGRpdDogMC4zNSxcclxuICAgICAgICBuZXdzOiAwLjI1XHJcbiAgICAgIH0sXHJcbiAgICAgIHRocmVzaG9sZHM6IHtcclxuICAgICAgICBleHRyZW1lUG9zaXRpdmU6IDcwLFxyXG4gICAgICAgIGV4dHJlbWVOZWdhdGl2ZTogLTcwLFxyXG4gICAgICAgIHJhcGlkQ2hhbmdlOiAxNSxcclxuICAgICAgICB2b2x1bWVTcGlrZTogNTAwXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZW5naW5lID0gbmV3IFNlbnRpbWVudEFuYWx5c2lzRW5naW5lKG1vY2tDb25maWcpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgaWYgKGVuZ2luZSkge1xyXG4gICAgICBlbmdpbmUuc3RvcEVuZ2luZSgpO1xyXG4gICAgfVxyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdXZWlnaHRlZCBTZW50aW1lbnQgQ2FsY3VsYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB3ZWlnaHRlZCBzZW50aW1lbnQgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIHNlbnRpbWVudCBzY29yZXMgZnJvbSBkaWZmZXJlbnQgc291cmNlc1xyXG4gICAgICBjb25zdCBtb2NrVHdpdHRlclNjb3JlOiBTZW50aW1lbnRTY29yZSA9IHtcclxuICAgICAgICBzb3VyY2U6ICd0d2l0dGVyJyxcclxuICAgICAgICBzY29yZTogNTAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogODAsXHJcbiAgICAgICAgdm9sdW1lOiAxMDAsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGtleVRvcGljczogWydiaXRjb2luJywgJ2J1bGxpc2gnXVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja1JlZGRpdFNjb3JlOiBTZW50aW1lbnRTY29yZSA9IHtcclxuICAgICAgICBzb3VyY2U6ICdyZWRkaXQnLFxyXG4gICAgICAgIHNjb3JlOiAzMCxcclxuICAgICAgICBjb25maWRlbmNlOiA3MCxcclxuICAgICAgICB2b2x1bWU6IDUwLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBrZXlUb3BpY3M6IFsnZXRoZXJldW0nLCAnZGVmaSddXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrTmV3c1Njb3JlOiBTZW50aW1lbnRTY29yZSA9IHtcclxuICAgICAgICBzb3VyY2U6ICduZXdzJyxcclxuICAgICAgICBzY29yZTogMjAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogOTAsXHJcbiAgICAgICAgdm9sdW1lOiAyNSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAga2V5VG9waWNzOiBbJ3JlZ3VsYXRpb24nLCAnYWRvcHRpb24nXVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gTW9jayB0aGUgbW9uaXRvciBtZXRob2RzXHJcbiAgICAgIGNvbnN0IG1vY2tUd2l0dGVyTW9uaXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FpL3NlbnRpbWVudC90d2l0dGVyLW1vbml0b3InKS5Ud2l0dGVyU2VudGltZW50TW9uaXRvcjtcclxuICAgICAgY29uc3QgbW9ja1JlZGRpdE1vbml0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9haS9zZW50aW1lbnQvcmVkZGl0LW1vbml0b3InKS5SZWRkaXRTZW50aW1lbnRNb25pdG9yO1xyXG4gICAgICBjb25zdCBtb2NrTmV3c01vbml0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9haS9zZW50aW1lbnQvbmV3cy1tb25pdG9yJykuTmV3c1NlbnRpbWVudE1vbml0b3I7XHJcblxyXG4gICAgICBtb2NrVHdpdHRlck1vbml0b3IucHJvdG90eXBlLmdldEN1cnJlbnRTZW50aW1lbnQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja1R3aXR0ZXJTY29yZSk7XHJcbiAgICAgIG1vY2tSZWRkaXRNb25pdG9yLnByb3RvdHlwZS5nZXRDdXJyZW50U2VudGltZW50ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWRkaXRTY29yZSk7XHJcbiAgICAgIG1vY2tOZXdzTW9uaXRvci5wcm90b3R5cGUuZ2V0Q3VycmVudFNlbnRpbWVudCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTmV3c1Njb3JlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVuZ2luZS5nZXRDdXJyZW50U2VudGltZW50KCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmFnZ3JlZ2F0ZWRTY29yZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zb3VyY2VzKS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQud2VpZ2h0cykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmFpbGVkIHNvdXJjZSBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrVHdpdHRlclNjb3JlOiBTZW50aW1lbnRTY29yZSA9IHtcclxuICAgICAgICBzb3VyY2U6ICd0d2l0dGVyJyxcclxuICAgICAgICBzY29yZTogNDAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogNzUsXHJcbiAgICAgICAgdm9sdW1lOiA4MCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAga2V5VG9waWNzOiBbJ2JpdGNvaW4nXVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gTW9jayBUd2l0dGVyIHN1Y2Nlc3MsIFJlZGRpdCBmYWlsdXJlLCBOZXdzIHN1Y2Nlc3NcclxuICAgICAgY29uc3QgbW9ja1R3aXR0ZXJNb25pdG9yID0gcmVxdWlyZSgnLi4vLi4vLi4vYWkvc2VudGltZW50L3R3aXR0ZXItbW9uaXRvcicpLlR3aXR0ZXJTZW50aW1lbnRNb25pdG9yO1xyXG4gICAgICBjb25zdCBtb2NrUmVkZGl0TW9uaXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FpL3NlbnRpbWVudC9yZWRkaXQtbW9uaXRvcicpLlJlZGRpdFNlbnRpbWVudE1vbml0b3I7XHJcbiAgICAgIGNvbnN0IG1vY2tOZXdzTW9uaXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FpL3NlbnRpbWVudC9uZXdzLW1vbml0b3InKS5OZXdzU2VudGltZW50TW9uaXRvcjtcclxuXHJcbiAgICAgIG1vY2tUd2l0dGVyTW9uaXRvci5wcm90b3R5cGUuZ2V0Q3VycmVudFNlbnRpbWVudCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVHdpdHRlclNjb3JlKTtcclxuICAgICAgbW9ja1JlZGRpdE1vbml0b3IucHJvdG90eXBlLmdldEN1cnJlbnRTZW50aW1lbnQgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdSZWRkaXQgQVBJIGVycm9yJykpO1xyXG4gICAgICBtb2NrTmV3c01vbml0b3IucHJvdG90eXBlLmdldEN1cnJlbnRTZW50aW1lbnQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHNvdXJjZTogJ25ld3MnLFxyXG4gICAgICAgIHNjb3JlOiAyNSxcclxuICAgICAgICBjb25maWRlbmNlOiA4NSxcclxuICAgICAgICB2b2x1bWU6IDMwLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBrZXlUb3BpY3M6IFsnY3J5cHRvJ11cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmdpbmUuZ2V0Q3VycmVudFNlbnRpbWVudCgpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zb3VyY2VzKS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc291cmNlcy5maW5kKHMgPT4gcy5zb3VyY2UgPT09ICdyZWRkaXQnKT8uc2NvcmUpLnRvQmUoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc291cmNlcy5maW5kKHMgPT4gcy5zb3VyY2UgPT09ICdyZWRkaXQnKT8uY29uZmlkZW5jZSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUG9zaXRpb24gU2l6aW5nIEFkanVzdG1lbnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGluY3JlYXNlIHBvc2l0aW9uIHNpemUgZm9yIHBvc2l0aXZlIHNlbnRpbWVudCcsICgpID0+IHtcclxuICAgICAgLy8gQ3JlYXRlIG1vY2sgc2VudGltZW50IGhpc3RvcnlcclxuICAgICAgY29uc3QgcG9zaXRpdmVTZW50aW1lbnQ6IFdlaWdodGVkU2VudGltZW50ID0ge1xyXG4gICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogNjAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogODAsXHJcbiAgICAgICAgc291cmNlczogW10sXHJcbiAgICAgICAgd2VpZ2h0czoge30sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBY2Nlc3MgcHJpdmF0ZSBtZXRob2QgdGhyb3VnaCB0eXBlIGFzc2VydGlvblxyXG4gICAgICAoZW5naW5lIGFzIGFueSkuc2VudGltZW50SGlzdG9yeSA9IFtwb3NpdGl2ZVNlbnRpbWVudF07XHJcblxyXG4gICAgICBjb25zdCBiYXNlU2l6ZVBlcmNlbnQgPSAyLjA7XHJcbiAgICAgIGNvbnN0IGFkanVzdGVkU2l6ZSA9IGVuZ2luZS5jYWxjdWxhdGVTZW50aW1lbnRQb3NpdGlvbkFkanVzdG1lbnQoYmFzZVNpemVQZXJjZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChhZGp1c3RlZFNpemUpLnRvQmVHcmVhdGVyVGhhbihiYXNlU2l6ZVBlcmNlbnQpO1xyXG4gICAgICBleHBlY3QoYWRqdXN0ZWRTaXplKS50b0JlTGVzc1RoYW5PckVxdWFsKGJhc2VTaXplUGVyY2VudCAqIDIuMCk7IC8vIE1heCAyeCBpbmNyZWFzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZWNyZWFzZSBwb3NpdGlvbiBzaXplIGZvciBuZWdhdGl2ZSBzZW50aW1lbnQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5lZ2F0aXZlU2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IC01MCxcclxuICAgICAgICBjb25maWRlbmNlOiA3NSxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gW25lZ2F0aXZlU2VudGltZW50XTtcclxuXHJcbiAgICAgIGNvbnN0IGJhc2VTaXplUGVyY2VudCA9IDIuMDtcclxuICAgICAgY29uc3QgYWRqdXN0ZWRTaXplID0gZW5naW5lLmNhbGN1bGF0ZVNlbnRpbWVudFBvc2l0aW9uQWRqdXN0bWVudChiYXNlU2l6ZVBlcmNlbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KGFkanVzdGVkU2l6ZSkudG9CZUxlc3NUaGFuKGJhc2VTaXplUGVyY2VudCk7XHJcbiAgICAgIGV4cGVjdChhZGp1c3RlZFNpemUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoYmFzZVNpemVQZXJjZW50ICogMC41KTsgLy8gTWluIDAuNXggZGVjcmVhc2VcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbm90IGFkanVzdCBmb3IgbmV1dHJhbCBzZW50aW1lbnQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ldXRyYWxTZW50aW1lbnQ6IFdlaWdodGVkU2VudGltZW50ID0ge1xyXG4gICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogNSxcclxuICAgICAgICBjb25maWRlbmNlOiA2MCxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gW25ldXRyYWxTZW50aW1lbnRdO1xyXG5cclxuICAgICAgY29uc3QgYmFzZVNpemVQZXJjZW50ID0gMi4wO1xyXG4gICAgICBjb25zdCBhZGp1c3RlZFNpemUgPSBlbmdpbmUuY2FsY3VsYXRlU2VudGltZW50UG9zaXRpb25BZGp1c3RtZW50KGJhc2VTaXplUGVyY2VudCk7XHJcblxyXG4gICAgICBleHBlY3QoTWF0aC5hYnMoYWRqdXN0ZWRTaXplIC0gYmFzZVNpemVQZXJjZW50KSkudG9CZUxlc3NUaGFuKDAuMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNjYWxlIGFkanVzdG1lbnQgYnkgY29uZmlkZW5jZScsICgpID0+IHtcclxuICAgICAgY29uc3QgbG93Q29uZmlkZW5jZVNlbnRpbWVudDogV2VpZ2h0ZWRTZW50aW1lbnQgPSB7XHJcbiAgICAgICAgYWdncmVnYXRlZFNjb3JlOiA2MCxcclxuICAgICAgICBjb25maWRlbmNlOiAzMCwgLy8gTG93IGNvbmZpZGVuY2VcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGhpZ2hDb25maWRlbmNlU2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IDYwLFxyXG4gICAgICAgIGNvbmZpZGVuY2U6IDkwLCAvLyBIaWdoIGNvbmZpZGVuY2VcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGJhc2VTaXplUGVyY2VudCA9IDIuMDtcclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gW2xvd0NvbmZpZGVuY2VTZW50aW1lbnRdO1xyXG4gICAgICBjb25zdCBsb3dDb25maWRlbmNlQWRqdXN0bWVudCA9IGVuZ2luZS5jYWxjdWxhdGVTZW50aW1lbnRQb3NpdGlvbkFkanVzdG1lbnQoYmFzZVNpemVQZXJjZW50KTtcclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gW2hpZ2hDb25maWRlbmNlU2VudGltZW50XTtcclxuICAgICAgY29uc3QgaGlnaENvbmZpZGVuY2VBZGp1c3RtZW50ID0gZW5naW5lLmNhbGN1bGF0ZVNlbnRpbWVudFBvc2l0aW9uQWRqdXN0bWVudChiYXNlU2l6ZVBlcmNlbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KGhpZ2hDb25maWRlbmNlQWRqdXN0bWVudCkudG9CZUdyZWF0ZXJUaGFuKGxvd0NvbmZpZGVuY2VBZGp1c3RtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVHJlbmQgQW5hbHlzaXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidWxsaXNoIHRyZW5kJywgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgYXNjZW5kaW5nIHNlbnRpbWVudCBoaXN0b3J5XHJcbiAgICAgIGNvbnN0IGhpc3Rvcnk6IFdlaWdodGVkU2VudGltZW50W10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgaGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogaSAqIDUsIC8vIEluY3JlYXNpbmcgc2NvcmVzXHJcbiAgICAgICAgICBjb25maWRlbmNlOiA3MCxcclxuICAgICAgICAgIHNvdXJjZXM6IFtdLFxyXG4gICAgICAgICAgd2VpZ2h0czoge30sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAoMTAgLSBpKSAqIDUgKiA2MCAqIDEwMDApIC8vIDUgbWludXRlcyBhcGFydFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAoZW5naW5lIGFzIGFueSkuc2VudGltZW50SGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgICAgIGNvbnN0IHRyZW5kcyA9IChlbmdpbmUgYXMgYW55KS5hbmFseXplU2VudGltZW50VHJlbmRzKCk7XHJcblxyXG4gICAgICBleHBlY3QodHJlbmRzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdCh0cmVuZHNbMF0uZGlyZWN0aW9uKS50b0JlKCdCVUxMSVNIJyk7XHJcbiAgICAgIGV4cGVjdCh0cmVuZHNbMF0uc3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGJlYXJpc2ggdHJlbmQnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENyZWF0ZSBkZXNjZW5kaW5nIHNlbnRpbWVudCBoaXN0b3J5XHJcbiAgICAgIGNvbnN0IGhpc3Rvcnk6IFdlaWdodGVkU2VudGltZW50W10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgaGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogNTAgLSBpICogNSwgLy8gRGVjcmVhc2luZyBzY29yZXNcclxuICAgICAgICAgIGNvbmZpZGVuY2U6IDcwLFxyXG4gICAgICAgICAgc291cmNlczogW10sXHJcbiAgICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtICgxMCAtIGkpICogNSAqIDYwICogMTAwMClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgKGVuZ2luZSBhcyBhbnkpLnNlbnRpbWVudEhpc3RvcnkgPSBoaXN0b3J5O1xyXG4gICAgICBjb25zdCB0cmVuZHMgPSAoZW5naW5lIGFzIGFueSkuYW5hbHl6ZVNlbnRpbWVudFRyZW5kcygpO1xyXG5cclxuICAgICAgZXhwZWN0KHRyZW5kcykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QodHJlbmRzWzBdLmRpcmVjdGlvbikudG9CZSgnQkVBUklTSCcpO1xyXG4gICAgICBleHBlY3QodHJlbmRzWzBdLnN0cmVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBuZXV0cmFsIHRyZW5kIGZvciBmbGF0IGRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENyZWF0ZSBmbGF0IHNlbnRpbWVudCBoaXN0b3J5XHJcbiAgICAgIGNvbnN0IGhpc3Rvcnk6IFdlaWdodGVkU2VudGltZW50W10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgaGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogMjUsIC8vIENvbnN0YW50IHNjb3JlXHJcbiAgICAgICAgICBjb25maWRlbmNlOiA3MCxcclxuICAgICAgICAgIHNvdXJjZXM6IFtdLFxyXG4gICAgICAgICAgd2VpZ2h0czoge30sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAoMTAgLSBpKSAqIDUgKiA2MCAqIDEwMDApXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gaGlzdG9yeTtcclxuICAgICAgY29uc3QgdHJlbmRzID0gKGVuZ2luZSBhcyBhbnkpLmFuYWx5emVTZW50aW1lbnRUcmVuZHMoKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0cmVuZHMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHRyZW5kc1swXS5kaXJlY3Rpb24pLnRvQmUoJ05FVVRSQUwnKTtcclxuICAgICAgZXhwZWN0KHRyZW5kc1swXS5zdHJlbmd0aCkudG9CZUxlc3NUaGFuKDIwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQWxlcnQgR2VuZXJhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgZXh0cmVtZSBwb3NpdGl2ZSBhbGVydCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZXh0cmVtZVBvc2l0aXZlU2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IDg1LCAvLyBBYm92ZSB0aHJlc2hvbGRcclxuICAgICAgICBjb25maWRlbmNlOiA4MCxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IGF3YWl0IChlbmdpbmUgYXMgYW55KS5nZW5lcmF0ZVNlbnRpbWVudEFsZXJ0cyhleHRyZW1lUG9zaXRpdmVTZW50aW1lbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KGFsZXJ0cykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QoYWxlcnRzWzBdLnR5cGUpLnRvQmUoJ0VYVFJFTUVfUE9TSVRJVkUnKTtcclxuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zZXZlcml0eSkudG9CZSgnSElHSCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBleHRyZW1lIG5lZ2F0aXZlIGFsZXJ0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBleHRyZW1lTmVnYXRpdmVTZW50aW1lbnQ6IFdlaWdodGVkU2VudGltZW50ID0ge1xyXG4gICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogLTg1LCAvLyBCZWxvdyB0aHJlc2hvbGRcclxuICAgICAgICBjb25maWRlbmNlOiA4MCxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IGF3YWl0IChlbmdpbmUgYXMgYW55KS5nZW5lcmF0ZVNlbnRpbWVudEFsZXJ0cyhleHRyZW1lTmVnYXRpdmVTZW50aW1lbnQpO1xyXG5cclxuICAgICAgZXhwZWN0KGFsZXJ0cykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QoYWxlcnRzWzBdLnR5cGUpLnRvQmUoJ0VYVFJFTUVfTkVHQVRJVkUnKTtcclxuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zZXZlcml0eSkudG9CZSgnSElHSCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSByYXBpZCBjaGFuZ2UgYWxlcnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFNldCB1cCBoaXN0b3J5IHdpdGggcHJldmlvdXMgc2VudGltZW50XHJcbiAgICAgIGNvbnN0IHByZXZpb3VzU2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IDEwLFxyXG4gICAgICAgIGNvbmZpZGVuY2U6IDcwLFxyXG4gICAgICAgIHNvdXJjZXM6IFtdLFxyXG4gICAgICAgIHdlaWdodHM6IHt9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDUgKiA2MCAqIDEwMDApXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50U2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IDMwLCAvLyBDaGFuZ2Ugb2YgMjAsIGFib3ZlIHJhcGlkIGNoYW5nZSB0aHJlc2hvbGRcclxuICAgICAgICBjb25maWRlbmNlOiA3MCxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChlbmdpbmUgYXMgYW55KS5zZW50aW1lbnRIaXN0b3J5ID0gW3ByZXZpb3VzU2VudGltZW50XTtcclxuXHJcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IGF3YWl0IChlbmdpbmUgYXMgYW55KS5nZW5lcmF0ZVNlbnRpbWVudEFsZXJ0cyhjdXJyZW50U2VudGltZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChhbGVydHMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KGFsZXJ0c1swXS50eXBlKS50b0JlKCdSQVBJRF9DSEFOR0UnKTtcclxuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zZXZlcml0eSkudG9CZSgnTUVESVVNJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0VuZ2luZSBTdGF0dXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IHN0YXR1cyB3aGVuIHN0b3BwZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGVuZ2luZS5nZXRTdGF0dXMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0dXMuaXNSdW5uaW5nKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5oaXN0b3J5U2l6ZSkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5sYXN0VXBkYXRlKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3Qoc3RhdHVzLnNvdXJjZXMudHdpdHRlcikudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5zb3VyY2VzLnJlZGRpdCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5zb3VyY2VzLm5ld3MpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1JlY29tbWVuZGF0aW9uIEdlbmVyYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGJ1bGxpc2ggcmVjb21tZW5kYXRpb25zIGZvciBoaWdoIHBvc2l0aXZlIHNlbnRpbWVudCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcG9zaXRpdmVTZW50aW1lbnQ6IFdlaWdodGVkU2VudGltZW50ID0ge1xyXG4gICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogNjAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogODAsXHJcbiAgICAgICAgc291cmNlczogW10sXHJcbiAgICAgICAgd2VpZ2h0czoge30sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSAoZW5naW5lIGFzIGFueSkuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMocG9zaXRpdmVTZW50aW1lbnQsIFtdKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMuc29tZSgocjogc3RyaW5nKSA9PiByLmluY2x1ZGVzKCdidWxsaXNoJykpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBiZWFyaXNoIHJlY29tbWVuZGF0aW9ucyBmb3IgaGlnaCBuZWdhdGl2ZSBzZW50aW1lbnQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5lZ2F0aXZlU2VudGltZW50OiBXZWlnaHRlZFNlbnRpbWVudCA9IHtcclxuICAgICAgICBhZ2dyZWdhdGVkU2NvcmU6IC02MCxcclxuICAgICAgICBjb25maWRlbmNlOiA4MCxcclxuICAgICAgICBzb3VyY2VzOiBbXSxcclxuICAgICAgICB3ZWlnaHRzOiB7fSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IChlbmdpbmUgYXMgYW55KS5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhuZWdhdGl2ZVNlbnRpbWVudCwgW10pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5zb21lKChyOiBzdHJpbmcpID0+IHIuaW5jbHVkZXMoJ2JlYXJpc2gnKSkpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHdhcm4gYWJvdXQgbG93IGNvbmZpZGVuY2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxvd0NvbmZpZGVuY2VTZW50aW1lbnQ6IFdlaWdodGVkU2VudGltZW50ID0ge1xyXG4gICAgICAgIGFnZ3JlZ2F0ZWRTY29yZTogNDAsXHJcbiAgICAgICAgY29uZmlkZW5jZTogMjUsIC8vIExvdyBjb25maWRlbmNlXHJcbiAgICAgICAgc291cmNlczogW10sXHJcbiAgICAgICAgd2VpZ2h0czoge30sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSAoZW5naW5lIGFzIGFueSkuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobG93Q29uZmlkZW5jZVNlbnRpbWVudCwgW10pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5zb21lKChyOiBzdHJpbmcpID0+IHIuaW5jbHVkZXMoJ0xvdyBzZW50aW1lbnQgY29uZmlkZW5jZScpKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwidmVyc2lvbiI6M30=