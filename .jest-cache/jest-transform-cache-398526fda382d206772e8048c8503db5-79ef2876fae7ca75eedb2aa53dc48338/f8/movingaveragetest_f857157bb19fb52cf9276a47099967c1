a7f79b8257433732b840af385ad4f9f0
"use strict";
// =============================================================================
// AI CRYPTO TRADING AGENT - MOVING AVERAGE STRATEGY UNIT TESTS
// =============================================================================
// Comprehensive unit tests for moving average crossover strategy
// Tests all edge cases, boundary conditions, and signal generation
// =============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
const moving_average_1 = require("@/trading/strategies/moving-average");
describe('MovingAverageStrategy', () => {
    let strategy;
    beforeEach(() => {
        strategy = new moving_average_1.MovingAverageStrategy();
    });
    describe('calculateEMA', () => {
        it('should calculate EMA correctly for valid data', () => {
            const prices = [10, 12, 14, 16, 18, 20, 22, 24, 26, 28];
            const period = 5;
            const ema = strategy.calculateEMA(prices, period);
            expect(ema).toHaveLength(prices.length);
            expect(ema[0]).toBeNull(); // First values should be null
            expect(ema[4]).toBeCloseTo(14, 2); // First EMA value
            expect(ema[ema.length - 1]).toBeGreaterThan(prices[prices.length - 1] * 0.8);
        });
        it('should handle insufficient data gracefully', () => {
            const prices = [10, 12, 14];
            const period = 5;
            const ema = strategy.calculateEMA(prices, period);
            expect(ema).toHaveLength(3);
            expect(ema.every(val => val === null)).toBe(true);
        });
        it('should handle empty array', () => {
            const prices = [];
            const period = 5;
            const ema = strategy.calculateEMA(prices, period);
            expect(ema).toHaveLength(0);
        });
        it('should handle single price point', () => {
            const prices = [100];
            const period = 1;
            const ema = strategy.calculateEMA(prices, period);
            expect(ema).toHaveLength(1);
            expect(ema[0]).toBe(100);
        });
    });
    describe('calculateSMA', () => {
        it('should calculate SMA correctly for valid data', () => {
            const prices = [10, 20, 30, 40, 50];
            const period = 3;
            const sma = strategy.calculateSMA(prices, period);
            expect(sma).toHaveLength(5);
            expect(sma[0]).toBeNull();
            expect(sma[1]).toBeNull();
            expect(sma[2]).toBe(20); // (10+20+30)/3
            expect(sma[3]).toBe(30); // (20+30+40)/3
            expect(sma[4]).toBe(40); // (30+40+50)/3
        });
        it('should handle period larger than data length', () => {
            const prices = [10, 20, 30];
            const period = 5;
            const sma = strategy.calculateSMA(prices, period);
            expect(sma.every(val => val === null)).toBe(true);
        });
    });
    describe('detectCrossover', () => {
        it('should detect bullish crossover', () => {
            const fastMA = [null, null, 10, 12, 15, 18, 22];
            const slowMA = [null, null, null, null, 14, 16, 20];
            const crossovers = strategy.detectCrossover(fastMA, slowMA);
            expect(crossovers).toHaveLength(7);
            expect(crossovers[4]).toBe('BULLISH'); // Fast crosses above slow
            expect(crossovers[5]).toBe('BULLISH');
            expect(crossovers[6]).toBe('BULLISH');
        });
        it('should detect bearish crossover', () => {
            const fastMA = [null, null, 20, 18, 15, 12, 10];
            const slowMA = [null, null, null, null, 16, 14, 12];
            const crossovers = strategy.detectCrossover(fastMA, slowMA);
            expect(crossovers).toHaveLength(7);
            expect(crossovers[4]).toBe('BEARISH'); // Fast crosses below slow
        });
        it('should handle null values correctly', () => {
            const fastMA = [null, null, 10, 12];
            const slowMA = [null, null, null, 11];
            const crossovers = strategy.detectCrossover(fastMA, slowMA);
            expect(crossovers[0]).toBeNull();
            expect(crossovers[1]).toBeNull();
            expect(crossovers[2]).toBeNull();
            expect(crossovers[3]).toBe('BULLISH');
        });
    });
    describe('confirmWithVolume', () => {
        it('should confirm signal with high volume', () => {
            const volumes = [1000, 1200, 1500, 2000, 2500];
            const currentIndex = 4;
            const confirmed = strategy.confirmWithVolume(volumes, currentIndex);
            expect(confirmed).toBe(true);
        });
        it('should reject signal with low volume', () => {
            const volumes = [2000, 1800, 1500, 1200, 800];
            const currentIndex = 4;
            const confirmed = strategy.confirmWithVolume(volumes, currentIndex);
            expect(confirmed).toBe(false);
        });
        it('should handle insufficient volume data', () => {
            const volumes = [1000, 1200];
            const currentIndex = 1;
            const confirmed = strategy.confirmWithVolume(volumes, currentIndex);
            expect(confirmed).toBe(false);
        });
    });
    describe('generateSignal', () => {
        it('should generate BUY signal for bullish crossover with volume confirmation', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [45000, 46000, 47000, 48000, 49000, 50000, 51000, 52000],
                volumes: [100, 120, 150, 180, 200, 250, 300, 350],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal).toBeDefined();
            expect(signal.type).toBe('BUY');
            expect(signal.symbol).toBe('BTC/USDT');
            expect(signal.strength).toBeGreaterThan(0);
            expect(signal.confidence).toBeGreaterThan(0);
            expect(signal.indicators).toContain('MA_CROSSOVER');
        });
        it('should generate SELL signal for bearish crossover', () => {
            const marketData = {
                symbol: 'ETH/USDT',
                prices: [3000, 2950, 2900, 2850, 2800, 2750, 2700, 2650],
                volumes: [100, 120, 150, 180, 200, 250, 300, 350],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal).toBeDefined();
            expect(signal.type).toBe('SELL');
            expect(signal.symbol).toBe('ETH/USDT');
            expect(signal.strength).toBeGreaterThan(0);
        });
        it('should return HOLD signal when no clear crossover', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [50000, 50100, 49900, 50050, 49950, 50025, 49975, 50000],
                volumes: [100, 100, 100, 100, 100, 100, 100, 100],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
            expect(signal.strength).toBeLessThan(50);
        });
        it('should handle insufficient data gracefully', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [50000, 51000],
                volumes: [100, 120],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
            expect(signal.strength).toBe(0);
            expect(signal.confidence).toBe(0);
        });
    });
    describe('calculateSignalStrength', () => {
        it('should calculate higher strength for larger price movements', () => {
            const prices = [100, 105, 110, 115, 120];
            const crossoverType = 'BULLISH';
            const strength = strategy.calculateSignalStrength(prices, crossoverType);
            expect(strength).toBeGreaterThan(50);
            expect(strength).toBeLessThanOrEqual(100);
        });
        it('should calculate lower strength for smaller movements', () => {
            const prices = [100, 100.5, 101, 101.5, 102];
            const crossoverType = 'BULLISH';
            const strength = strategy.calculateSignalStrength(prices, crossoverType);
            expect(strength).toBeLessThan(50);
            expect(strength).toBeGreaterThan(0);
        });
        it('should return 0 for invalid crossover type', () => {
            const prices = [100, 105, 110];
            const crossoverType = 'INVALID';
            const strength = strategy.calculateSignalStrength(prices, crossoverType);
            expect(strength).toBe(0);
        });
    });
    describe('Edge Cases and Error Handling', () => {
        it('should handle NaN values in prices', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [50000, NaN, 51000, 52000],
                volumes: [100, 120, 150, 180],
                timestamp: new Date()
            };
            expect(() => strategy.generateSignal(marketData)).not.toThrow();
        });
        it('should handle negative prices', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [50000, -1000, 51000, 52000],
                volumes: [100, 120, 150, 180],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.type).toBe('HOLD');
        });
        it('should handle zero volumes', () => {
            const marketData = {
                symbol: 'BTC/USDT',
                prices: [50000, 51000, 52000, 53000],
                volumes: [0, 0, 0, 0],
                timestamp: new Date()
            };
            const signal = strategy.generateSignal(marketData);
            expect(signal.confidence).toBeLessThan(50);
        });
        it('should validate configuration parameters', () => {
            expect(() => new moving_average_1.MovingAverageStrategy({ fastPeriod: 0 })).toThrow();
            expect(() => new moving_average_1.MovingAverageStrategy({ slowPeriod: 0 })).toThrow();
            expect(() => new moving_average_1.MovingAverageStrategy({ fastPeriod: 50, slowPeriod: 20 })).toThrow();
        });
    });
    describe('Performance Tests', () => {
        it('should handle large datasets efficiently', () => {
            const largeDataset = Array.from({ length: 10000 }, (_, i) => 50000 + Math.random() * 1000);
            const volumes = Array.from({ length: 10000 }, () => 100 + Math.random() * 200);
            const marketData = {
                symbol: 'BTC/USDT',
                prices: largeDataset,
                volumes: volumes,
                timestamp: new Date()
            };
            const startTime = Date.now();
            const signal = strategy.generateSignal(marketData);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
            expect(signal).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFx0cmFkaW5nXFxzdHJhdGVnaWVzXFxtb3ZpbmctYXZlcmFnZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQSxnRkFBZ0Y7QUFDaEYsK0RBQStEO0FBQy9ELGdGQUFnRjtBQUNoRixpRUFBaUU7QUFDakUsbUVBQW1FO0FBQ25FLGdGQUFnRjs7QUFFaEYsd0VBQTRFO0FBRzVFLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7SUFDckMsSUFBSSxRQUErQixDQUFDO0lBRXBDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLEdBQUcsSUFBSSxzQ0FBcUIsRUFBRSxDQUFDO0lBQ3pDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDNUIsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN2RCxNQUFNLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQztZQUVqQixNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztZQUVsRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyw4QkFBOEI7WUFDekQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0I7WUFDckQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQy9FLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBRWpCLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRWxELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1lBQ25DLE1BQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQztZQUM1QixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFFakIsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFbEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDMUMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFFakIsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFbEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtRQUM1QixFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELE1BQU0sTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQztZQUVqQixNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztZQUVsRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMxQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDMUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGVBQWU7WUFDeEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGVBQWU7WUFDeEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGVBQWU7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1lBQ3RELE1BQU0sTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM1QixNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFFakIsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFbEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUN6QyxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFcEQsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFNUQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsMEJBQTBCO1lBQ2pFLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNoRCxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRXBELE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRTVELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbkMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtRQUNuRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNwQyxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRTVELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNqQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDakMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLE9BQU8sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMvQyxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUM7WUFFdkIsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztZQUVwRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLE9BQU8sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM5QyxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUM7WUFFdkIsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztZQUVwRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLE9BQU8sR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUM3QixNQUFNLFlBQVksR0FBRyxDQUFDLENBQUM7WUFFdkIsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztZQUVwRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQywyRUFBMkUsRUFBRSxHQUFHLEVBQUU7WUFDbkYsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLE1BQU0sRUFBRSxVQUFVO2dCQUNsQixNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDO2dCQUNoRSxPQUFPLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO2dCQUNqRCxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7YUFDdEIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFbkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLFVBQVUsR0FBRztnQkFDakIsTUFBTSxFQUFFLFVBQVU7Z0JBQ2xCLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7Z0JBQ3hELE9BQU8sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7Z0JBQ2pELFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUVuRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDN0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1lBQzNELE1BQU0sVUFBVSxHQUFHO2dCQUNqQixNQUFNLEVBQUUsVUFBVTtnQkFDbEIsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztnQkFDaEUsT0FBTyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztnQkFDakQsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBRW5ELE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLFVBQVUsR0FBRztnQkFDakIsTUFBTSxFQUFFLFVBQVU7Z0JBQ2xCLE1BQU0sRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7Z0JBQ3RCLE9BQU8sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUVuRCxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNqQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtRQUN2QyxFQUFFLENBQUMsNkRBQTZELEVBQUUsR0FBRyxFQUFFO1lBQ3JFLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sYUFBYSxHQUFHLFNBQVMsQ0FBQztZQUVoQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsdUJBQXVCLENBQUMsTUFBTSxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBRXpFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtZQUMvRCxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM3QyxNQUFNLGFBQWEsR0FBRyxTQUFTLENBQUM7WUFFaEMsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FBQztZQUV6RSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3BELE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMvQixNQUFNLGFBQWEsR0FBRyxTQUFnQixDQUFDO1lBRXZDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFekUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtRQUM3QyxFQUFFLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sVUFBVSxHQUFHO2dCQUNqQixNQUFNLEVBQUUsVUFBVTtnQkFDbEIsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDO2dCQUNsQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7Z0JBQzdCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QixDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sVUFBVSxHQUFHO2dCQUNqQixNQUFNLEVBQUUsVUFBVTtnQkFDbEIsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUM7Z0JBQ3BDLE9BQU8sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztnQkFDN0IsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtZQUNwQyxNQUFNLFVBQVUsR0FBRztnQkFDakIsTUFBTSxFQUFFLFVBQVU7Z0JBQ2xCLE1BQU0sRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztnQkFDcEMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7YUFDdEIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMENBQTBDLEVBQUUsR0FBRyxFQUFFO1lBQ2xELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLHNDQUFxQixDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNyRSxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxzQ0FBcUIsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDckUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksc0NBQXFCLENBQUMsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDeEYsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUMzRixNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFL0UsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLE1BQU0sRUFBRSxVQUFVO2dCQUNsQixNQUFNLEVBQUUsWUFBWTtnQkFDcEIsT0FBTyxFQUFFLE9BQU87Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QixDQUFDO1lBRUYsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQzdCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbkQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBRTNCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsa0NBQWtDO1lBQ2xGLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOaWNrXFxEZXNrdG9wXFxTbW9vdGhTYWlsXFxzcmNcXHRlc3RzXFx0cmFkaW5nXFxzdHJhdGVnaWVzXFxtb3ZpbmctYXZlcmFnZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFJIENSWVBUTyBUUkFESU5HIEFHRU5UIC0gTU9WSU5HIEFWRVJBR0UgU1RSQVRFR1kgVU5JVCBURVNUU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBDb21wcmVoZW5zaXZlIHVuaXQgdGVzdHMgZm9yIG1vdmluZyBhdmVyYWdlIGNyb3Nzb3ZlciBzdHJhdGVneVxyXG4vLyBUZXN0cyBhbGwgZWRnZSBjYXNlcywgYm91bmRhcnkgY29uZGl0aW9ucywgYW5kIHNpZ25hbCBnZW5lcmF0aW9uXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgeyBNb3ZpbmdBdmVyYWdlU3RyYXRlZ3kgfSBmcm9tICdAL3RyYWRpbmcvc3RyYXRlZ2llcy9tb3ZpbmctYXZlcmFnZSc7XHJcbmltcG9ydCB7IE1vdmluZ0F2ZXJhZ2VTaWduYWwsIFRyYWRpbmdTaWduYWwgfSBmcm9tICdAL3RyYWRpbmcvc3RyYXRlZ2llcy90eXBlcyc7XHJcblxyXG5kZXNjcmliZSgnTW92aW5nQXZlcmFnZVN0cmF0ZWd5JywgKCkgPT4ge1xyXG4gIGxldCBzdHJhdGVneTogTW92aW5nQXZlcmFnZVN0cmF0ZWd5O1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIHN0cmF0ZWd5ID0gbmV3IE1vdmluZ0F2ZXJhZ2VTdHJhdGVneSgpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY2FsY3VsYXRlRU1BJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgRU1BIGNvcnJlY3RseSBmb3IgdmFsaWQgZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gWzEwLCAxMiwgMTQsIDE2LCAxOCwgMjAsIDIyLCAyNCwgMjYsIDI4XTtcclxuICAgICAgY29uc3QgcGVyaW9kID0gNTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVtYSA9IHN0cmF0ZWd5LmNhbGN1bGF0ZUVNQShwcmljZXMsIHBlcmlvZCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZW1hKS50b0hhdmVMZW5ndGgocHJpY2VzLmxlbmd0aCk7XHJcbiAgICAgIGV4cGVjdChlbWFbMF0pLnRvQmVOdWxsKCk7IC8vIEZpcnN0IHZhbHVlcyBzaG91bGQgYmUgbnVsbFxyXG4gICAgICBleHBlY3QoZW1hWzRdKS50b0JlQ2xvc2VUbygxNCwgMik7IC8vIEZpcnN0IEVNQSB2YWx1ZVxyXG4gICAgICBleHBlY3QoZW1hW2VtYS5sZW5ndGggLSAxXSkudG9CZUdyZWF0ZXJUaGFuKHByaWNlc1twcmljZXMubGVuZ3RoIC0gMV0gKiAwLjgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW5zdWZmaWNpZW50IGRhdGEgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gWzEwLCAxMiwgMTRdO1xyXG4gICAgICBjb25zdCBwZXJpb2QgPSA1O1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZW1hID0gc3RyYXRlZ3kuY2FsY3VsYXRlRU1BKHByaWNlcywgcGVyaW9kKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChlbWEpLnRvSGF2ZUxlbmd0aCgzKTtcclxuICAgICAgZXhwZWN0KGVtYS5ldmVyeSh2YWwgPT4gdmFsID09PSBudWxsKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGFycmF5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgIGNvbnN0IHBlcmlvZCA9IDU7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlbWEgPSBzdHJhdGVneS5jYWxjdWxhdGVFTUEocHJpY2VzLCBwZXJpb2QpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGVtYSkudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIHByaWNlIHBvaW50JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwXTtcclxuICAgICAgY29uc3QgcGVyaW9kID0gMTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVtYSA9IHN0cmF0ZWd5LmNhbGN1bGF0ZUVNQShwcmljZXMsIHBlcmlvZCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZW1hKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChlbWFbMF0pLnRvQmUoMTAwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY2FsY3VsYXRlU01BJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgU01BIGNvcnJlY3RseSBmb3IgdmFsaWQgZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gWzEwLCAyMCwgMzAsIDQwLCA1MF07XHJcbiAgICAgIGNvbnN0IHBlcmlvZCA9IDM7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzbWEgPSBzdHJhdGVneS5jYWxjdWxhdGVTTUEocHJpY2VzLCBwZXJpb2QpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNtYSkudG9IYXZlTGVuZ3RoKDUpO1xyXG4gICAgICBleHBlY3Qoc21hWzBdKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3Qoc21hWzFdKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3Qoc21hWzJdKS50b0JlKDIwKTsgLy8gKDEwKzIwKzMwKS8zXHJcbiAgICAgIGV4cGVjdChzbWFbM10pLnRvQmUoMzApOyAvLyAoMjArMzArNDApLzNcclxuICAgICAgZXhwZWN0KHNtYVs0XSkudG9CZSg0MCk7IC8vICgzMCs0MCs1MCkvM1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGVyaW9kIGxhcmdlciB0aGFuIGRhdGEgbGVuZ3RoJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAsIDIwLCAzMF07XHJcbiAgICAgIGNvbnN0IHBlcmlvZCA9IDU7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzbWEgPSBzdHJhdGVneS5jYWxjdWxhdGVTTUEocHJpY2VzLCBwZXJpb2QpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNtYS5ldmVyeSh2YWwgPT4gdmFsID09PSBudWxsKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZGV0ZWN0Q3Jvc3NvdmVyJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgYnVsbGlzaCBjcm9zc292ZXInLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZhc3RNQSA9IFtudWxsLCBudWxsLCAxMCwgMTIsIDE1LCAxOCwgMjJdO1xyXG4gICAgICBjb25zdCBzbG93TUEgPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgMTQsIDE2LCAyMF07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjcm9zc292ZXJzID0gc3RyYXRlZ3kuZGV0ZWN0Q3Jvc3NvdmVyKGZhc3RNQSwgc2xvd01BKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzKS50b0hhdmVMZW5ndGgoNyk7XHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzRdKS50b0JlKCdCVUxMSVNIJyk7IC8vIEZhc3QgY3Jvc3NlcyBhYm92ZSBzbG93XHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzVdKS50b0JlKCdCVUxMSVNIJyk7XHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzZdKS50b0JlKCdCVUxMSVNIJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBiZWFyaXNoIGNyb3Nzb3ZlcicsICgpID0+IHtcclxuICAgICAgY29uc3QgZmFzdE1BID0gW251bGwsIG51bGwsIDIwLCAxOCwgMTUsIDEyLCAxMF07XHJcbiAgICAgIGNvbnN0IHNsb3dNQSA9IFtudWxsLCBudWxsLCBudWxsLCBudWxsLCAxNiwgMTQsIDEyXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNyb3Nzb3ZlcnMgPSBzdHJhdGVneS5kZXRlY3RDcm9zc292ZXIoZmFzdE1BLCBzbG93TUEpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnMpLnRvSGF2ZUxlbmd0aCg3KTtcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnNbNF0pLnRvQmUoJ0JFQVJJU0gnKTsgLy8gRmFzdCBjcm9zc2VzIGJlbG93IHNsb3dcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgdmFsdWVzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgZmFzdE1BID0gW251bGwsIG51bGwsIDEwLCAxMl07XHJcbiAgICAgIGNvbnN0IHNsb3dNQSA9IFtudWxsLCBudWxsLCBudWxsLCAxMV07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjcm9zc292ZXJzID0gc3RyYXRlZ3kuZGV0ZWN0Q3Jvc3NvdmVyKGZhc3RNQSwgc2xvd01BKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzBdKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QoY3Jvc3NvdmVyc1sxXSkudG9CZU51bGwoKTtcclxuICAgICAgZXhwZWN0KGNyb3Nzb3ZlcnNbMl0pLnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChjcm9zc292ZXJzWzNdKS50b0JlKCdCVUxMSVNIJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2NvbmZpcm1XaXRoVm9sdW1lJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjb25maXJtIHNpZ25hbCB3aXRoIGhpZ2ggdm9sdW1lJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2b2x1bWVzID0gWzEwMDAsIDEyMDAsIDE1MDAsIDIwMDAsIDI1MDBdO1xyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSA0O1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY29uZmlybWVkID0gc3RyYXRlZ3kuY29uZmlybVdpdGhWb2x1bWUodm9sdW1lcywgY3VycmVudEluZGV4KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjb25maXJtZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBzaWduYWwgd2l0aCBsb3cgdm9sdW1lJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2b2x1bWVzID0gWzIwMDAsIDE4MDAsIDE1MDAsIDEyMDAsIDgwMF07XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IDQ7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjb25maXJtZWQgPSBzdHJhdGVneS5jb25maXJtV2l0aFZvbHVtZSh2b2x1bWVzLCBjdXJyZW50SW5kZXgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNvbmZpcm1lZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnN1ZmZpY2llbnQgdm9sdW1lIGRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZvbHVtZXMgPSBbMTAwMCwgMTIwMF07XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IDE7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjb25maXJtZWQgPSBzdHJhdGVneS5jb25maXJtV2l0aFZvbHVtZSh2b2x1bWVzLCBjdXJyZW50SW5kZXgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNvbmZpcm1lZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dlbmVyYXRlU2lnbmFsJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBCVVkgc2lnbmFsIGZvciBidWxsaXNoIGNyb3Nzb3ZlciB3aXRoIHZvbHVtZSBjb25maXJtYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hcmtldERhdGEgPSB7XHJcbiAgICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxyXG4gICAgICAgIHByaWNlczogWzQ1MDAwLCA0NjAwMCwgNDcwMDAsIDQ4MDAwLCA0OTAwMCwgNTAwMDAsIDUxMDAwLCA1MjAwMF0sXHJcbiAgICAgICAgdm9sdW1lczogWzEwMCwgMTIwLCAxNTAsIDE4MCwgMjAwLCAyNTAsIDMwMCwgMzUwXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNpZ25hbCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC50eXBlKS50b0JlKCdCVVknKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5zeW1ib2wpLnRvQmUoJ0JUQy9VU0RUJyk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwuc3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwuaW5kaWNhdG9ycykudG9Db250YWluKCdNQV9DUk9TU09WRVInKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgU0VMTCBzaWduYWwgZm9yIGJlYXJpc2ggY3Jvc3NvdmVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYXJrZXREYXRhID0ge1xyXG4gICAgICAgIHN5bWJvbDogJ0VUSC9VU0RUJyxcclxuICAgICAgICBwcmljZXM6IFszMDAwLCAyOTUwLCAyOTAwLCAyODUwLCAyODAwLCAyNzUwLCAyNzAwLCAyNjUwXSxcclxuICAgICAgICB2b2x1bWVzOiBbMTAwLCAxMjAsIDE1MCwgMTgwLCAyMDAsIDI1MCwgMzAwLCAzNTBdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2lnbmFsID0gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc2lnbmFsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnR5cGUpLnRvQmUoJ1NFTEwnKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5zeW1ib2wpLnRvQmUoJ0VUSC9VU0RUJyk7XHJcbiAgICAgIGV4cGVjdChzaWduYWwuc3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIEhPTEQgc2lnbmFsIHdoZW4gbm8gY2xlYXIgY3Jvc3NvdmVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYXJrZXREYXRhID0ge1xyXG4gICAgICAgIHN5bWJvbDogJ0JUQy9VU0RUJyxcclxuICAgICAgICBwcmljZXM6IFs1MDAwMCwgNTAxMDAsIDQ5OTAwLCA1MDA1MCwgNDk5NTAsIDUwMDI1LCA0OTk3NSwgNTAwMDBdLFxyXG4gICAgICAgIHZvbHVtZXM6IFsxMDAsIDEwMCwgMTAwLCAxMDAsIDEwMCwgMTAwLCAxMDAsIDEwMF0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzaWduYWwudHlwZSkudG9CZSgnSE9MRCcpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnN0cmVuZ3RoKS50b0JlTGVzc1RoYW4oNTApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW5zdWZmaWNpZW50IGRhdGEgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzOiBbNTAwMDAsIDUxMDAwXSxcclxuICAgICAgICB2b2x1bWVzOiBbMTAwLCAxMjBdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2lnbmFsID0gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc2lnbmFsLnR5cGUpLnRvQmUoJ0hPTEQnKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5zdHJlbmd0aCkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHNpZ25hbC5jb25maWRlbmNlKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjYWxjdWxhdGVTaWduYWxTdHJlbmd0aCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGhpZ2hlciBzdHJlbmd0aCBmb3IgbGFyZ2VyIHByaWNlIG1vdmVtZW50cycsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2VzID0gWzEwMCwgMTA1LCAxMTAsIDExNSwgMTIwXTtcclxuICAgICAgY29uc3QgY3Jvc3NvdmVyVHlwZSA9ICdCVUxMSVNIJztcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0cmVuZ3RoID0gc3RyYXRlZ3kuY2FsY3VsYXRlU2lnbmFsU3RyZW5ndGgocHJpY2VzLCBjcm9zc292ZXJUeXBlKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzdHJlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDUwKTtcclxuICAgICAgZXhwZWN0KHN0cmVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBsb3dlciBzdHJlbmd0aCBmb3Igc21hbGxlciBtb3ZlbWVudHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDEwMC41LCAxMDEsIDEwMS41LCAxMDJdO1xyXG4gICAgICBjb25zdCBjcm9zc292ZXJUeXBlID0gJ0JVTExJU0gnO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RyZW5ndGggPSBzdHJhdGVneS5jYWxjdWxhdGVTaWduYWxTdHJlbmd0aChwcmljZXMsIGNyb3Nzb3ZlclR5cGUpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN0cmVuZ3RoKS50b0JlTGVzc1RoYW4oNTApO1xyXG4gICAgICBleHBlY3Qoc3RyZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgZm9yIGludmFsaWQgY3Jvc3NvdmVyIHR5cGUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDEwNSwgMTEwXTtcclxuICAgICAgY29uc3QgY3Jvc3NvdmVyVHlwZSA9ICdJTlZBTElEJyBhcyBhbnk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdHJlbmd0aCA9IHN0cmF0ZWd5LmNhbGN1bGF0ZVNpZ25hbFN0cmVuZ3RoKHByaWNlcywgY3Jvc3NvdmVyVHlwZSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3RyZW5ndGgpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgYW5kIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgTmFOIHZhbHVlcyBpbiBwcmljZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hcmtldERhdGEgPSB7XHJcbiAgICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxyXG4gICAgICAgIHByaWNlczogWzUwMDAwLCBOYU4sIDUxMDAwLCA1MjAwMF0sXHJcbiAgICAgICAgdm9sdW1lczogWzEwMCwgMTIwLCAxNTAsIDE4MF0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoKCkgPT4gc3RyYXRlZ3kuZ2VuZXJhdGVTaWduYWwobWFya2V0RGF0YSkpLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZWdhdGl2ZSBwcmljZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hcmtldERhdGEgPSB7XHJcbiAgICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxyXG4gICAgICAgIHByaWNlczogWzUwMDAwLCAtMTAwMCwgNTEwMDAsIDUyMDAwXSxcclxuICAgICAgICB2b2x1bWVzOiBbMTAwLCAxMjAsIDE1MCwgMTgwXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLnR5cGUpLnRvQmUoJ0hPTEQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHplcm8gdm9sdW1lcycsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFya2V0RGF0YSA9IHtcclxuICAgICAgICBzeW1ib2w6ICdCVEMvVVNEVCcsXHJcbiAgICAgICAgcHJpY2VzOiBbNTAwMDAsIDUxMDAwLCA1MjAwMCwgNTMwMDBdLFxyXG4gICAgICAgIHZvbHVtZXM6IFswLCAwLCAwLCAwXSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHNpZ25hbCA9IHN0cmF0ZWd5LmdlbmVyYXRlU2lnbmFsKG1hcmtldERhdGEpO1xyXG4gICAgICBleHBlY3Qoc2lnbmFsLmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbig1MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IG5ldyBNb3ZpbmdBdmVyYWdlU3RyYXRlZ3koeyBmYXN0UGVyaW9kOiAwIH0pKS50b1Rocm93KCk7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBuZXcgTW92aW5nQXZlcmFnZVN0cmF0ZWd5KHsgc2xvd1BlcmlvZDogMCB9KSkudG9UaHJvdygpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gbmV3IE1vdmluZ0F2ZXJhZ2VTdHJhdGVneSh7IGZhc3RQZXJpb2Q6IDUwLCBzbG93UGVyaW9kOiAyMCB9KSkudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBUZXN0cycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIGRhdGFzZXRzIGVmZmljaWVudGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsYXJnZURhdGFzZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwMCB9LCAoXywgaSkgPT4gNTAwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbiAgICAgIGNvbnN0IHZvbHVtZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwMCB9LCAoKSA9PiAxMDAgKyBNYXRoLnJhbmRvbSgpICogMjAwKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1hcmtldERhdGEgPSB7XHJcbiAgICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxyXG4gICAgICAgIHByaWNlczogbGFyZ2VEYXRhc2V0LFxyXG4gICAgICAgIHZvbHVtZXM6IHZvbHVtZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCBzaWduYWwgPSBzdHJhdGVneS5nZW5lcmF0ZVNpZ25hbChtYXJrZXREYXRhKTtcclxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDEgc2Vjb25kXHJcbiAgICAgIGV4cGVjdChzaWduYWwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9